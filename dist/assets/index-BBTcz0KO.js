(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const o of n)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function s(n){const o={};return n.integrity&&(o.integrity=n.integrity),n.referrerPolicy&&(o.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?o.credentials="include":n.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(n){if(n.ep)return;n.ep=!0;const o=s(n);fetch(n.href,o)}})();const pd="modulepreload",md=function(e){return"/"+e},ta={},hs=function(t,s,r){let n=Promise.resolve();if(s&&s.length>0){document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),a=(i==null?void 0:i.nonce)||(i==null?void 0:i.getAttribute("nonce"));n=Promise.allSettled(s.map(l=>{if(l=md(l),l in ta)return;ta[l]=!0;const d=l.endsWith(".css"),u=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${u}`))return;const f=document.createElement("link");if(f.rel=d?"stylesheet":pd,d||(f.as="script"),f.crossOrigin="",f.href=l,a&&f.setAttribute("nonce",a),document.head.appendChild(f),d)return new Promise((h,p)=>{f.addEventListener("load",h),f.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${l}`)))})}))}function o(i){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=i,window.dispatchEvent(a),!a.defaultPrevented)throw i}return n.then(i=>{for(const a of i||[])a.status==="rejected"&&o(a.reason);return t().catch(o)})};/**
* @vue/shared v3.5.14
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function yi(e){const t=Object.create(null);for(const s of e.split(","))t[s]=1;return s=>s in t}const Re={},qs=[],Lt=()=>{},gd=()=>!1,Un=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),bi=e=>e.startsWith("onUpdate:"),Ge=Object.assign,_i=(e,t)=>{const s=e.indexOf(t);s>-1&&e.splice(s,1)},vd=Object.prototype.hasOwnProperty,Te=(e,t)=>vd.call(e,t),ae=Array.isArray,Ks=e=>qr(e)==="[object Map]",sr=e=>qr(e)==="[object Set]",sa=e=>qr(e)==="[object Date]",me=e=>typeof e=="function",Fe=e=>typeof e=="string",$t=e=>typeof e=="symbol",je=e=>e!==null&&typeof e=="object",Ol=e=>(je(e)||me(e))&&me(e.then)&&me(e.catch),Il=Object.prototype.toString,qr=e=>Il.call(e),yd=e=>qr(e).slice(8,-1),Ml=e=>qr(e)==="[object Object]",wi=e=>Fe(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,_r=yi(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Bn=e=>{const t=Object.create(null);return s=>t[s]||(t[s]=e(s))},bd=/-(\w)/g,_t=Bn(e=>e.replace(bd,(t,s)=>s?s.toUpperCase():"")),_d=/\B([A-Z])/g,Ms=Bn(e=>e.replace(_d,"-$1").toLowerCase()),zn=Bn(e=>e.charAt(0).toUpperCase()+e.slice(1)),mo=Bn(e=>e?`on${zn(e)}`:""),ds=(e,t)=>!Object.is(e,t),vn=(e,...t)=>{for(let s=0;s<e.length;s++)e[s](...t)},Ll=(e,t,s,r=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:r,value:s})},$n=e=>{const t=parseFloat(e);return isNaN(t)?e:t},wd=e=>{const t=Fe(e)?Number(e):NaN;return isNaN(t)?e:t};let ra;const Vn=()=>ra||(ra=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function ps(e){if(ae(e)){const t={};for(let s=0;s<e.length;s++){const r=e[s],n=Fe(r)?Ed(r):ps(r);if(n)for(const o in n)t[o]=n[o]}return t}else if(Fe(e)||je(e))return e}const xd=/;(?![^(]*\))/g,kd=/:([^]+)/,$d=/\/\*[^]*?\*\//g;function Ed(e){const t={};return e.replace($d,"").split(xd).forEach(s=>{if(s){const r=s.split(kd);r.length>1&&(t[r[0].trim()]=r[1].trim())}}),t}function ye(e){let t="";if(Fe(e))t=e;else if(ae(e))for(let s=0;s<e.length;s++){const r=ye(e[s]);r&&(t+=r+" ")}else if(je(e))for(const s in e)e[s]&&(t+=s+" ");return t.trim()}const Cd="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Sd=yi(Cd);function Dl(e){return!!e||e===""}function Td(e,t){if(e.length!==t.length)return!1;let s=!0;for(let r=0;s&&r<e.length;r++)s=js(e[r],t[r]);return s}function js(e,t){if(e===t)return!0;let s=sa(e),r=sa(t);if(s||r)return s&&r?e.getTime()===t.getTime():!1;if(s=$t(e),r=$t(t),s||r)return e===t;if(s=ae(e),r=ae(t),s||r)return s&&r?Td(e,t):!1;if(s=je(e),r=je(t),s||r){if(!s||!r)return!1;const n=Object.keys(e).length,o=Object.keys(t).length;if(n!==o)return!1;for(const i in e){const a=e.hasOwnProperty(i),l=t.hasOwnProperty(i);if(a&&!l||!a&&l||!js(e[i],t[i]))return!1}}return String(e)===String(t)}function xi(e,t){return e.findIndex(s=>js(s,t))}const Nl=e=>!!(e&&e.__v_isRef===!0),E=e=>Fe(e)?e:e==null?"":ae(e)||je(e)&&(e.toString===Il||!me(e.toString))?Nl(e)?E(e.value):JSON.stringify(e,Fl,2):String(e),Fl=(e,t)=>Nl(t)?Fl(e,t.value):Ks(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((s,[r,n],o)=>(s[go(r,o)+" =>"]=n,s),{})}:sr(t)?{[`Set(${t.size})`]:[...t.values()].map(s=>go(s))}:$t(t)?go(t):je(t)&&!ae(t)&&!Ml(t)?String(t):t,go=(e,t="")=>{var s;return $t(e)?`Symbol(${(s=e.description)!=null?s:t})`:e};/**
* @vue/reactivity v3.5.14
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Xe;class Ul{constructor(t=!1){this.detached=t,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Xe,!t&&Xe&&(this.index=(Xe.scopes||(Xe.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,s;if(this.scopes)for(t=0,s=this.scopes.length;t<s;t++)this.scopes[t].pause();for(t=0,s=this.effects.length;t<s;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,s;if(this.scopes)for(t=0,s=this.scopes.length;t<s;t++)this.scopes[t].resume();for(t=0,s=this.effects.length;t<s;t++)this.effects[t].resume()}}run(t){if(this._active){const s=Xe;try{return Xe=this,t()}finally{Xe=s}}}on(){++this._on===1&&(this.prevScope=Xe,Xe=this)}off(){this._on>0&&--this._on===0&&(Xe=this.prevScope,this.prevScope=void 0)}stop(t){if(this._active){this._active=!1;let s,r;for(s=0,r=this.effects.length;s<r;s++)this.effects[s].stop();for(this.effects.length=0,s=0,r=this.cleanups.length;s<r;s++)this.cleanups[s]();if(this.cleanups.length=0,this.scopes){for(s=0,r=this.scopes.length;s<r;s++)this.scopes[s].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const n=this.parent.scopes.pop();n&&n!==this&&(this.parent.scopes[this.index]=n,n.index=this.index)}this.parent=void 0}}}function Bl(e){return new Ul(e)}function zl(){return Xe}function Pd(e,t=!1){Xe&&Xe.cleanups.push(e)}let Le;const vo=new WeakSet;class Vl{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Xe&&Xe.active&&Xe.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,vo.has(this)&&(vo.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||ql(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,na(this),Kl(this);const t=Le,s=kt;Le=this,kt=!0;try{return this.fn()}finally{Wl(this),Le=t,kt=s,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)Ei(t);this.deps=this.depsTail=void 0,na(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?vo.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Fo(this)&&this.run()}get dirty(){return Fo(this)}}let Hl=0,wr,xr;function ql(e,t=!1){if(e.flags|=8,t){e.next=xr,xr=e;return}e.next=wr,wr=e}function ki(){Hl++}function $i(){if(--Hl>0)return;if(xr){let t=xr;for(xr=void 0;t;){const s=t.next;t.next=void 0,t.flags&=-9,t=s}}let e;for(;wr;){let t=wr;for(wr=void 0;t;){const s=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(r){e||(e=r)}t=s}}if(e)throw e}function Kl(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function Wl(e){let t,s=e.depsTail,r=s;for(;r;){const n=r.prevDep;r.version===-1?(r===s&&(s=n),Ei(r),Ad(r)):t=r,r.dep.activeLink=r.prevActiveLink,r.prevActiveLink=void 0,r=n}e.deps=t,e.depsTail=s}function Fo(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(Gl(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function Gl(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===Or)||(e.globalVersion=Or,!e.isSSR&&e.flags&128&&(!e.deps&&!e._dirty||!Fo(e))))return;e.flags|=2;const t=e.dep,s=Le,r=kt;Le=e,kt=!0;try{Kl(e);const n=e.fn(e._value);(t.version===0||ds(n,e._value))&&(e.flags|=128,e._value=n,t.version++)}catch(n){throw t.version++,n}finally{Le=s,kt=r,Wl(e),e.flags&=-3}}function Ei(e,t=!1){const{dep:s,prevSub:r,nextSub:n}=e;if(r&&(r.nextSub=n,e.prevSub=void 0),n&&(n.prevSub=r,e.nextSub=void 0),s.subs===e&&(s.subs=r,!r&&s.computed)){s.computed.flags&=-5;for(let o=s.computed.deps;o;o=o.nextDep)Ei(o,!0)}!t&&!--s.sc&&s.map&&s.map.delete(s.key)}function Ad(e){const{prevDep:t,nextDep:s}=e;t&&(t.nextDep=s,e.prevDep=void 0),s&&(s.prevDep=t,e.nextDep=void 0)}let kt=!0;const Jl=[];function Kt(){Jl.push(kt),kt=!1}function Wt(){const e=Jl.pop();kt=e===void 0?!0:e}function na(e){const{cleanup:t}=e;if(e.cleanup=void 0,t){const s=Le;Le=void 0;try{t()}finally{Le=s}}}let Or=0;class Rd{constructor(t,s){this.sub=t,this.dep=s,this.version=s.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Ci{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(t){if(!Le||!kt||Le===this.computed)return;let s=this.activeLink;if(s===void 0||s.sub!==Le)s=this.activeLink=new Rd(Le,this),Le.deps?(s.prevDep=Le.depsTail,Le.depsTail.nextDep=s,Le.depsTail=s):Le.deps=Le.depsTail=s,Ql(s);else if(s.version===-1&&(s.version=this.version,s.nextDep)){const r=s.nextDep;r.prevDep=s.prevDep,s.prevDep&&(s.prevDep.nextDep=r),s.prevDep=Le.depsTail,s.nextDep=void 0,Le.depsTail.nextDep=s,Le.depsTail=s,Le.deps===s&&(Le.deps=r)}return s}trigger(t){this.version++,Or++,this.notify(t)}notify(t){ki();try{for(let s=this.subs;s;s=s.prevSub)s.sub.notify()&&s.sub.dep.notify()}finally{$i()}}}function Ql(e){if(e.dep.sc++,e.sub.flags&4){const t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let r=t.deps;r;r=r.nextDep)Ql(r)}const s=e.dep.subs;s!==e&&(e.prevSub=s,s&&(s.nextSub=e)),e.dep.subs=e}}const En=new WeakMap,Ps=Symbol(""),Uo=Symbol(""),Ir=Symbol("");function Ze(e,t,s){if(kt&&Le){let r=En.get(e);r||En.set(e,r=new Map);let n=r.get(s);n||(r.set(s,n=new Ci),n.map=r,n.key=s),n.track()}}function Vt(e,t,s,r,n,o){const i=En.get(e);if(!i){Or++;return}const a=l=>{l&&l.trigger()};if(ki(),t==="clear")i.forEach(a);else{const l=ae(e),d=l&&wi(s);if(l&&s==="length"){const u=Number(r);i.forEach((f,h)=>{(h==="length"||h===Ir||!$t(h)&&h>=u)&&a(f)})}else switch((s!==void 0||i.has(void 0))&&a(i.get(s)),d&&a(i.get(Ir)),t){case"add":l?d&&a(i.get("length")):(a(i.get(Ps)),Ks(e)&&a(i.get(Uo)));break;case"delete":l||(a(i.get(Ps)),Ks(e)&&a(i.get(Uo)));break;case"set":Ks(e)&&a(i.get(Ps));break}}$i()}function jd(e,t){const s=En.get(e);return s&&s.get(t)}function Ds(e){const t=$e(e);return t===e?t:(Ze(t,"iterate",Ir),yt(e)?t:t.map(Ye))}function Hn(e){return Ze(e=$e(e),"iterate",Ir),e}const Od={__proto__:null,[Symbol.iterator](){return yo(this,Symbol.iterator,Ye)},concat(...e){return Ds(this).concat(...e.map(t=>ae(t)?Ds(t):t))},entries(){return yo(this,"entries",e=>(e[1]=Ye(e[1]),e))},every(e,t){return Ft(this,"every",e,t,void 0,arguments)},filter(e,t){return Ft(this,"filter",e,t,s=>s.map(Ye),arguments)},find(e,t){return Ft(this,"find",e,t,Ye,arguments)},findIndex(e,t){return Ft(this,"findIndex",e,t,void 0,arguments)},findLast(e,t){return Ft(this,"findLast",e,t,Ye,arguments)},findLastIndex(e,t){return Ft(this,"findLastIndex",e,t,void 0,arguments)},forEach(e,t){return Ft(this,"forEach",e,t,void 0,arguments)},includes(...e){return bo(this,"includes",e)},indexOf(...e){return bo(this,"indexOf",e)},join(e){return Ds(this).join(e)},lastIndexOf(...e){return bo(this,"lastIndexOf",e)},map(e,t){return Ft(this,"map",e,t,void 0,arguments)},pop(){return ur(this,"pop")},push(...e){return ur(this,"push",e)},reduce(e,...t){return oa(this,"reduce",e,t)},reduceRight(e,...t){return oa(this,"reduceRight",e,t)},shift(){return ur(this,"shift")},some(e,t){return Ft(this,"some",e,t,void 0,arguments)},splice(...e){return ur(this,"splice",e)},toReversed(){return Ds(this).toReversed()},toSorted(e){return Ds(this).toSorted(e)},toSpliced(...e){return Ds(this).toSpliced(...e)},unshift(...e){return ur(this,"unshift",e)},values(){return yo(this,"values",Ye)}};function yo(e,t,s){const r=Hn(e),n=r[t]();return r!==e&&!yt(e)&&(n._next=n.next,n.next=()=>{const o=n._next();return o.value&&(o.value=s(o.value)),o}),n}const Id=Array.prototype;function Ft(e,t,s,r,n,o){const i=Hn(e),a=i!==e&&!yt(e),l=i[t];if(l!==Id[t]){const f=l.apply(e,o);return a?Ye(f):f}let d=s;i!==e&&(a?d=function(f,h){return s.call(this,Ye(f),h,e)}:s.length>2&&(d=function(f,h){return s.call(this,f,h,e)}));const u=l.call(i,d,r);return a&&n?n(u):u}function oa(e,t,s,r){const n=Hn(e);let o=s;return n!==e&&(yt(e)?s.length>3&&(o=function(i,a,l){return s.call(this,i,a,l,e)}):o=function(i,a,l){return s.call(this,i,Ye(a),l,e)}),n[t](o,...r)}function bo(e,t,s){const r=$e(e);Ze(r,"iterate",Ir);const n=r[t](...s);return(n===-1||n===!1)&&Pi(s[0])?(s[0]=$e(s[0]),r[t](...s)):n}function ur(e,t,s=[]){Kt(),ki();const r=$e(e)[t].apply(e,s);return $i(),Wt(),r}const Md=yi("__proto__,__v_isRef,__isVue"),Yl=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter($t));function Ld(e){$t(e)||(e=String(e));const t=$e(this);return Ze(t,"has",e),t.hasOwnProperty(e)}class Xl{constructor(t=!1,s=!1){this._isReadonly=t,this._isShallow=s}get(t,s,r){if(s==="__v_skip")return t.__v_skip;const n=this._isReadonly,o=this._isShallow;if(s==="__v_isReactive")return!n;if(s==="__v_isReadonly")return n;if(s==="__v_isShallow")return o;if(s==="__v_raw")return r===(n?o?Kd:sc:o?tc:ec).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(r)?t:void 0;const i=ae(t);if(!n){let l;if(i&&(l=Od[s]))return l;if(s==="hasOwnProperty")return Ld}const a=Reflect.get(t,s,Ve(t)?t:r);return($t(s)?Yl.has(s):Md(s))||(n||Ze(t,"get",s),o)?a:Ve(a)?i&&wi(s)?a:a.value:je(a)?n?Ue(a):rr(a):a}}class Zl extends Xl{constructor(t=!1){super(!1,t)}set(t,s,r,n){let o=t[s];if(!this._isShallow){const l=ms(o);if(!yt(r)&&!ms(r)&&(o=$e(o),r=$e(r)),!ae(t)&&Ve(o)&&!Ve(r))return l?!1:(o.value=r,!0)}const i=ae(t)&&wi(s)?Number(s)<t.length:Te(t,s),a=Reflect.set(t,s,r,Ve(t)?t:n);return t===$e(n)&&(i?ds(r,o)&&Vt(t,"set",s,r):Vt(t,"add",s,r)),a}deleteProperty(t,s){const r=Te(t,s);t[s];const n=Reflect.deleteProperty(t,s);return n&&r&&Vt(t,"delete",s,void 0),n}has(t,s){const r=Reflect.has(t,s);return(!$t(s)||!Yl.has(s))&&Ze(t,"has",s),r}ownKeys(t){return Ze(t,"iterate",ae(t)?"length":Ps),Reflect.ownKeys(t)}}class Dd extends Xl{constructor(t=!1){super(!0,t)}set(t,s){return!0}deleteProperty(t,s){return!0}}const Nd=new Zl,Fd=new Dd,Ud=new Zl(!0);const Bo=e=>e,sn=e=>Reflect.getPrototypeOf(e);function Bd(e,t,s){return function(...r){const n=this.__v_raw,o=$e(n),i=Ks(o),a=e==="entries"||e===Symbol.iterator&&i,l=e==="keys"&&i,d=n[e](...r),u=s?Bo:t?Cn:Ye;return!t&&Ze(o,"iterate",l?Uo:Ps),{next(){const{value:f,done:h}=d.next();return h?{value:f,done:h}:{value:a?[u(f[0]),u(f[1])]:u(f),done:h}},[Symbol.iterator](){return this}}}}function rn(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function zd(e,t){const s={get(n){const o=this.__v_raw,i=$e(o),a=$e(n);e||(ds(n,a)&&Ze(i,"get",n),Ze(i,"get",a));const{has:l}=sn(i),d=t?Bo:e?Cn:Ye;if(l.call(i,n))return d(o.get(n));if(l.call(i,a))return d(o.get(a));o!==i&&o.get(n)},get size(){const n=this.__v_raw;return!e&&Ze($e(n),"iterate",Ps),Reflect.get(n,"size",n)},has(n){const o=this.__v_raw,i=$e(o),a=$e(n);return e||(ds(n,a)&&Ze(i,"has",n),Ze(i,"has",a)),n===a?o.has(n):o.has(n)||o.has(a)},forEach(n,o){const i=this,a=i.__v_raw,l=$e(a),d=t?Bo:e?Cn:Ye;return!e&&Ze(l,"iterate",Ps),a.forEach((u,f)=>n.call(o,d(u),d(f),i))}};return Ge(s,e?{add:rn("add"),set:rn("set"),delete:rn("delete"),clear:rn("clear")}:{add(n){!t&&!yt(n)&&!ms(n)&&(n=$e(n));const o=$e(this);return sn(o).has.call(o,n)||(o.add(n),Vt(o,"add",n,n)),this},set(n,o){!t&&!yt(o)&&!ms(o)&&(o=$e(o));const i=$e(this),{has:a,get:l}=sn(i);let d=a.call(i,n);d||(n=$e(n),d=a.call(i,n));const u=l.call(i,n);return i.set(n,o),d?ds(o,u)&&Vt(i,"set",n,o):Vt(i,"add",n,o),this},delete(n){const o=$e(this),{has:i,get:a}=sn(o);let l=i.call(o,n);l||(n=$e(n),l=i.call(o,n)),a&&a.call(o,n);const d=o.delete(n);return l&&Vt(o,"delete",n,void 0),d},clear(){const n=$e(this),o=n.size!==0,i=n.clear();return o&&Vt(n,"clear",void 0,void 0),i}}),["keys","values","entries",Symbol.iterator].forEach(n=>{s[n]=Bd(n,e,t)}),s}function Si(e,t){const s=zd(e,t);return(r,n,o)=>n==="__v_isReactive"?!e:n==="__v_isReadonly"?e:n==="__v_raw"?r:Reflect.get(Te(s,n)&&n in r?s:r,n,o)}const Vd={get:Si(!1,!1)},Hd={get:Si(!1,!0)},qd={get:Si(!0,!1)};const ec=new WeakMap,tc=new WeakMap,sc=new WeakMap,Kd=new WeakMap;function Wd(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Gd(e){return e.__v_skip||!Object.isExtensible(e)?0:Wd(yd(e))}function rr(e){return ms(e)?e:Ti(e,!1,Nd,Vd,ec)}function rc(e){return Ti(e,!1,Ud,Hd,tc)}function Ue(e){return Ti(e,!0,Fd,qd,sc)}function Ti(e,t,s,r,n){if(!je(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const o=Gd(e);if(o===0)return e;const i=n.get(e);if(i)return i;const a=new Proxy(e,o===2?r:s);return n.set(e,a),a}function fs(e){return ms(e)?fs(e.__v_raw):!!(e&&e.__v_isReactive)}function ms(e){return!!(e&&e.__v_isReadonly)}function yt(e){return!!(e&&e.__v_isShallow)}function Pi(e){return e?!!e.__v_raw:!1}function $e(e){const t=e&&e.__v_raw;return t?$e(t):e}function Ai(e){return!Te(e,"__v_skip")&&Object.isExtensible(e)&&Ll(e,"__v_skip",!0),e}const Ye=e=>je(e)?rr(e):e,Cn=e=>je(e)?Ue(e):e;function Ve(e){return e?e.__v_isRef===!0:!1}function U(e){return oc(e,!1)}function nc(e){return oc(e,!0)}function oc(e,t){return Ve(e)?e:new Jd(e,t)}class Jd{constructor(t,s){this.dep=new Ci,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=s?t:$e(t),this._value=s?t:Ye(t),this.__v_isShallow=s}get value(){return this.dep.track(),this._value}set value(t){const s=this._rawValue,r=this.__v_isShallow||yt(t)||ms(t);t=r?t:$e(t),ds(t,s)&&(this._rawValue=t,this._value=r?t:Ye(t),this.dep.trigger())}}function B(e){return Ve(e)?e.value:e}const Qd={get:(e,t,s)=>t==="__v_raw"?e:B(Reflect.get(e,t,s)),set:(e,t,s,r)=>{const n=e[t];return Ve(n)&&!Ve(s)?(n.value=s,!0):Reflect.set(e,t,s,r)}};function ic(e){return fs(e)?e:new Proxy(e,Qd)}function Yd(e){const t=ae(e)?new Array(e.length):{};for(const s in e)t[s]=Zd(e,s);return t}class Xd{constructor(t,s,r){this._object=t,this._key=s,this._defaultValue=r,this.__v_isRef=!0,this._value=void 0}get value(){const t=this._object[this._key];return this._value=t===void 0?this._defaultValue:t}set value(t){this._object[this._key]=t}get dep(){return jd($e(this._object),this._key)}}function Zd(e,t,s){const r=e[t];return Ve(r)?r:new Xd(e,t,s)}class ef{constructor(t,s,r){this.fn=t,this.setter=s,this._value=void 0,this.dep=new Ci(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Or-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!s,this.isSSR=r}notify(){if(this.flags|=16,!(this.flags&8)&&Le!==this)return ql(this,!0),!0}get value(){const t=this.dep.track();return Gl(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function tf(e,t,s=!1){let r,n;return me(e)?r=e:(r=e.get,n=e.set),new ef(r,n,s)}const nn={},Sn=new WeakMap;let ks;function sf(e,t=!1,s=ks){if(s){let r=Sn.get(s);r||Sn.set(s,r=[]),r.push(e)}}function rf(e,t,s=Re){const{immediate:r,deep:n,once:o,scheduler:i,augmentJob:a,call:l}=s,d=$=>n?$:yt($)||n===!1||n===0?Ht($,1):Ht($);let u,f,h,p,x=!1,w=!1;if(Ve(e)?(f=()=>e.value,x=yt(e)):fs(e)?(f=()=>d(e),x=!0):ae(e)?(w=!0,x=e.some($=>fs($)||yt($)),f=()=>e.map($=>{if(Ve($))return $.value;if(fs($))return d($);if(me($))return l?l($,2):$()})):me(e)?t?f=l?()=>l(e,2):e:f=()=>{if(h){Kt();try{h()}finally{Wt()}}const $=ks;ks=u;try{return l?l(e,3,[p]):e(p)}finally{ks=$}}:f=Lt,t&&n){const $=f,D=n===!0?1/0:n;f=()=>Ht($(),D)}const S=zl(),R=()=>{u.stop(),S&&S.active&&_i(S.effects,u)};if(o&&t){const $=t;t=(...D)=>{$(...D),R()}}let y=w?new Array(e.length).fill(nn):nn;const g=$=>{if(!(!(u.flags&1)||!u.dirty&&!$))if(t){const D=u.run();if(n||x||(w?D.some((se,W)=>ds(se,y[W])):ds(D,y))){h&&h();const se=ks;ks=u;try{const W=[D,y===nn?void 0:w&&y[0]===nn?[]:y,p];l?l(t,3,W):t(...W),y=D}finally{ks=se}}}else u.run()};return a&&a(g),u=new Vl(f),u.scheduler=i?()=>i(g,!1):g,p=$=>sf($,!1,u),h=u.onStop=()=>{const $=Sn.get(u);if($){if(l)l($,4);else for(const D of $)D();Sn.delete(u)}},t?r?g(!0):y=u.run():i?i(g.bind(null,!0),!0):u.run(),R.pause=u.pause.bind(u),R.resume=u.resume.bind(u),R.stop=R,R}function Ht(e,t=1/0,s){if(t<=0||!je(e)||e.__v_skip||(s=s||new Set,s.has(e)))return e;if(s.add(e),t--,Ve(e))Ht(e.value,t,s);else if(ae(e))for(let r=0;r<e.length;r++)Ht(e[r],t,s);else if(sr(e)||Ks(e))e.forEach(r=>{Ht(r,t,s)});else if(Ml(e)){for(const r in e)Ht(e[r],t,s);for(const r of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,r)&&Ht(e[r],t,s)}return e}/**
* @vue/runtime-core v3.5.14
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Kr(e,t,s,r){try{return r?e(...r):e()}catch(n){qn(n,t,s)}}function Et(e,t,s,r){if(me(e)){const n=Kr(e,t,s,r);return n&&Ol(n)&&n.catch(o=>{qn(o,t,s)}),n}if(ae(e)){const n=[];for(let o=0;o<e.length;o++)n.push(Et(e[o],t,s,r));return n}}function qn(e,t,s,r=!0){const n=t?t.vnode:null,{errorHandler:o,throwUnhandledErrorInProduction:i}=t&&t.appContext.config||Re;if(t){let a=t.parent;const l=t.proxy,d=`https://vuejs.org/error-reference/#runtime-${s}`;for(;a;){const u=a.ec;if(u){for(let f=0;f<u.length;f++)if(u[f](e,l,d)===!1)return}a=a.parent}if(o){Kt(),Kr(o,null,10,[e,l,d]),Wt();return}}nf(e,s,n,r,i)}function nf(e,t,s,r=!0,n=!1){if(n)throw e;console.error(e)}const rt=[];let It=-1;const Ws=[];let rs=null,zs=0;const ac=Promise.resolve();let Tn=null;function Wr(e){const t=Tn||ac;return e?t.then(this?e.bind(this):e):t}function of(e){let t=It+1,s=rt.length;for(;t<s;){const r=t+s>>>1,n=rt[r],o=Mr(n);o<e||o===e&&n.flags&2?t=r+1:s=r}return t}function Ri(e){if(!(e.flags&1)){const t=Mr(e),s=rt[rt.length-1];!s||!(e.flags&2)&&t>=Mr(s)?rt.push(e):rt.splice(of(t),0,e),e.flags|=1,lc()}}function lc(){Tn||(Tn=ac.then(uc))}function af(e){ae(e)?Ws.push(...e):rs&&e.id===-1?rs.splice(zs+1,0,e):e.flags&1||(Ws.push(e),e.flags|=1),lc()}function ia(e,t,s=It+1){for(;s<rt.length;s++){const r=rt[s];if(r&&r.flags&2){if(e&&r.id!==e.uid)continue;rt.splice(s,1),s--,r.flags&4&&(r.flags&=-2),r(),r.flags&4||(r.flags&=-2)}}}function cc(e){if(Ws.length){const t=[...new Set(Ws)].sort((s,r)=>Mr(s)-Mr(r));if(Ws.length=0,rs){rs.push(...t);return}for(rs=t,zs=0;zs<rs.length;zs++){const s=rs[zs];s.flags&4&&(s.flags&=-2),s.flags&8||s(),s.flags&=-2}rs=null,zs=0}}const Mr=e=>e.id==null?e.flags&2?-1:1/0:e.id;function uc(e){try{for(It=0;It<rt.length;It++){const t=rt[It];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),Kr(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;It<rt.length;It++){const t=rt[It];t&&(t.flags&=-2)}It=-1,rt.length=0,cc(),Tn=null,(rt.length||Ws.length)&&uc()}}let We=null,dc=null;function Pn(e){const t=We;return We=e,dc=e&&e.type.__scopeId||null,t}function ze(e,t=We,s){if(!t||e._n)return e;const r=(...n)=>{r._d&&wa(-1);const o=Pn(t);let i;try{i=e(...n)}finally{Pn(o),r._d&&wa(1)}return i};return r._n=!0,r._c=!0,r._d=!0,r}function Ke(e,t){if(We===null)return e;const s=Zn(We),r=e.dirs||(e.dirs=[]);for(let n=0;n<t.length;n++){let[o,i,a,l=Re]=t[n];o&&(me(o)&&(o={mounted:o,updated:o}),o.deep&&Ht(i),r.push({dir:o,instance:s,value:i,oldValue:void 0,arg:a,modifiers:l}))}return e}function ys(e,t,s,r){const n=e.dirs,o=t&&t.dirs;for(let i=0;i<n.length;i++){const a=n[i];o&&(a.oldValue=o[i].value);let l=a.dir[r];l&&(Kt(),Et(l,s,8,[e.el,a,e,t]),Wt())}}const fc=Symbol("_vte"),hc=e=>e.__isTeleport,kr=e=>e&&(e.disabled||e.disabled===""),aa=e=>e&&(e.defer||e.defer===""),la=e=>typeof SVGElement<"u"&&e instanceof SVGElement,ca=e=>typeof MathMLElement=="function"&&e instanceof MathMLElement,zo=(e,t)=>{const s=e&&e.to;return Fe(s)?t?t(s):null:s},pc={name:"Teleport",__isTeleport:!0,process(e,t,s,r,n,o,i,a,l,d){const{mc:u,pc:f,pbc:h,o:{insert:p,querySelector:x,createText:w,createComment:S}}=d,R=kr(t.props);let{shapeFlag:y,children:g,dynamicChildren:$}=t;if(e==null){const D=t.el=w(""),se=t.anchor=w("");p(D,s,r),p(se,s,r);const W=(A,T)=>{y&16&&(n&&n.isCE&&(n.ce._teleportTarget=A),u(g,A,T,n,o,i,a,l))},L=()=>{const A=t.target=zo(t.props,x),T=mc(A,t,w,p);A&&(i!=="svg"&&la(A)?i="svg":i!=="mathml"&&ca(A)&&(i="mathml"),R||(W(A,T),yn(t,!1)))};R&&(W(s,se),yn(t,!0)),aa(t.props)?st(()=>{L(),t.el.__isMounted=!0},o):L()}else{if(aa(t.props)&&!e.el.__isMounted){st(()=>{pc.process(e,t,s,r,n,o,i,a,l,d),delete e.el.__isMounted},o);return}t.el=e.el,t.targetStart=e.targetStart;const D=t.anchor=e.anchor,se=t.target=e.target,W=t.targetAnchor=e.targetAnchor,L=kr(e.props),A=L?s:se,T=L?D:W;if(i==="svg"||la(se)?i="svg":(i==="mathml"||ca(se))&&(i="mathml"),$?(h(e.dynamicChildren,$,A,n,o,i,a),Li(e,t,!0)):l||f(e,t,A,T,n,o,i,a,!1),R)L?t.props&&e.props&&t.props.to!==e.props.to&&(t.props.to=e.props.to):on(t,s,D,d,1);else if((t.props&&t.props.to)!==(e.props&&e.props.to)){const I=t.target=zo(t.props,x);I&&on(t,I,null,d,0)}else L&&on(t,se,W,d,1);yn(t,R)}},remove(e,t,s,{um:r,o:{remove:n}},o){const{shapeFlag:i,children:a,anchor:l,targetStart:d,targetAnchor:u,target:f,props:h}=e;if(f&&(n(d),n(u)),o&&n(l),i&16){const p=o||!kr(h);for(let x=0;x<a.length;x++){const w=a[x];r(w,t,s,p,!!w.dynamicChildren)}}},move:on,hydrate:lf};function on(e,t,s,{o:{insert:r},m:n},o=2){o===0&&r(e.targetAnchor,t,s);const{el:i,anchor:a,shapeFlag:l,children:d,props:u}=e,f=o===2;if(f&&r(i,t,s),(!f||kr(u))&&l&16)for(let h=0;h<d.length;h++)n(d[h],t,s,2);f&&r(a,t,s)}function lf(e,t,s,r,n,o,{o:{nextSibling:i,parentNode:a,querySelector:l,insert:d,createText:u}},f){const h=t.target=zo(t.props,l);if(h){const p=kr(t.props),x=h._lpa||h.firstChild;if(t.shapeFlag&16)if(p)t.anchor=f(i(e),t,a(e),s,r,n,o),t.targetStart=x,t.targetAnchor=x&&i(x);else{t.anchor=i(e);let w=x;for(;w;){if(w&&w.nodeType===8){if(w.data==="teleport start anchor")t.targetStart=w;else if(w.data==="teleport anchor"){t.targetAnchor=w,h._lpa=t.targetAnchor&&i(t.targetAnchor);break}}w=i(w)}t.targetAnchor||mc(h,t,u,d),f(x&&i(x),t,h,s,r,n,o)}yn(t,p)}return t.anchor&&i(t.anchor)}const Kn=pc;function yn(e,t){const s=e.ctx;if(s&&s.ut){let r,n;for(t?(r=e.el,n=e.anchor):(r=e.targetStart,n=e.targetAnchor);r&&r!==n;)r.nodeType===1&&r.setAttribute("data-v-owner",s.uid),r=r.nextSibling;s.ut()}}function mc(e,t,s,r){const n=t.targetStart=s(""),o=t.targetAnchor=s("");return n[fc]=o,e&&(r(n,e),r(o,e)),o}const ns=Symbol("_leaveCb"),an=Symbol("_enterCb");function gc(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Be(()=>{e.isMounted=!0}),Oi(()=>{e.isUnmounting=!0}),e}const vt=[Function,Array],vc={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:vt,onEnter:vt,onAfterEnter:vt,onEnterCancelled:vt,onBeforeLeave:vt,onLeave:vt,onAfterLeave:vt,onLeaveCancelled:vt,onBeforeAppear:vt,onAppear:vt,onAfterAppear:vt,onAppearCancelled:vt},yc=e=>{const t=e.subTree;return t.component?yc(t.component):t},cf={name:"BaseTransition",props:vc,setup(e,{slots:t}){const s=Xn(),r=gc();return()=>{const n=t.default&&ji(t.default(),!0);if(!n||!n.length)return;const o=bc(n),i=$e(e),{mode:a}=i;if(r.isLeaving)return _o(o);const l=ua(o);if(!l)return _o(o);let d=Lr(l,i,r,s,f=>d=f);l.type!==et&&Os(l,d);let u=s.subTree&&ua(s.subTree);if(u&&u.type!==et&&!Es(l,u)&&yc(s).type!==et){let f=Lr(u,i,r,s);if(Os(u,f),a==="out-in"&&l.type!==et)return r.isLeaving=!0,f.afterLeave=()=>{r.isLeaving=!1,s.job.flags&8||s.update(),delete f.afterLeave,u=void 0},_o(o);a==="in-out"&&l.type!==et?f.delayLeave=(h,p,x)=>{const w=_c(r,u);w[String(u.key)]=u,h[ns]=()=>{p(),h[ns]=void 0,delete d.delayedLeave,u=void 0},d.delayedLeave=()=>{x(),delete d.delayedLeave,u=void 0}}:u=void 0}else u&&(u=void 0);return o}}};function bc(e){let t=e[0];if(e.length>1){for(const s of e)if(s.type!==et){t=s;break}}return t}const uf=cf;function _c(e,t){const{leavingVNodes:s}=e;let r=s.get(t.type);return r||(r=Object.create(null),s.set(t.type,r)),r}function Lr(e,t,s,r,n){const{appear:o,mode:i,persisted:a=!1,onBeforeEnter:l,onEnter:d,onAfterEnter:u,onEnterCancelled:f,onBeforeLeave:h,onLeave:p,onAfterLeave:x,onLeaveCancelled:w,onBeforeAppear:S,onAppear:R,onAfterAppear:y,onAppearCancelled:g}=t,$=String(e.key),D=_c(s,e),se=(A,T)=>{A&&Et(A,r,9,T)},W=(A,T)=>{const I=T[1];se(A,T),ae(A)?A.every(N=>N.length<=1)&&I():A.length<=1&&I()},L={mode:i,persisted:a,beforeEnter(A){let T=l;if(!s.isMounted)if(o)T=S||l;else return;A[ns]&&A[ns](!0);const I=D[$];I&&Es(e,I)&&I.el[ns]&&I.el[ns](),se(T,[A])},enter(A){let T=d,I=u,N=f;if(!s.isMounted)if(o)T=R||d,I=y||u,N=g||f;else return;let G=!1;const re=A[an]=we=>{G||(G=!0,we?se(N,[A]):se(I,[A]),L.delayedLeave&&L.delayedLeave(),A[an]=void 0)};T?W(T,[A,re]):re()},leave(A,T){const I=String(e.key);if(A[an]&&A[an](!0),s.isUnmounting)return T();se(h,[A]);let N=!1;const G=A[ns]=re=>{N||(N=!0,T(),re?se(w,[A]):se(x,[A]),A[ns]=void 0,D[I]===e&&delete D[I])};D[I]=e,p?W(p,[A,G]):G()},clone(A){const T=Lr(A,t,s,r,n);return n&&n(T),T}};return L}function _o(e){if(Wn(e))return e=Gt(e),e.children=null,e}function ua(e){if(!Wn(e))return hc(e.type)&&e.children?bc(e.children):e;if(e.component)return e.component.subTree;const{shapeFlag:t,children:s}=e;if(s){if(t&16)return s[0];if(t&32&&me(s.default))return s.default()}}function Os(e,t){e.shapeFlag&6&&e.component?(e.transition=t,Os(e.component.subTree,t)):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function ji(e,t=!1,s){let r=[],n=0;for(let o=0;o<e.length;o++){let i=e[o];const a=s==null?i.key:String(s)+String(i.key!=null?i.key:o);i.type===fe?(i.patchFlag&128&&n++,r=r.concat(ji(i.children,t,a))):(t||i.type!==et)&&r.push(a!=null?Gt(i,{key:a}):i)}if(n>1)for(let o=0;o<r.length;o++)r[o].patchFlag=-2;return r}/*! #__NO_SIDE_EFFECTS__ */function Ee(e,t){return me(e)?Ge({name:e.name},t,{setup:e}):e}function df(){const e=Xn();return e?(e.appContext.config.idPrefix||"v")+"-"+e.ids[0]+e.ids[1]++:""}function wc(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}function An(e,t,s,r,n=!1){if(ae(e)){e.forEach((x,w)=>An(x,t&&(ae(t)?t[w]:t),s,r,n));return}if(Gs(r)&&!n){r.shapeFlag&512&&r.type.__asyncResolved&&r.component.subTree.component&&An(e,t,s,r.component.subTree);return}const o=r.shapeFlag&4?Zn(r.component):r.el,i=n?null:o,{i:a,r:l}=e,d=t&&t.r,u=a.refs===Re?a.refs={}:a.refs,f=a.setupState,h=$e(f),p=f===Re?()=>!1:x=>Te(h,x);if(d!=null&&d!==l&&(Fe(d)?(u[d]=null,p(d)&&(f[d]=null)):Ve(d)&&(d.value=null)),me(l))Kr(l,a,12,[i,u]);else{const x=Fe(l),w=Ve(l);if(x||w){const S=()=>{if(e.f){const R=x?p(l)?f[l]:u[l]:l.value;n?ae(R)&&_i(R,o):ae(R)?R.includes(o)||R.push(o):x?(u[l]=[o],p(l)&&(f[l]=u[l])):(l.value=[o],e.k&&(u[e.k]=l.value))}else x?(u[l]=i,p(l)&&(f[l]=i)):w&&(l.value=i,e.k&&(u[e.k]=i))};i?(S.id=-1,st(S,s)):S()}}}Vn().requestIdleCallback;Vn().cancelIdleCallback;const Gs=e=>!!e.type.__asyncLoader,Wn=e=>e.type.__isKeepAlive;function ff(e,t){xc(e,"a",t)}function hf(e,t){xc(e,"da",t)}function xc(e,t,s=Qe){const r=e.__wdc||(e.__wdc=()=>{let n=s;for(;n;){if(n.isDeactivated)return;n=n.parent}return e()});if(Gn(t,r,s),s){let n=s.parent;for(;n&&n.parent;)Wn(n.parent.vnode)&&pf(r,t,s,n),n=n.parent}}function pf(e,t,s,r){const n=Gn(t,e,r,!0);it(()=>{_i(r[t],n)},s)}function Gn(e,t,s=Qe,r=!1){if(s){const n=s[e]||(s[e]=[]),o=t.__weh||(t.__weh=(...i)=>{Kt();const a=Gr(s),l=Et(t,s,e,i);return a(),Wt(),l});return r?n.unshift(o):n.push(o),o}}const Jt=e=>(t,s=Qe)=>{(!Ur||e==="sp")&&Gn(e,(...r)=>t(...r),s)},mf=Jt("bm"),Be=Jt("m"),gf=Jt("bu"),kc=Jt("u"),Oi=Jt("bum"),it=Jt("um"),vf=Jt("sp"),yf=Jt("rtg"),bf=Jt("rtc");function _f(e,t=Qe){Gn("ec",e,t)}const $c="components";function Jn(e,t){return Cc($c,e,!0,t)||e}const Ec=Symbol.for("v-ndc");function Qs(e){return Fe(e)?Cc($c,e,!1)||e:e||Ec}function Cc(e,t,s=!0,r=!1){const n=We||Qe;if(n){const o=n.type;{const a=ah(o,!1);if(a&&(a===t||a===_t(t)||a===zn(_t(t))))return o}const i=da(n[e]||o[e],t)||da(n.appContext[e],t);return!i&&r?o:i}}function da(e,t){return e&&(e[t]||e[_t(t)]||e[zn(_t(t))])}function Ce(e,t,s,r){let n;const o=s,i=ae(e);if(i||Fe(e)){const a=i&&fs(e);let l=!1,d=!1;a&&(l=!yt(e),d=ms(e),e=Hn(e)),n=new Array(e.length);for(let u=0,f=e.length;u<f;u++)n[u]=t(l?d?Cn(Ye(e[u])):Ye(e[u]):e[u],u,void 0,o)}else if(typeof e=="number"){n=new Array(e);for(let a=0;a<e;a++)n[a]=t(a+1,a,void 0,o)}else if(je(e))if(e[Symbol.iterator])n=Array.from(e,(a,l)=>t(a,l,void 0,o));else{const a=Object.keys(e);n=new Array(a.length);for(let l=0,d=a.length;l<d;l++){const u=a[l];n[l]=t(e[u],u,l,o)}}else n=[];return n}function fa(e,t,s={},r,n){if(We.ce||We.parent&&Gs(We.parent)&&We.parent.ce)return t!=="default"&&(s.name=t),b(),De(fe,null,[oe("slot",s,r)],64);let o=e[t];o&&o._c&&(o._d=!1),b();const i=o&&Sc(o(s)),a=s.key||i&&i.key,l=De(fe,{key:(a&&!$t(a)?a:`_${t}`)+""},i||[],i&&e._===1?64:-2);return l.scopeId&&(l.slotScopeIds=[l.scopeId+"-s"]),o&&o._c&&(o._d=!0),l}function Sc(e){return e.some(t=>Nr(t)?!(t.type===et||t.type===fe&&!Sc(t.children)):!0)?e:null}const Vo=e=>e?qc(e)?Zn(e):Vo(e.parent):null,$r=Ge(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>Vo(e.parent),$root:e=>Vo(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>Pc(e),$forceUpdate:e=>e.f||(e.f=()=>{Ri(e.update)}),$nextTick:e=>e.n||(e.n=Wr.bind(e.proxy)),$watch:e=>zf.bind(e)}),wo=(e,t)=>e!==Re&&!e.__isScriptSetup&&Te(e,t),wf={get({_:e},t){if(t==="__v_skip")return!0;const{ctx:s,setupState:r,data:n,props:o,accessCache:i,type:a,appContext:l}=e;let d;if(t[0]!=="$"){const p=i[t];if(p!==void 0)switch(p){case 1:return r[t];case 2:return n[t];case 4:return s[t];case 3:return o[t]}else{if(wo(r,t))return i[t]=1,r[t];if(n!==Re&&Te(n,t))return i[t]=2,n[t];if((d=e.propsOptions[0])&&Te(d,t))return i[t]=3,o[t];if(s!==Re&&Te(s,t))return i[t]=4,s[t];Ho&&(i[t]=0)}}const u=$r[t];let f,h;if(u)return t==="$attrs"&&Ze(e.attrs,"get",""),u(e);if((f=a.__cssModules)&&(f=f[t]))return f;if(s!==Re&&Te(s,t))return i[t]=4,s[t];if(h=l.config.globalProperties,Te(h,t))return h[t]},set({_:e},t,s){const{data:r,setupState:n,ctx:o}=e;return wo(n,t)?(n[t]=s,!0):r!==Re&&Te(r,t)?(r[t]=s,!0):Te(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(o[t]=s,!0)},has({_:{data:e,setupState:t,accessCache:s,ctx:r,appContext:n,propsOptions:o}},i){let a;return!!s[i]||e!==Re&&Te(e,i)||wo(t,i)||(a=o[0])&&Te(a,i)||Te(r,i)||Te($r,i)||Te(n.config.globalProperties,i)},defineProperty(e,t,s){return s.get!=null?e._.accessCache[t]=0:Te(s,"value")&&this.set(e,t,s.value,null),Reflect.defineProperty(e,t,s)}};function ha(e){return ae(e)?e.reduce((t,s)=>(t[s]=null,t),{}):e}let Ho=!0;function xf(e){const t=Pc(e),s=e.proxy,r=e.ctx;Ho=!1,t.beforeCreate&&pa(t.beforeCreate,e,"bc");const{data:n,computed:o,methods:i,watch:a,provide:l,inject:d,created:u,beforeMount:f,mounted:h,beforeUpdate:p,updated:x,activated:w,deactivated:S,beforeDestroy:R,beforeUnmount:y,destroyed:g,unmounted:$,render:D,renderTracked:se,renderTriggered:W,errorCaptured:L,serverPrefetch:A,expose:T,inheritAttrs:I,components:N,directives:G,filters:re}=t;if(d&&kf(d,r,null),i)for(const M in i){const H=i[M];me(H)&&(r[M]=H.bind(s))}if(n){const M=n.call(s,s);je(M)&&(e.data=rr(M))}if(Ho=!0,o)for(const M in o){const H=o[M],ne=me(H)?H.bind(s,s):me(H.get)?H.get.bind(s,s):Lt,be=!me(H)&&me(H.set)?H.set.bind(s):Lt,ue=V({get:ne,set:be});Object.defineProperty(r,M,{enumerable:!0,configurable:!0,get:()=>ue.value,set:de=>ue.value=de})}if(a)for(const M in a)Tc(a[M],r,s,M);if(l){const M=me(l)?l.call(s):l;Reflect.ownKeys(M).forEach(H=>{ut(H,M[H])})}u&&pa(u,e,"c");function he(M,H){ae(H)?H.forEach(ne=>M(ne.bind(s))):H&&M(H.bind(s))}if(he(mf,f),he(Be,h),he(gf,p),he(kc,x),he(ff,w),he(hf,S),he(_f,L),he(bf,se),he(yf,W),he(Oi,y),he(it,$),he(vf,A),ae(T))if(T.length){const M=e.exposed||(e.exposed={});T.forEach(H=>{Object.defineProperty(M,H,{get:()=>s[H],set:ne=>s[H]=ne})})}else e.exposed||(e.exposed={});D&&e.render===Lt&&(e.render=D),I!=null&&(e.inheritAttrs=I),N&&(e.components=N),G&&(e.directives=G),A&&wc(e)}function kf(e,t,s=Lt){ae(e)&&(e=qo(e));for(const r in e){const n=e[r];let o;je(n)?"default"in n?o=Ne(n.from||r,n.default,!0):o=Ne(n.from||r):o=Ne(n),Ve(o)?Object.defineProperty(t,r,{enumerable:!0,configurable:!0,get:()=>o.value,set:i=>o.value=i}):t[r]=o}}function pa(e,t,s){Et(ae(e)?e.map(r=>r.bind(t.proxy)):e.bind(t.proxy),t,s)}function Tc(e,t,s,r){let n=r.includes(".")?Uc(s,r):()=>s[r];if(Fe(e)){const o=t[e];me(o)&&ot(n,o)}else if(me(e))ot(n,e.bind(s));else if(je(e))if(ae(e))e.forEach(o=>Tc(o,t,s,r));else{const o=me(e.handler)?e.handler.bind(s):t[e.handler];me(o)&&ot(n,o,e)}}function Pc(e){const t=e.type,{mixins:s,extends:r}=t,{mixins:n,optionsCache:o,config:{optionMergeStrategies:i}}=e.appContext,a=o.get(t);let l;return a?l=a:!n.length&&!s&&!r?l=t:(l={},n.length&&n.forEach(d=>Rn(l,d,i,!0)),Rn(l,t,i)),je(t)&&o.set(t,l),l}function Rn(e,t,s,r=!1){const{mixins:n,extends:o}=t;o&&Rn(e,o,s,!0),n&&n.forEach(i=>Rn(e,i,s,!0));for(const i in t)if(!(r&&i==="expose")){const a=$f[i]||s&&s[i];e[i]=a?a(e[i],t[i]):t[i]}return e}const $f={data:ma,props:ga,emits:ga,methods:vr,computed:vr,beforeCreate:tt,created:tt,beforeMount:tt,mounted:tt,beforeUpdate:tt,updated:tt,beforeDestroy:tt,beforeUnmount:tt,destroyed:tt,unmounted:tt,activated:tt,deactivated:tt,errorCaptured:tt,serverPrefetch:tt,components:vr,directives:vr,watch:Cf,provide:ma,inject:Ef};function ma(e,t){return t?e?function(){return Ge(me(e)?e.call(this,this):e,me(t)?t.call(this,this):t)}:t:e}function Ef(e,t){return vr(qo(e),qo(t))}function qo(e){if(ae(e)){const t={};for(let s=0;s<e.length;s++)t[e[s]]=e[s];return t}return e}function tt(e,t){return e?[...new Set([].concat(e,t))]:t}function vr(e,t){return e?Ge(Object.create(null),e,t):t}function ga(e,t){return e?ae(e)&&ae(t)?[...new Set([...e,...t])]:Ge(Object.create(null),ha(e),ha(t??{})):t}function Cf(e,t){if(!e)return t;if(!t)return e;const s=Ge(Object.create(null),e);for(const r in t)s[r]=tt(e[r],t[r]);return s}function Ac(){return{app:null,config:{isNativeTag:gd,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Sf=0;function Tf(e,t){return function(r,n=null){me(r)||(r=Ge({},r)),n!=null&&!je(n)&&(n=null);const o=Ac(),i=new WeakSet,a=[];let l=!1;const d=o.app={_uid:Sf++,_component:r,_props:n,_container:null,_context:o,_instance:null,version:ch,get config(){return o.config},set config(u){},use(u,...f){return i.has(u)||(u&&me(u.install)?(i.add(u),u.install(d,...f)):me(u)&&(i.add(u),u(d,...f))),d},mixin(u){return o.mixins.includes(u)||o.mixins.push(u),d},component(u,f){return f?(o.components[u]=f,d):o.components[u]},directive(u,f){return f?(o.directives[u]=f,d):o.directives[u]},mount(u,f,h){if(!l){const p=d._ceVNode||oe(r,n);return p.appContext=o,h===!0?h="svg":h===!1&&(h=void 0),e(p,u,h),l=!0,d._container=u,u.__vue_app__=d,Zn(p.component)}},onUnmount(u){a.push(u)},unmount(){l&&(Et(a,d._instance,16),e(null,d._container),delete d._container.__vue_app__)},provide(u,f){return o.provides[u]=f,d},runWithContext(u){const f=As;As=d;try{return u()}finally{As=f}}};return d}}let As=null;function ut(e,t){if(Qe){let s=Qe.provides;const r=Qe.parent&&Qe.parent.provides;r===s&&(s=Qe.provides=Object.create(r)),s[e]=t}}function Ne(e,t,s=!1){const r=Qe||We;if(r||As){const n=As?As._context.provides:r?r.parent==null?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:void 0;if(n&&e in n)return n[e];if(arguments.length>1)return s&&me(t)?t.call(r&&r.proxy):t}}function Pf(){return!!(Qe||We||As)}const Rc={},jc=()=>Object.create(Rc),Oc=e=>Object.getPrototypeOf(e)===Rc;function Af(e,t,s,r=!1){const n={},o=jc();e.propsDefaults=Object.create(null),Ic(e,t,n,o);for(const i in e.propsOptions[0])i in n||(n[i]=void 0);s?e.props=r?n:rc(n):e.type.props?e.props=n:e.props=o,e.attrs=o}function Rf(e,t,s,r){const{props:n,attrs:o,vnode:{patchFlag:i}}=e,a=$e(n),[l]=e.propsOptions;let d=!1;if((r||i>0)&&!(i&16)){if(i&8){const u=e.vnode.dynamicProps;for(let f=0;f<u.length;f++){let h=u[f];if(Qn(e.emitsOptions,h))continue;const p=t[h];if(l)if(Te(o,h))p!==o[h]&&(o[h]=p,d=!0);else{const x=_t(h);n[x]=Ko(l,a,x,p,e,!1)}else p!==o[h]&&(o[h]=p,d=!0)}}}else{Ic(e,t,n,o)&&(d=!0);let u;for(const f in a)(!t||!Te(t,f)&&((u=Ms(f))===f||!Te(t,u)))&&(l?s&&(s[f]!==void 0||s[u]!==void 0)&&(n[f]=Ko(l,a,f,void 0,e,!0)):delete n[f]);if(o!==a)for(const f in o)(!t||!Te(t,f))&&(delete o[f],d=!0)}d&&Vt(e.attrs,"set","")}function Ic(e,t,s,r){const[n,o]=e.propsOptions;let i=!1,a;if(t)for(let l in t){if(_r(l))continue;const d=t[l];let u;n&&Te(n,u=_t(l))?!o||!o.includes(u)?s[u]=d:(a||(a={}))[u]=d:Qn(e.emitsOptions,l)||(!(l in r)||d!==r[l])&&(r[l]=d,i=!0)}if(o){const l=$e(s),d=a||Re;for(let u=0;u<o.length;u++){const f=o[u];s[f]=Ko(n,l,f,d[f],e,!Te(d,f))}}return i}function Ko(e,t,s,r,n,o){const i=e[s];if(i!=null){const a=Te(i,"default");if(a&&r===void 0){const l=i.default;if(i.type!==Function&&!i.skipFactory&&me(l)){const{propsDefaults:d}=n;if(s in d)r=d[s];else{const u=Gr(n);r=d[s]=l.call(null,t),u()}}else r=l;n.ce&&n.ce._setProp(s,r)}i[0]&&(o&&!a?r=!1:i[1]&&(r===""||r===Ms(s))&&(r=!0))}return r}const jf=new WeakMap;function Mc(e,t,s=!1){const r=s?jf:t.propsCache,n=r.get(e);if(n)return n;const o=e.props,i={},a=[];let l=!1;if(!me(e)){const u=f=>{l=!0;const[h,p]=Mc(f,t,!0);Ge(i,h),p&&a.push(...p)};!s&&t.mixins.length&&t.mixins.forEach(u),e.extends&&u(e.extends),e.mixins&&e.mixins.forEach(u)}if(!o&&!l)return je(e)&&r.set(e,qs),qs;if(ae(o))for(let u=0;u<o.length;u++){const f=_t(o[u]);va(f)&&(i[f]=Re)}else if(o)for(const u in o){const f=_t(u);if(va(f)){const h=o[u],p=i[f]=ae(h)||me(h)?{type:h}:Ge({},h),x=p.type;let w=!1,S=!0;if(ae(x))for(let R=0;R<x.length;++R){const y=x[R],g=me(y)&&y.name;if(g==="Boolean"){w=!0;break}else g==="String"&&(S=!1)}else w=me(x)&&x.name==="Boolean";p[0]=w,p[1]=S,(w||Te(p,"default"))&&a.push(f)}}const d=[i,a];return je(e)&&r.set(e,d),d}function va(e){return e[0]!=="$"&&!_r(e)}const Ii=e=>e[0]==="_"||e==="$stable",Mi=e=>ae(e)?e.map(Mt):[Mt(e)],Of=(e,t,s)=>{if(t._n)return t;const r=ze((...n)=>Mi(t(...n)),s);return r._c=!1,r},Lc=(e,t,s)=>{const r=e._ctx;for(const n in e){if(Ii(n))continue;const o=e[n];if(me(o))t[n]=Of(n,o,r);else if(o!=null){const i=Mi(o);t[n]=()=>i}}},Dc=(e,t)=>{const s=Mi(t);e.slots.default=()=>s},Nc=(e,t,s)=>{for(const r in t)(s||!Ii(r))&&(e[r]=t[r])},If=(e,t,s)=>{const r=e.slots=jc();if(e.vnode.shapeFlag&32){const n=t._;n?(Nc(r,t,s),s&&Ll(r,"_",n,!0)):Lc(t,r)}else t&&Dc(e,t)},Mf=(e,t,s)=>{const{vnode:r,slots:n}=e;let o=!0,i=Re;if(r.shapeFlag&32){const a=t._;a?s&&a===1?o=!1:Nc(n,t,s):(o=!t.$stable,Lc(t,n)),i=t}else t&&(Dc(e,t),i={default:1});if(o)for(const a in n)!Ii(a)&&i[a]==null&&delete n[a]},st=Jf;function Lf(e){return Df(e)}function Df(e,t){const s=Vn();s.__VUE__=!0;const{insert:r,remove:n,patchProp:o,createElement:i,createText:a,createComment:l,setText:d,setElementText:u,parentNode:f,nextSibling:h,setScopeId:p=Lt,insertStaticContent:x}=e,w=(_,m,v,j=null,C=null,O=null,Q=void 0,Y=null,J=!!m.dynamicChildren)=>{if(_===m)return;_&&!Es(_,m)&&(j=P(_),de(_,C,O,!0),_=null),m.patchFlag===-2&&(J=!1,m.dynamicChildren=null);const{type:q,ref:ce,shapeFlag:ee}=m;switch(q){case Yn:S(_,m,v,j);break;case et:R(_,m,v,j);break;case bn:_==null&&y(m,v,j,Q);break;case fe:N(_,m,v,j,C,O,Q,Y,J);break;default:ee&1?D(_,m,v,j,C,O,Q,Y,J):ee&6?G(_,m,v,j,C,O,Q,Y,J):(ee&64||ee&128)&&q.process(_,m,v,j,C,O,Q,Y,J,ie)}ce!=null&&C&&An(ce,_&&_.ref,O,m||_,!m)},S=(_,m,v,j)=>{if(_==null)r(m.el=a(m.children),v,j);else{const C=m.el=_.el;m.children!==_.children&&d(C,m.children)}},R=(_,m,v,j)=>{_==null?r(m.el=l(m.children||""),v,j):m.el=_.el},y=(_,m,v,j)=>{[_.el,_.anchor]=x(_.children,m,v,j,_.el,_.anchor)},g=({el:_,anchor:m},v,j)=>{let C;for(;_&&_!==m;)C=h(_),r(_,v,j),_=C;r(m,v,j)},$=({el:_,anchor:m})=>{let v;for(;_&&_!==m;)v=h(_),n(_),_=v;n(m)},D=(_,m,v,j,C,O,Q,Y,J)=>{m.type==="svg"?Q="svg":m.type==="math"&&(Q="mathml"),_==null?se(m,v,j,C,O,Q,Y,J):A(_,m,C,O,Q,Y,J)},se=(_,m,v,j,C,O,Q,Y)=>{let J,q;const{props:ce,shapeFlag:ee,transition:le,dirs:pe}=_;if(J=_.el=i(_.type,O,ce&&ce.is,ce),ee&8?u(J,_.children):ee&16&&L(_.children,J,null,j,C,xo(_,O),Q,Y),pe&&ys(_,null,j,"created"),W(J,_,_.scopeId,Q,j),ce){for(const Ie in ce)Ie!=="value"&&!_r(Ie)&&o(J,Ie,null,ce[Ie],O,j);"value"in ce&&o(J,"value",null,ce.value,O),(q=ce.onVnodeBeforeMount)&&Rt(q,j,_)}pe&&ys(_,null,j,"beforeMount");const ke=Nf(C,le);ke&&le.beforeEnter(J),r(J,m,v),((q=ce&&ce.onVnodeMounted)||ke||pe)&&st(()=>{q&&Rt(q,j,_),ke&&le.enter(J),pe&&ys(_,null,j,"mounted")},C)},W=(_,m,v,j,C)=>{if(v&&p(_,v),j)for(let O=0;O<j.length;O++)p(_,j[O]);if(C){let O=C.subTree;if(m===O||zc(O.type)&&(O.ssContent===m||O.ssFallback===m)){const Q=C.vnode;W(_,Q,Q.scopeId,Q.slotScopeIds,C.parent)}}},L=(_,m,v,j,C,O,Q,Y,J=0)=>{for(let q=J;q<_.length;q++){const ce=_[q]=Y?os(_[q]):Mt(_[q]);w(null,ce,m,v,j,C,O,Q,Y)}},A=(_,m,v,j,C,O,Q)=>{const Y=m.el=_.el;let{patchFlag:J,dynamicChildren:q,dirs:ce}=m;J|=_.patchFlag&16;const ee=_.props||Re,le=m.props||Re;let pe;if(v&&bs(v,!1),(pe=le.onVnodeBeforeUpdate)&&Rt(pe,v,m,_),ce&&ys(m,_,v,"beforeUpdate"),v&&bs(v,!0),(ee.innerHTML&&le.innerHTML==null||ee.textContent&&le.textContent==null)&&u(Y,""),q?T(_.dynamicChildren,q,Y,v,j,xo(m,C),O):Q||H(_,m,Y,null,v,j,xo(m,C),O,!1),J>0){if(J&16)I(Y,ee,le,v,C);else if(J&2&&ee.class!==le.class&&o(Y,"class",null,le.class,C),J&4&&o(Y,"style",ee.style,le.style,C),J&8){const ke=m.dynamicProps;for(let Ie=0;Ie<ke.length;Ie++){const Ae=ke[Ie],dt=ee[Ae],at=le[Ae];(at!==dt||Ae==="value")&&o(Y,Ae,dt,at,C,v)}}J&1&&_.children!==m.children&&u(Y,m.children)}else!Q&&q==null&&I(Y,ee,le,v,C);((pe=le.onVnodeUpdated)||ce)&&st(()=>{pe&&Rt(pe,v,m,_),ce&&ys(m,_,v,"updated")},j)},T=(_,m,v,j,C,O,Q)=>{for(let Y=0;Y<m.length;Y++){const J=_[Y],q=m[Y],ce=J.el&&(J.type===fe||!Es(J,q)||J.shapeFlag&70)?f(J.el):v;w(J,q,ce,null,j,C,O,Q,!0)}},I=(_,m,v,j,C)=>{if(m!==v){if(m!==Re)for(const O in m)!_r(O)&&!(O in v)&&o(_,O,m[O],null,C,j);for(const O in v){if(_r(O))continue;const Q=v[O],Y=m[O];Q!==Y&&O!=="value"&&o(_,O,Y,Q,C,j)}"value"in v&&o(_,"value",m.value,v.value,C)}},N=(_,m,v,j,C,O,Q,Y,J)=>{const q=m.el=_?_.el:a(""),ce=m.anchor=_?_.anchor:a("");let{patchFlag:ee,dynamicChildren:le,slotScopeIds:pe}=m;pe&&(Y=Y?Y.concat(pe):pe),_==null?(r(q,v,j),r(ce,v,j),L(m.children||[],v,ce,C,O,Q,Y,J)):ee>0&&ee&64&&le&&_.dynamicChildren?(T(_.dynamicChildren,le,v,C,O,Q,Y),(m.key!=null||C&&m===C.subTree)&&Li(_,m,!0)):H(_,m,v,ce,C,O,Q,Y,J)},G=(_,m,v,j,C,O,Q,Y,J)=>{m.slotScopeIds=Y,_==null?m.shapeFlag&512?C.ctx.activate(m,v,j,Q,J):re(m,v,j,C,O,Q,J):we(_,m,J)},re=(_,m,v,j,C,O,Q)=>{const Y=_.component=sh(_,j,C);if(Wn(_)&&(Y.ctx.renderer=ie),rh(Y,!1,Q),Y.asyncDep){if(C&&C.registerDep(Y,he,Q),!_.el){const J=Y.subTree=oe(et);R(null,J,m,v)}}else he(Y,_,m,v,C,O,Q)},we=(_,m,v)=>{const j=m.component=_.component;if(Wf(_,m,v))if(j.asyncDep&&!j.asyncResolved){M(j,m,v);return}else j.next=m,j.update();else m.el=_.el,j.vnode=m},he=(_,m,v,j,C,O,Q)=>{const Y=()=>{if(_.isMounted){let{next:ee,bu:le,u:pe,parent:ke,vnode:Ie}=_;{const Pt=Fc(_);if(Pt){ee&&(ee.el=Ie.el,M(_,ee,Q)),Pt.asyncDep.then(()=>{_.isUnmounted||Y()});return}}let Ae=ee,dt;bs(_,!1),ee?(ee.el=Ie.el,M(_,ee,Q)):ee=Ie,le&&vn(le),(dt=ee.props&&ee.props.onVnodeBeforeUpdate)&&Rt(dt,ke,ee,Ie),bs(_,!0);const at=ba(_),Tt=_.subTree;_.subTree=at,w(Tt,at,f(Tt.el),P(Tt),_,C,O),ee.el=at.el,Ae===null&&Gf(_,at.el),pe&&st(pe,C),(dt=ee.props&&ee.props.onVnodeUpdated)&&st(()=>Rt(dt,ke,ee,Ie),C)}else{let ee;const{el:le,props:pe}=m,{bm:ke,m:Ie,parent:Ae,root:dt,type:at}=_,Tt=Gs(m);bs(_,!1),ke&&vn(ke),!Tt&&(ee=pe&&pe.onVnodeBeforeMount)&&Rt(ee,Ae,m),bs(_,!0);{dt.ce&&dt.ce._injectChildStyle(at);const Pt=_.subTree=ba(_);w(null,Pt,v,j,_,C,O),m.el=Pt.el}if(Ie&&st(Ie,C),!Tt&&(ee=pe&&pe.onVnodeMounted)){const Pt=m;st(()=>Rt(ee,Ae,Pt),C)}(m.shapeFlag&256||Ae&&Gs(Ae.vnode)&&Ae.vnode.shapeFlag&256)&&_.a&&st(_.a,C),_.isMounted=!0,m=v=j=null}};_.scope.on();const J=_.effect=new Vl(Y);_.scope.off();const q=_.update=J.run.bind(J),ce=_.job=J.runIfDirty.bind(J);ce.i=_,ce.id=_.uid,J.scheduler=()=>Ri(ce),bs(_,!0),q()},M=(_,m,v)=>{m.component=_;const j=_.vnode.props;_.vnode=m,_.next=null,Rf(_,m.props,j,v),Mf(_,m.children,v),Kt(),ia(_),Wt()},H=(_,m,v,j,C,O,Q,Y,J=!1)=>{const q=_&&_.children,ce=_?_.shapeFlag:0,ee=m.children,{patchFlag:le,shapeFlag:pe}=m;if(le>0){if(le&128){be(q,ee,v,j,C,O,Q,Y,J);return}else if(le&256){ne(q,ee,v,j,C,O,Q,Y,J);return}}pe&8?(ce&16&&K(q,C,O),ee!==q&&u(v,ee)):ce&16?pe&16?be(q,ee,v,j,C,O,Q,Y,J):K(q,C,O,!0):(ce&8&&u(v,""),pe&16&&L(ee,v,j,C,O,Q,Y,J))},ne=(_,m,v,j,C,O,Q,Y,J)=>{_=_||qs,m=m||qs;const q=_.length,ce=m.length,ee=Math.min(q,ce);let le;for(le=0;le<ee;le++){const pe=m[le]=J?os(m[le]):Mt(m[le]);w(_[le],pe,v,null,C,O,Q,Y,J)}q>ce?K(_,C,O,!0,!1,ee):L(m,v,j,C,O,Q,Y,J,ee)},be=(_,m,v,j,C,O,Q,Y,J)=>{let q=0;const ce=m.length;let ee=_.length-1,le=ce-1;for(;q<=ee&&q<=le;){const pe=_[q],ke=m[q]=J?os(m[q]):Mt(m[q]);if(Es(pe,ke))w(pe,ke,v,null,C,O,Q,Y,J);else break;q++}for(;q<=ee&&q<=le;){const pe=_[ee],ke=m[le]=J?os(m[le]):Mt(m[le]);if(Es(pe,ke))w(pe,ke,v,null,C,O,Q,Y,J);else break;ee--,le--}if(q>ee){if(q<=le){const pe=le+1,ke=pe<ce?m[pe].el:j;for(;q<=le;)w(null,m[q]=J?os(m[q]):Mt(m[q]),v,ke,C,O,Q,Y,J),q++}}else if(q>le)for(;q<=ee;)de(_[q],C,O,!0),q++;else{const pe=q,ke=q,Ie=new Map;for(q=ke;q<=le;q++){const ft=m[q]=J?os(m[q]):Mt(m[q]);ft.key!=null&&Ie.set(ft.key,q)}let Ae,dt=0;const at=le-ke+1;let Tt=!1,Pt=0;const cr=new Array(at);for(q=0;q<at;q++)cr[q]=0;for(q=pe;q<=ee;q++){const ft=_[q];if(dt>=at){de(ft,C,O,!0);continue}let At;if(ft.key!=null)At=Ie.get(ft.key);else for(Ae=ke;Ae<=le;Ae++)if(cr[Ae-ke]===0&&Es(ft,m[Ae])){At=Ae;break}At===void 0?de(ft,C,O,!0):(cr[At-ke]=q+1,At>=Pt?Pt=At:Tt=!0,w(ft,m[At],v,null,C,O,Q,Y,J),dt++)}const Zi=Tt?Ff(cr):qs;for(Ae=Zi.length-1,q=at-1;q>=0;q--){const ft=ke+q,At=m[ft],ea=ft+1<ce?m[ft+1].el:j;cr[q]===0?w(null,At,v,ea,C,O,Q,Y,J):Tt&&(Ae<0||q!==Zi[Ae]?ue(At,v,ea,2):Ae--)}}},ue=(_,m,v,j,C=null)=>{const{el:O,type:Q,transition:Y,children:J,shapeFlag:q}=_;if(q&6){ue(_.component.subTree,m,v,j);return}if(q&128){_.suspense.move(m,v,j);return}if(q&64){Q.move(_,m,v,ie);return}if(Q===fe){r(O,m,v);for(let ee=0;ee<J.length;ee++)ue(J[ee],m,v,j);r(_.anchor,m,v);return}if(Q===bn){g(_,m,v);return}if(j!==2&&q&1&&Y)if(j===0)Y.beforeEnter(O),r(O,m,v),st(()=>Y.enter(O),C);else{const{leave:ee,delayLeave:le,afterLeave:pe}=Y,ke=()=>{_.ctx.isUnmounted?n(O):r(O,m,v)},Ie=()=>{ee(O,()=>{ke(),pe&&pe()})};le?le(O,ke,Ie):Ie()}else r(O,m,v)},de=(_,m,v,j=!1,C=!1)=>{const{type:O,props:Q,ref:Y,children:J,dynamicChildren:q,shapeFlag:ce,patchFlag:ee,dirs:le,cacheIndex:pe}=_;if(ee===-2&&(C=!1),Y!=null&&(Kt(),An(Y,null,v,_,!0),Wt()),pe!=null&&(m.renderCache[pe]=void 0),ce&256){m.ctx.deactivate(_);return}const ke=ce&1&&le,Ie=!Gs(_);let Ae;if(Ie&&(Ae=Q&&Q.onVnodeBeforeUnmount)&&Rt(Ae,m,_),ce&6)z(_.component,v,j);else{if(ce&128){_.suspense.unmount(v,j);return}ke&&ys(_,null,m,"beforeUnmount"),ce&64?_.type.remove(_,m,v,ie,j):q&&!q.hasOnce&&(O!==fe||ee>0&&ee&64)?K(q,m,v,!1,!0):(O===fe&&ee&384||!C&&ce&16)&&K(J,m,v),j&&Oe(_)}(Ie&&(Ae=Q&&Q.onVnodeUnmounted)||ke)&&st(()=>{Ae&&Rt(Ae,m,_),ke&&ys(_,null,m,"unmounted")},v)},Oe=_=>{const{type:m,el:v,anchor:j,transition:C}=_;if(m===fe){te(v,j);return}if(m===bn){$(_);return}const O=()=>{n(v),C&&!C.persisted&&C.afterLeave&&C.afterLeave()};if(_.shapeFlag&1&&C&&!C.persisted){const{leave:Q,delayLeave:Y}=C,J=()=>Q(v,O);Y?Y(_.el,O,J):J()}else O()},te=(_,m)=>{let v;for(;_!==m;)v=h(_),n(_),_=v;n(m)},z=(_,m,v)=>{const{bum:j,scope:C,job:O,subTree:Q,um:Y,m:J,a:q,parent:ce,slots:{__:ee}}=_;ya(J),ya(q),j&&vn(j),ce&&ae(ee)&&ee.forEach(le=>{ce.renderCache[le]=void 0}),C.stop(),O&&(O.flags|=8,de(Q,_,m,v)),Y&&st(Y,m),st(()=>{_.isUnmounted=!0},m),m&&m.pendingBranch&&!m.isUnmounted&&_.asyncDep&&!_.asyncResolved&&_.suspenseId===m.pendingId&&(m.deps--,m.deps===0&&m.resolve())},K=(_,m,v,j=!1,C=!1,O=0)=>{for(let Q=O;Q<_.length;Q++)de(_[Q],m,v,j,C)},P=_=>{if(_.shapeFlag&6)return P(_.component.subTree);if(_.shapeFlag&128)return _.suspense.next();const m=h(_.anchor||_.el),v=m&&m[fc];return v?h(v):m};let X=!1;const Z=(_,m,v)=>{_==null?m._vnode&&de(m._vnode,null,null,!0):w(m._vnode||null,_,m,null,null,null,v),m._vnode=_,X||(X=!0,ia(),cc(),X=!1)},ie={p:w,um:de,m:ue,r:Oe,mt:re,mc:L,pc:H,pbc:T,n:P,o:e};return{render:Z,hydrate:void 0,createApp:Tf(Z)}}function xo({type:e,props:t},s){return s==="svg"&&e==="foreignObject"||s==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:s}function bs({effect:e,job:t},s){s?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function Nf(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function Li(e,t,s=!1){const r=e.children,n=t.children;if(ae(r)&&ae(n))for(let o=0;o<r.length;o++){const i=r[o];let a=n[o];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=n[o]=os(n[o]),a.el=i.el),!s&&a.patchFlag!==-2&&Li(i,a)),a.type===Yn&&(a.el=i.el),a.type===et&&!a.el&&(a.el=i.el)}}function Ff(e){const t=e.slice(),s=[0];let r,n,o,i,a;const l=e.length;for(r=0;r<l;r++){const d=e[r];if(d!==0){if(n=s[s.length-1],e[n]<d){t[r]=n,s.push(r);continue}for(o=0,i=s.length-1;o<i;)a=o+i>>1,e[s[a]]<d?o=a+1:i=a;d<e[s[o]]&&(o>0&&(t[r]=s[o-1]),s[o]=r)}}for(o=s.length,i=s[o-1];o-- >0;)s[o]=i,i=t[i];return s}function Fc(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:Fc(t)}function ya(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}const Uf=Symbol.for("v-scx"),Bf=()=>Ne(Uf);function Ct(e,t){return Di(e,null,t)}function ot(e,t,s){return Di(e,t,s)}function Di(e,t,s=Re){const{immediate:r,deep:n,flush:o,once:i}=s,a=Ge({},s),l=t&&r||!t&&o!=="post";let d;if(Ur){if(o==="sync"){const p=Bf();d=p.__watcherHandles||(p.__watcherHandles=[])}else if(!l){const p=()=>{};return p.stop=Lt,p.resume=Lt,p.pause=Lt,p}}const u=Qe;a.call=(p,x,w)=>Et(p,u,x,w);let f=!1;o==="post"?a.scheduler=p=>{st(p,u&&u.suspense)}:o!=="sync"&&(f=!0,a.scheduler=(p,x)=>{x?p():Ri(p)}),a.augmentJob=p=>{t&&(p.flags|=4),f&&(p.flags|=2,u&&(p.id=u.uid,p.i=u))};const h=rf(e,t,a);return Ur&&(d?d.push(h):l&&h()),h}function zf(e,t,s){const r=this.proxy,n=Fe(e)?e.includes(".")?Uc(r,e):()=>r[e]:e.bind(r,r);let o;me(t)?o=t:(o=t.handler,s=t);const i=Gr(this),a=Di(n,o.bind(r),s);return i(),a}function Uc(e,t){const s=t.split(".");return()=>{let r=e;for(let n=0;n<s.length&&r;n++)r=r[s[n]];return r}}const Vf=(e,t)=>t==="modelValue"||t==="model-value"?e.modelModifiers:e[`${t}Modifiers`]||e[`${_t(t)}Modifiers`]||e[`${Ms(t)}Modifiers`];function Hf(e,t,...s){if(e.isUnmounted)return;const r=e.vnode.props||Re;let n=s;const o=t.startsWith("update:"),i=o&&Vf(r,t.slice(7));i&&(i.trim&&(n=s.map(u=>Fe(u)?u.trim():u)),i.number&&(n=s.map($n)));let a,l=r[a=mo(t)]||r[a=mo(_t(t))];!l&&o&&(l=r[a=mo(Ms(t))]),l&&Et(l,e,6,n);const d=r[a+"Once"];if(d){if(!e.emitted)e.emitted={};else if(e.emitted[a])return;e.emitted[a]=!0,Et(d,e,6,n)}}function Bc(e,t,s=!1){const r=t.emitsCache,n=r.get(e);if(n!==void 0)return n;const o=e.emits;let i={},a=!1;if(!me(e)){const l=d=>{const u=Bc(d,t,!0);u&&(a=!0,Ge(i,u))};!s&&t.mixins.length&&t.mixins.forEach(l),e.extends&&l(e.extends),e.mixins&&e.mixins.forEach(l)}return!o&&!a?(je(e)&&r.set(e,null),null):(ae(o)?o.forEach(l=>i[l]=null):Ge(i,o),je(e)&&r.set(e,i),i)}function Qn(e,t){return!e||!Un(t)?!1:(t=t.slice(2).replace(/Once$/,""),Te(e,t[0].toLowerCase()+t.slice(1))||Te(e,Ms(t))||Te(e,t))}function ba(e){const{type:t,vnode:s,proxy:r,withProxy:n,propsOptions:[o],slots:i,attrs:a,emit:l,render:d,renderCache:u,props:f,data:h,setupState:p,ctx:x,inheritAttrs:w}=e,S=Pn(e);let R,y;try{if(s.shapeFlag&4){const $=n||r,D=$;R=Mt(d.call(D,$,u,f,p,h,x)),y=a}else{const $=t;R=Mt($.length>1?$(f,{attrs:a,slots:i,emit:l}):$(f,null)),y=t.props?a:qf(a)}}catch($){Er.length=0,qn($,e,1),R=oe(et)}let g=R;if(y&&w!==!1){const $=Object.keys(y),{shapeFlag:D}=g;$.length&&D&7&&(o&&$.some(bi)&&(y=Kf(y,o)),g=Gt(g,y,!1,!0))}return s.dirs&&(g=Gt(g,null,!1,!0),g.dirs=g.dirs?g.dirs.concat(s.dirs):s.dirs),s.transition&&Os(g,s.transition),R=g,Pn(S),R}const qf=e=>{let t;for(const s in e)(s==="class"||s==="style"||Un(s))&&((t||(t={}))[s]=e[s]);return t},Kf=(e,t)=>{const s={};for(const r in e)(!bi(r)||!(r.slice(9)in t))&&(s[r]=e[r]);return s};function Wf(e,t,s){const{props:r,children:n,component:o}=e,{props:i,children:a,patchFlag:l}=t,d=o.emitsOptions;if(t.dirs||t.transition)return!0;if(s&&l>=0){if(l&1024)return!0;if(l&16)return r?_a(r,i,d):!!i;if(l&8){const u=t.dynamicProps;for(let f=0;f<u.length;f++){const h=u[f];if(i[h]!==r[h]&&!Qn(d,h))return!0}}}else return(n||a)&&(!a||!a.$stable)?!0:r===i?!1:r?i?_a(r,i,d):!0:!!i;return!1}function _a(e,t,s){const r=Object.keys(t);if(r.length!==Object.keys(e).length)return!0;for(let n=0;n<r.length;n++){const o=r[n];if(t[o]!==e[o]&&!Qn(s,o))return!0}return!1}function Gf({vnode:e,parent:t},s){for(;t;){const r=t.subTree;if(r.suspense&&r.suspense.activeBranch===e&&(r.el=e.el),r===e)(e=t.vnode).el=s,t=t.parent;else break}}const zc=e=>e.__isSuspense;function Jf(e,t){t&&t.pendingBranch?ae(e)?t.effects.push(...e):t.effects.push(e):af(e)}const fe=Symbol.for("v-fgt"),Yn=Symbol.for("v-txt"),et=Symbol.for("v-cmt"),bn=Symbol.for("v-stc"),Er=[];let gt=null;function b(e=!1){Er.push(gt=e?null:[])}function Qf(){Er.pop(),gt=Er[Er.length-1]||null}let Dr=1;function wa(e,t=!1){Dr+=e,e<0&&gt&&t&&(gt.hasOnce=!0)}function Vc(e){return e.dynamicChildren=Dr>0?gt||qs:null,Qf(),Dr>0&&gt&&gt.push(e),e}function k(e,t,s,r,n,o){return Vc(c(e,t,s,r,n,o,!0))}function De(e,t,s,r,n){return Vc(oe(e,t,s,r,n,!0))}function Nr(e){return e?e.__v_isVNode===!0:!1}function Es(e,t){return e.type===t.type&&e.key===t.key}const Hc=({key:e})=>e??null,_n=({ref:e,ref_key:t,ref_for:s})=>(typeof e=="number"&&(e=""+e),e!=null?Fe(e)||Ve(e)||me(e)?{i:We,r:e,k:t,f:!!s}:e:null);function c(e,t=null,s=null,r=0,n=null,o=e===fe?0:1,i=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&Hc(t),ref:t&&_n(t),scopeId:dc,slotScopeIds:null,children:s,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:o,patchFlag:r,dynamicProps:n,dynamicChildren:null,appContext:null,ctx:We};return a?(Ni(l,s),o&128&&e.normalize(l)):s&&(l.shapeFlag|=Fe(s)?8:16),Dr>0&&!i&&gt&&(l.patchFlag>0||o&6)&&l.patchFlag!==32&&gt.push(l),l}const oe=Yf;function Yf(e,t=null,s=null,r=0,n=null,o=!1){if((!e||e===Ec)&&(e=et),Nr(e)){const a=Gt(e,t,!0);return s&&Ni(a,s),Dr>0&&!o&&gt&&(a.shapeFlag&6?gt[gt.indexOf(e)]=a:gt.push(a)),a.patchFlag=-2,a}if(lh(e)&&(e=e.__vccOpts),t){t=Xf(t);let{class:a,style:l}=t;a&&!Fe(a)&&(t.class=ye(a)),je(l)&&(Pi(l)&&!ae(l)&&(l=Ge({},l)),t.style=ps(l))}const i=Fe(e)?1:zc(e)?128:hc(e)?64:je(e)?4:me(e)?2:0;return c(e,t,s,r,n,i,o,!0)}function Xf(e){return e?Pi(e)||Oc(e)?Ge({},e):e:null}function Gt(e,t,s=!1,r=!1){const{props:n,ref:o,patchFlag:i,children:a,transition:l}=e,d=t?Zf(n||{},t):n,u={__v_isVNode:!0,__v_skip:!0,type:e.type,props:d,key:d&&Hc(d),ref:t&&t.ref?s&&o?ae(o)?o.concat(_n(t)):[o,_n(t)]:_n(t):o,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:a,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==fe?i===-1?16:i|16:i,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:l,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&Gt(e.ssContent),ssFallback:e.ssFallback&&Gt(e.ssFallback),el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return l&&r&&Os(u,l.clone(u)),u}function xe(e=" ",t=0){return oe(Yn,null,e,t)}function Fr(e,t){const s=oe(bn,null,e);return s.staticCount=t,s}function F(e="",t=!1){return t?(b(),De(et,null,e)):oe(et,null,e)}function Mt(e){return e==null||typeof e=="boolean"?oe(et):ae(e)?oe(fe,null,e.slice()):Nr(e)?os(e):oe(Yn,null,String(e))}function os(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:Gt(e)}function Ni(e,t){let s=0;const{shapeFlag:r}=e;if(t==null)t=null;else if(ae(t))s=16;else if(typeof t=="object")if(r&65){const n=t.default;n&&(n._c&&(n._d=!1),Ni(e,n()),n._c&&(n._d=!0));return}else{s=32;const n=t._;!n&&!Oc(t)?t._ctx=We:n===3&&We&&(We.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else me(t)?(t={default:t,_ctx:We},s=32):(t=String(t),r&64?(s=16,t=[xe(t)]):s=8);e.children=t,e.shapeFlag|=s}function Zf(...e){const t={};for(let s=0;s<e.length;s++){const r=e[s];for(const n in r)if(n==="class")t.class!==r.class&&(t.class=ye([t.class,r.class]));else if(n==="style")t.style=ps([t.style,r.style]);else if(Un(n)){const o=t[n],i=r[n];i&&o!==i&&!(ae(o)&&o.includes(i))&&(t[n]=o?[].concat(o,i):i)}else n!==""&&(t[n]=r[n])}return t}function Rt(e,t,s,r=null){Et(e,t,7,[s,r])}const eh=Ac();let th=0;function sh(e,t,s){const r=e.type,n=(t?t.appContext:e.appContext)||eh,o={uid:th++,vnode:e,type:r,parent:t,appContext:n,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new Ul(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(n.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Mc(r,n),emitsOptions:Bc(r,n),emit:null,emitted:null,propsDefaults:Re,inheritAttrs:r.inheritAttrs,ctx:Re,data:Re,props:Re,attrs:Re,slots:Re,refs:Re,setupState:Re,setupContext:null,suspense:s,suspenseId:s?s.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return o.ctx={_:o},o.root=t?t.root:o,o.emit=Hf.bind(null,o),e.ce&&e.ce(o),o}let Qe=null;const Xn=()=>Qe||We;let jn,Wo;{const e=Vn(),t=(s,r)=>{let n;return(n=e[s])||(n=e[s]=[]),n.push(r),o=>{n.length>1?n.forEach(i=>i(o)):n[0](o)}};jn=t("__VUE_INSTANCE_SETTERS__",s=>Qe=s),Wo=t("__VUE_SSR_SETTERS__",s=>Ur=s)}const Gr=e=>{const t=Qe;return jn(e),e.scope.on(),()=>{e.scope.off(),jn(t)}},xa=()=>{Qe&&Qe.scope.off(),jn(null)};function qc(e){return e.vnode.shapeFlag&4}let Ur=!1;function rh(e,t=!1,s=!1){t&&Wo(t);const{props:r,children:n}=e.vnode,o=qc(e);Af(e,r,o,t),If(e,n,s||t);const i=o?nh(e,t):void 0;return t&&Wo(!1),i}function nh(e,t){const s=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,wf);const{setup:r}=s;if(r){Kt();const n=e.setupContext=r.length>1?ih(e):null,o=Gr(e),i=Kr(r,e,0,[e.props,n]),a=Ol(i);if(Wt(),o(),(a||e.sp)&&!Gs(e)&&wc(e),a){if(i.then(xa,xa),t)return i.then(l=>{ka(e,l)}).catch(l=>{qn(l,e,0)});e.asyncDep=i}else ka(e,i)}else Kc(e)}function ka(e,t,s){me(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:je(t)&&(e.setupState=ic(t)),Kc(e)}function Kc(e,t,s){const r=e.type;e.render||(e.render=r.render||Lt);{const n=Gr(e);Kt();try{xf(e)}finally{Wt(),n()}}}const oh={get(e,t){return Ze(e,"get",""),e[t]}};function ih(e){const t=s=>{e.exposed=s||{}};return{attrs:new Proxy(e.attrs,oh),slots:e.slots,emit:e.emit,expose:t}}function Zn(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(ic(Ai(e.exposed)),{get(t,s){if(s in t)return t[s];if(s in $r)return $r[s](e)},has(t,s){return s in t||s in $r}})):e.proxy}function ah(e,t=!0){return me(e)?e.displayName||e.name:e.name||t&&e.__name}function lh(e){return me(e)&&"__vccOpts"in e}const V=(e,t)=>tf(e,t,Ur);function He(e,t,s){const r=arguments.length;return r===2?je(t)&&!ae(t)?Nr(t)?oe(e,null,[t]):oe(e,t):oe(e,null,t):(r>3?s=Array.prototype.slice.call(arguments,2):r===3&&Nr(s)&&(s=[s]),oe(e,t,s))}const ch="3.5.14";/**
* @vue/runtime-dom v3.5.14
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Go;const $a=typeof window<"u"&&window.trustedTypes;if($a)try{Go=$a.createPolicy("vue",{createHTML:e=>e})}catch{}const Wc=Go?e=>Go.createHTML(e):e=>e,uh="http://www.w3.org/2000/svg",dh="http://www.w3.org/1998/Math/MathML",Bt=typeof document<"u"?document:null,Ea=Bt&&Bt.createElement("template"),fh={insert:(e,t,s)=>{t.insertBefore(e,s||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,s,r)=>{const n=t==="svg"?Bt.createElementNS(uh,e):t==="mathml"?Bt.createElementNS(dh,e):s?Bt.createElement(e,{is:s}):Bt.createElement(e);return e==="select"&&r&&r.multiple!=null&&n.setAttribute("multiple",r.multiple),n},createText:e=>Bt.createTextNode(e),createComment:e=>Bt.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>Bt.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,s,r,n,o){const i=s?s.previousSibling:t.lastChild;if(n&&(n===o||n.nextSibling))for(;t.insertBefore(n.cloneNode(!0),s),!(n===o||!(n=n.nextSibling)););else{Ea.innerHTML=Wc(r==="svg"?`<svg>${e}</svg>`:r==="mathml"?`<math>${e}</math>`:e);const a=Ea.content;if(r==="svg"||r==="mathml"){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}t.insertBefore(a,s)}return[i?i.nextSibling:t.firstChild,s?s.previousSibling:t.lastChild]}},Yt="transition",dr="animation",Ys=Symbol("_vtc"),Gc={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},Jc=Ge({},vc,Gc),hh=e=>(e.displayName="Transition",e.props=Jc,e),Ca=hh((e,{slots:t})=>He(uf,Qc(e),t)),_s=(e,t=[])=>{ae(e)?e.forEach(s=>s(...t)):e&&e(...t)},Sa=e=>e?ae(e)?e.some(t=>t.length>1):e.length>1:!1;function Qc(e){const t={};for(const N in e)N in Gc||(t[N]=e[N]);if(e.css===!1)return t;const{name:s="v",type:r,duration:n,enterFromClass:o=`${s}-enter-from`,enterActiveClass:i=`${s}-enter-active`,enterToClass:a=`${s}-enter-to`,appearFromClass:l=o,appearActiveClass:d=i,appearToClass:u=a,leaveFromClass:f=`${s}-leave-from`,leaveActiveClass:h=`${s}-leave-active`,leaveToClass:p=`${s}-leave-to`}=e,x=ph(n),w=x&&x[0],S=x&&x[1],{onBeforeEnter:R,onEnter:y,onEnterCancelled:g,onLeave:$,onLeaveCancelled:D,onBeforeAppear:se=R,onAppear:W=y,onAppearCancelled:L=g}=t,A=(N,G,re,we)=>{N._enterCancelled=we,Zt(N,G?u:a),Zt(N,G?d:i),re&&re()},T=(N,G)=>{N._isLeaving=!1,Zt(N,f),Zt(N,p),Zt(N,h),G&&G()},I=N=>(G,re)=>{const we=N?W:y,he=()=>A(G,N,re);_s(we,[G,he]),Ta(()=>{Zt(G,N?l:o),jt(G,N?u:a),Sa(we)||Pa(G,r,w,he)})};return Ge(t,{onBeforeEnter(N){_s(R,[N]),jt(N,o),jt(N,i)},onBeforeAppear(N){_s(se,[N]),jt(N,l),jt(N,d)},onEnter:I(!1),onAppear:I(!0),onLeave(N,G){N._isLeaving=!0;const re=()=>T(N,G);jt(N,f),N._enterCancelled?(jt(N,h),Jo()):(Jo(),jt(N,h)),Ta(()=>{N._isLeaving&&(Zt(N,f),jt(N,p),Sa($)||Pa(N,r,S,re))}),_s($,[N,re])},onEnterCancelled(N){A(N,!1,void 0,!0),_s(g,[N])},onAppearCancelled(N){A(N,!0,void 0,!0),_s(L,[N])},onLeaveCancelled(N){T(N),_s(D,[N])}})}function ph(e){if(e==null)return null;if(je(e))return[ko(e.enter),ko(e.leave)];{const t=ko(e);return[t,t]}}function ko(e){return wd(e)}function jt(e,t){t.split(/\s+/).forEach(s=>s&&e.classList.add(s)),(e[Ys]||(e[Ys]=new Set)).add(t)}function Zt(e,t){t.split(/\s+/).forEach(r=>r&&e.classList.remove(r));const s=e[Ys];s&&(s.delete(t),s.size||(e[Ys]=void 0))}function Ta(e){requestAnimationFrame(()=>{requestAnimationFrame(e)})}let mh=0;function Pa(e,t,s,r){const n=e._endId=++mh,o=()=>{n===e._endId&&r()};if(s!=null)return setTimeout(o,s);const{type:i,timeout:a,propCount:l}=Yc(e,t);if(!i)return r();const d=i+"end";let u=0;const f=()=>{e.removeEventListener(d,h),o()},h=p=>{p.target===e&&++u>=l&&f()};setTimeout(()=>{u<l&&f()},a+1),e.addEventListener(d,h)}function Yc(e,t){const s=window.getComputedStyle(e),r=x=>(s[x]||"").split(", "),n=r(`${Yt}Delay`),o=r(`${Yt}Duration`),i=Aa(n,o),a=r(`${dr}Delay`),l=r(`${dr}Duration`),d=Aa(a,l);let u=null,f=0,h=0;t===Yt?i>0&&(u=Yt,f=i,h=o.length):t===dr?d>0&&(u=dr,f=d,h=l.length):(f=Math.max(i,d),u=f>0?i>d?Yt:dr:null,h=u?u===Yt?o.length:l.length:0);const p=u===Yt&&/\b(transform|all)(,|$)/.test(r(`${Yt}Property`).toString());return{type:u,timeout:f,propCount:h,hasTransform:p}}function Aa(e,t){for(;e.length<t.length;)e=e.concat(e);return Math.max(...t.map((s,r)=>Ra(s)+Ra(e[r])))}function Ra(e){return e==="auto"?0:Number(e.slice(0,-1).replace(",","."))*1e3}function Jo(){return document.body.offsetHeight}function gh(e,t,s){const r=e[Ys];r&&(t=(t?[t,...r]:[...r]).join(" ")),t==null?e.removeAttribute("class"):s?e.setAttribute("class",t):e.className=t}const ja=Symbol("_vod"),vh=Symbol("_vsh"),yh=Symbol(""),bh=/(^|;)\s*display\s*:/;function _h(e,t,s){const r=e.style,n=Fe(s);let o=!1;if(s&&!n){if(t)if(Fe(t))for(const i of t.split(";")){const a=i.slice(0,i.indexOf(":")).trim();s[a]==null&&wn(r,a,"")}else for(const i in t)s[i]==null&&wn(r,i,"");for(const i in s)i==="display"&&(o=!0),wn(r,i,s[i])}else if(n){if(t!==s){const i=r[yh];i&&(s+=";"+i),r.cssText=s,o=bh.test(s)}}else t&&e.removeAttribute("style");ja in e&&(e[ja]=o?r.display:"",e[vh]&&(r.display="none"))}const Oa=/\s*!important$/;function wn(e,t,s){if(ae(s))s.forEach(r=>wn(e,t,r));else if(s==null&&(s=""),t.startsWith("--"))e.setProperty(t,s);else{const r=wh(e,t);Oa.test(s)?e.setProperty(Ms(r),s.replace(Oa,""),"important"):e[r]=s}}const Ia=["Webkit","Moz","ms"],$o={};function wh(e,t){const s=$o[t];if(s)return s;let r=_t(t);if(r!=="filter"&&r in e)return $o[t]=r;r=zn(r);for(let n=0;n<Ia.length;n++){const o=Ia[n]+r;if(o in e)return $o[t]=o}return t}const Ma="http://www.w3.org/1999/xlink";function La(e,t,s,r,n,o=Sd(t)){r&&t.startsWith("xlink:")?s==null?e.removeAttributeNS(Ma,t.slice(6,t.length)):e.setAttributeNS(Ma,t,s):s==null||o&&!Dl(s)?e.removeAttribute(t):e.setAttribute(t,o?"":$t(s)?String(s):s)}function Da(e,t,s,r,n){if(t==="innerHTML"||t==="textContent"){s!=null&&(e[t]=t==="innerHTML"?Wc(s):s);return}const o=e.tagName;if(t==="value"&&o!=="PROGRESS"&&!o.includes("-")){const a=o==="OPTION"?e.getAttribute("value")||"":e.value,l=s==null?e.type==="checkbox"?"on":"":String(s);(a!==l||!("_value"in e))&&(e.value=l),s==null&&e.removeAttribute(t),e._value=s;return}let i=!1;if(s===""||s==null){const a=typeof e[t];a==="boolean"?s=Dl(s):s==null&&a==="string"?(s="",i=!0):a==="number"&&(s=0,i=!0)}try{e[t]=s}catch{}i&&e.removeAttribute(n||t)}function qt(e,t,s,r){e.addEventListener(t,s,r)}function xh(e,t,s,r){e.removeEventListener(t,s,r)}const Na=Symbol("_vei");function kh(e,t,s,r,n=null){const o=e[Na]||(e[Na]={}),i=o[t];if(r&&i)i.value=r;else{const[a,l]=$h(t);if(r){const d=o[t]=Sh(r,n);qt(e,a,d,l)}else i&&(xh(e,a,i,l),o[t]=void 0)}}const Fa=/(?:Once|Passive|Capture)$/;function $h(e){let t;if(Fa.test(e)){t={};let r;for(;r=e.match(Fa);)e=e.slice(0,e.length-r[0].length),t[r[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):Ms(e.slice(2)),t]}let Eo=0;const Eh=Promise.resolve(),Ch=()=>Eo||(Eh.then(()=>Eo=0),Eo=Date.now());function Sh(e,t){const s=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=s.attached)return;Et(Th(r,s.value),t,5,[r])};return s.value=e,s.attached=Ch(),s}function Th(e,t){if(ae(t)){const s=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{s.call(e),e._stopped=!0},t.map(r=>n=>!n._stopped&&r&&r(n))}else return t}const Ua=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,Ph=(e,t,s,r,n,o)=>{const i=n==="svg";t==="class"?gh(e,r,i):t==="style"?_h(e,s,r):Un(t)?bi(t)||kh(e,t,s,r,o):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):Ah(e,t,r,i))?(Da(e,t,r),!e.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&La(e,t,r,i,o,t!=="value")):e._isVueCE&&(/[A-Z]/.test(t)||!Fe(r))?Da(e,_t(t),r,o,t):(t==="true-value"?e._trueValue=r:t==="false-value"&&(e._falseValue=r),La(e,t,r,i))};function Ah(e,t,s,r){if(r)return!!(t==="innerHTML"||t==="textContent"||t in e&&Ua(t)&&me(s));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="autocorrect"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const n=e.tagName;if(n==="IMG"||n==="VIDEO"||n==="CANVAS"||n==="SOURCE")return!1}return Ua(t)&&Fe(s)?!1:t in e}const Xc=new WeakMap,Zc=new WeakMap,On=Symbol("_moveCb"),Ba=Symbol("_enterCb"),Rh=e=>(delete e.props.mode,e),jh=Rh({name:"TransitionGroup",props:Ge({},Jc,{tag:String,moveClass:String}),setup(e,{slots:t}){const s=Xn(),r=gc();let n,o;return kc(()=>{if(!n.length)return;const i=e.moveClass||`${e.name||"v"}-move`;if(!Dh(n[0].el,s.vnode.el,i)){n=[];return}n.forEach(Ih),n.forEach(Mh);const a=n.filter(Lh);Jo(),a.forEach(l=>{const d=l.el,u=d.style;jt(d,i),u.transform=u.webkitTransform=u.transitionDuration="";const f=d[On]=h=>{h&&h.target!==d||(!h||/transform$/.test(h.propertyName))&&(d.removeEventListener("transitionend",f),d[On]=null,Zt(d,i))};d.addEventListener("transitionend",f)}),n=[]}),()=>{const i=$e(e),a=Qc(i);let l=i.tag||fe;if(n=[],o)for(let d=0;d<o.length;d++){const u=o[d];u.el&&u.el instanceof Element&&(n.push(u),Os(u,Lr(u,a,r,s)),Xc.set(u,u.el.getBoundingClientRect()))}o=t.default?ji(t.default()):[];for(let d=0;d<o.length;d++){const u=o[d];u.key!=null&&Os(u,Lr(u,a,r,s))}return oe(l,null,o)}}}),Oh=jh;function Ih(e){const t=e.el;t[On]&&t[On](),t[Ba]&&t[Ba]()}function Mh(e){Zc.set(e,e.el.getBoundingClientRect())}function Lh(e){const t=Xc.get(e),s=Zc.get(e),r=t.left-s.left,n=t.top-s.top;if(r||n){const o=e.el.style;return o.transform=o.webkitTransform=`translate(${r}px,${n}px)`,o.transitionDuration="0s",e}}function Dh(e,t,s){const r=e.cloneNode(),n=e[Ys];n&&n.forEach(a=>{a.split(/\s+/).forEach(l=>l&&r.classList.remove(l))}),s.split(/\s+/).forEach(a=>a&&r.classList.add(a)),r.style.display="none";const o=t.nodeType===1?t:t.parentNode;o.appendChild(r);const{hasTransform:i}=Yc(r);return o.removeChild(r),i}const gs=e=>{const t=e.props["onUpdate:modelValue"]||!1;return ae(t)?s=>vn(t,s):t};function Nh(e){e.target.composing=!0}function za(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const bt=Symbol("_assign"),nt={created(e,{modifiers:{lazy:t,trim:s,number:r}},n){e[bt]=gs(n);const o=r||n.props&&n.props.type==="number";qt(e,t?"change":"input",i=>{if(i.target.composing)return;let a=e.value;s&&(a=a.trim()),o&&(a=$n(a)),e[bt](a)}),s&&qt(e,"change",()=>{e.value=e.value.trim()}),t||(qt(e,"compositionstart",Nh),qt(e,"compositionend",za),qt(e,"change",za))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,oldValue:s,modifiers:{lazy:r,trim:n,number:o}},i){if(e[bt]=gs(i),e.composing)return;const a=(o||e.type==="number")&&!/^0\d/.test(e.value)?$n(e.value):e.value,l=t??"";a!==l&&(document.activeElement===e&&e.type!=="range"&&(r&&t===s||n&&e.value.trim()===l)||(e.value=l))}},Qo={deep:!0,created(e,t,s){e[bt]=gs(s),qt(e,"change",()=>{const r=e._modelValue,n=Xs(e),o=e.checked,i=e[bt];if(ae(r)){const a=xi(r,n),l=a!==-1;if(o&&!l)i(r.concat(n));else if(!o&&l){const d=[...r];d.splice(a,1),i(d)}}else if(sr(r)){const a=new Set(r);o?a.add(n):a.delete(n),i(a)}else i(eu(e,o))})},mounted:Va,beforeUpdate(e,t,s){e[bt]=gs(s),Va(e,t,s)}};function Va(e,{value:t,oldValue:s},r){e._modelValue=t;let n;if(ae(t))n=xi(t,r.props.value)>-1;else if(sr(t))n=t.has(r.props.value);else{if(t===s)return;n=js(t,eu(e,!0))}e.checked!==n&&(e.checked=n)}const Fh={created(e,{value:t},s){e.checked=js(t,s.props.value),e[bt]=gs(s),qt(e,"change",()=>{e[bt](Xs(e))})},beforeUpdate(e,{value:t,oldValue:s},r){e[bt]=gs(r),t!==s&&(e.checked=js(t,r.props.value))}},In={deep:!0,created(e,{value:t,modifiers:{number:s}},r){const n=sr(t);qt(e,"change",()=>{const o=Array.prototype.filter.call(e.options,i=>i.selected).map(i=>s?$n(Xs(i)):Xs(i));e[bt](e.multiple?n?new Set(o):o:o[0]),e._assigning=!0,Wr(()=>{e._assigning=!1})}),e[bt]=gs(r)},mounted(e,{value:t}){Ha(e,t)},beforeUpdate(e,t,s){e[bt]=gs(s)},updated(e,{value:t}){e._assigning||Ha(e,t)}};function Ha(e,t){const s=e.multiple,r=ae(t);if(!(s&&!r&&!sr(t))){for(let n=0,o=e.options.length;n<o;n++){const i=e.options[n],a=Xs(i);if(s)if(r){const l=typeof a;l==="string"||l==="number"?i.selected=t.some(d=>String(d)===String(a)):i.selected=xi(t,a)>-1}else i.selected=t.has(a);else if(js(Xs(i),t)){e.selectedIndex!==n&&(e.selectedIndex=n);return}}!s&&e.selectedIndex!==-1&&(e.selectedIndex=-1)}}function Xs(e){return"_value"in e?e._value:e.value}function eu(e,t){const s=t?"_trueValue":"_falseValue";return s in e?e[s]:t}const Uh={created(e,t,s){ln(e,t,s,null,"created")},mounted(e,t,s){ln(e,t,s,null,"mounted")},beforeUpdate(e,t,s,r){ln(e,t,s,r,"beforeUpdate")},updated(e,t,s,r){ln(e,t,s,r,"updated")}};function Bh(e,t){switch(e){case"SELECT":return In;case"TEXTAREA":return nt;default:switch(t){case"checkbox":return Qo;case"radio":return Fh;default:return nt}}}function ln(e,t,s,r,n){const i=Bh(e.tagName,s.props&&s.props.type)[n];i&&i(e,t,s,r)}const zh=["ctrl","shift","alt","meta"],Vh={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>zh.some(s=>e[`${s}Key`]&&!t.includes(s))},Is=(e,t)=>{const s=e._withMods||(e._withMods={}),r=t.join(".");return s[r]||(s[r]=(n,...o)=>{for(let i=0;i<t.length;i++){const a=Vh[t[i]];if(a&&a(n,t))return}return e(n,...o)})},Hh=Ge({patchProp:Ph},fh);let qa;function qh(){return qa||(qa=Lf(Hh))}const Kh=(...e)=>{const t=qh().createApp(...e),{mount:s}=t;return t.mount=r=>{const n=Gh(r);if(!n)return;const o=t._component;!me(o)&&!o.render&&!o.template&&(o.template=n.innerHTML),n.nodeType===1&&(n.textContent="");const i=s(n,!1,Wh(n));return n instanceof Element&&(n.removeAttribute("v-cloak"),n.setAttribute("data-v-app","")),i},t};function Wh(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function Gh(e){return Fe(e)?document.querySelector(e):e}/*!
 * pinia v2.3.1
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let tu;const eo=e=>tu=e,su=Symbol();function Yo(e){return e&&typeof e=="object"&&Object.prototype.toString.call(e)==="[object Object]"&&typeof e.toJSON!="function"}var Cr;(function(e){e.direct="direct",e.patchObject="patch object",e.patchFunction="patch function"})(Cr||(Cr={}));function Jh(){const e=Bl(!0),t=e.run(()=>U({}));let s=[],r=[];const n=Ai({install(o){eo(n),n._a=o,o.provide(su,n),o.config.globalProperties.$pinia=n,r.forEach(i=>s.push(i)),r=[]},use(o){return this._a?s.push(o):r.push(o),this},_p:s,_a:null,_e:e,_s:new Map,state:t});return n}const ru=()=>{};function Ka(e,t,s,r=ru){e.push(t);const n=()=>{const o=e.indexOf(t);o>-1&&(e.splice(o,1),r())};return!s&&zl()&&Pd(n),n}function Ns(e,...t){e.slice().forEach(s=>{s(...t)})}const Qh=e=>e(),Wa=Symbol(),Co=Symbol();function Xo(e,t){e instanceof Map&&t instanceof Map?t.forEach((s,r)=>e.set(r,s)):e instanceof Set&&t instanceof Set&&t.forEach(e.add,e);for(const s in t){if(!t.hasOwnProperty(s))continue;const r=t[s],n=e[s];Yo(n)&&Yo(r)&&e.hasOwnProperty(s)&&!Ve(r)&&!fs(r)?e[s]=Xo(n,r):e[s]=r}return e}const Yh=Symbol();function Xh(e){return!Yo(e)||!e.hasOwnProperty(Yh)}const{assign:es}=Object;function Zh(e){return!!(Ve(e)&&e.effect)}function ep(e,t,s,r){const{state:n,actions:o,getters:i}=t,a=s.state.value[e];let l;function d(){a||(s.state.value[e]=n?n():{});const u=Yd(s.state.value[e]);return es(u,o,Object.keys(i||{}).reduce((f,h)=>(f[h]=Ai(V(()=>{eo(s);const p=s._s.get(e);return i[h].call(p,p)})),f),{}))}return l=nu(e,d,t,s,r,!0),l}function nu(e,t,s={},r,n,o){let i;const a=es({actions:{}},s),l={deep:!0};let d,u,f=[],h=[],p;const x=r.state.value[e];!o&&!x&&(r.state.value[e]={}),U({});let w;function S(L){let A;d=u=!1,typeof L=="function"?(L(r.state.value[e]),A={type:Cr.patchFunction,storeId:e,events:p}):(Xo(r.state.value[e],L),A={type:Cr.patchObject,payload:L,storeId:e,events:p});const T=w=Symbol();Wr().then(()=>{w===T&&(d=!0)}),u=!0,Ns(f,A,r.state.value[e])}const R=o?function(){const{state:A}=s,T=A?A():{};this.$patch(I=>{es(I,T)})}:ru;function y(){i.stop(),f=[],h=[],r._s.delete(e)}const g=(L,A="")=>{if(Wa in L)return L[Co]=A,L;const T=function(){eo(r);const I=Array.from(arguments),N=[],G=[];function re(M){N.push(M)}function we(M){G.push(M)}Ns(h,{args:I,name:T[Co],store:D,after:re,onError:we});let he;try{he=L.apply(this&&this.$id===e?this:D,I)}catch(M){throw Ns(G,M),M}return he instanceof Promise?he.then(M=>(Ns(N,M),M)).catch(M=>(Ns(G,M),Promise.reject(M))):(Ns(N,he),he)};return T[Wa]=!0,T[Co]=A,T},$={_p:r,$id:e,$onAction:Ka.bind(null,h),$patch:S,$reset:R,$subscribe(L,A={}){const T=Ka(f,L,A.detached,()=>I()),I=i.run(()=>ot(()=>r.state.value[e],N=>{(A.flush==="sync"?u:d)&&L({storeId:e,type:Cr.direct,events:p},N)},es({},l,A)));return T},$dispose:y},D=rr($);r._s.set(e,D);const W=(r._a&&r._a.runWithContext||Qh)(()=>r._e.run(()=>(i=Bl()).run(()=>t({action:g}))));for(const L in W){const A=W[L];if(Ve(A)&&!Zh(A)||fs(A))o||(x&&Xh(A)&&(Ve(A)?A.value=x[L]:Xo(A,x[L])),r.state.value[e][L]=A);else if(typeof A=="function"){const T=g(A,L);W[L]=T,a.actions[L]=A}}return es(D,W),es($e(D),W),Object.defineProperty(D,"$state",{get:()=>r.state.value[e],set:L=>{S(A=>{es(A,L)})}}),r._p.forEach(L=>{es(D,i.run(()=>L({store:D,app:r._a,pinia:r,options:a})))}),x&&o&&s.hydrate&&s.hydrate(D.$state,x),d=!0,u=!0,D}/*! #__NO_SIDE_EFFECTS__ */function to(e,t,s){let r,n;const o=typeof t=="function";typeof e=="string"?(r=e,n=o?s:t):(n=e,r=e.id);function i(a,l){const d=Pf();return a=a||(d?Ne(su,null):null),a&&eo(a),a=tu,a._s.has(r)||(o?nu(r,t,n,a):ep(r,n,a)),a._s.get(r)}return i.$id=r,i}/*!
  * vue-router v4.5.1
  * (c) 2025 Eduardo San Martin Morote
  * @license MIT
  */const Vs=typeof document<"u";function ou(e){return typeof e=="object"||"displayName"in e||"props"in e||"__vccOpts"in e}function tp(e){return e.__esModule||e[Symbol.toStringTag]==="Module"||e.default&&ou(e.default)}const Se=Object.assign;function So(e,t){const s={};for(const r in t){const n=t[r];s[r]=St(n)?n.map(e):e(n)}return s}const Sr=()=>{},St=Array.isArray,iu=/#/g,sp=/&/g,rp=/\//g,np=/=/g,op=/\?/g,au=/\+/g,ip=/%5B/g,ap=/%5D/g,lu=/%5E/g,lp=/%60/g,cu=/%7B/g,cp=/%7C/g,uu=/%7D/g,up=/%20/g;function Fi(e){return encodeURI(""+e).replace(cp,"|").replace(ip,"[").replace(ap,"]")}function dp(e){return Fi(e).replace(cu,"{").replace(uu,"}").replace(lu,"^")}function Zo(e){return Fi(e).replace(au,"%2B").replace(up,"+").replace(iu,"%23").replace(sp,"%26").replace(lp,"`").replace(cu,"{").replace(uu,"}").replace(lu,"^")}function fp(e){return Zo(e).replace(np,"%3D")}function hp(e){return Fi(e).replace(iu,"%23").replace(op,"%3F")}function pp(e){return e==null?"":hp(e).replace(rp,"%2F")}function Br(e){try{return decodeURIComponent(""+e)}catch{}return""+e}const mp=/\/$/,gp=e=>e.replace(mp,"");function To(e,t,s="/"){let r,n={},o="",i="";const a=t.indexOf("#");let l=t.indexOf("?");return a<l&&a>=0&&(l=-1),l>-1&&(r=t.slice(0,l),o=t.slice(l+1,a>-1?a:t.length),n=e(o)),a>-1&&(r=r||t.slice(0,a),i=t.slice(a,t.length)),r=_p(r??t,s),{fullPath:r+(o&&"?")+o+i,path:r,query:n,hash:Br(i)}}function vp(e,t){const s=t.query?e(t.query):"";return t.path+(s&&"?")+s+(t.hash||"")}function Ga(e,t){return!t||!e.toLowerCase().startsWith(t.toLowerCase())?e:e.slice(t.length)||"/"}function yp(e,t,s){const r=t.matched.length-1,n=s.matched.length-1;return r>-1&&r===n&&Zs(t.matched[r],s.matched[n])&&du(t.params,s.params)&&e(t.query)===e(s.query)&&t.hash===s.hash}function Zs(e,t){return(e.aliasOf||e)===(t.aliasOf||t)}function du(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const s in e)if(!bp(e[s],t[s]))return!1;return!0}function bp(e,t){return St(e)?Ja(e,t):St(t)?Ja(t,e):e===t}function Ja(e,t){return St(t)?e.length===t.length&&e.every((s,r)=>s===t[r]):e.length===1&&e[0]===t}function _p(e,t){if(e.startsWith("/"))return e;if(!e)return t;const s=t.split("/"),r=e.split("/"),n=r[r.length-1];(n===".."||n===".")&&r.push("");let o=s.length-1,i,a;for(i=0;i<r.length;i++)if(a=r[i],a!==".")if(a==="..")o>1&&o--;else break;return s.slice(0,o).join("/")+"/"+r.slice(i).join("/")}const Xt={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var zr;(function(e){e.pop="pop",e.push="push"})(zr||(zr={}));var Tr;(function(e){e.back="back",e.forward="forward",e.unknown=""})(Tr||(Tr={}));function wp(e){if(!e)if(Vs){const t=document.querySelector("base");e=t&&t.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return e[0]!=="/"&&e[0]!=="#"&&(e="/"+e),gp(e)}const xp=/^[^#]+#/;function kp(e,t){return e.replace(xp,"#")+t}function $p(e,t){const s=document.documentElement.getBoundingClientRect(),r=e.getBoundingClientRect();return{behavior:t.behavior,left:r.left-s.left-(t.left||0),top:r.top-s.top-(t.top||0)}}const so=()=>({left:window.scrollX,top:window.scrollY});function Ep(e){let t;if("el"in e){const s=e.el,r=typeof s=="string"&&s.startsWith("#"),n=typeof s=="string"?r?document.getElementById(s.slice(1)):document.querySelector(s):s;if(!n)return;t=$p(n,e)}else t=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(t.left!=null?t.left:window.scrollX,t.top!=null?t.top:window.scrollY)}function Qa(e,t){return(history.state?history.state.position-t:-1)+e}const ei=new Map;function Cp(e,t){ei.set(e,t)}function Sp(e){const t=ei.get(e);return ei.delete(e),t}let Tp=()=>location.protocol+"//"+location.host;function fu(e,t){const{pathname:s,search:r,hash:n}=t,o=e.indexOf("#");if(o>-1){let a=n.includes(e.slice(o))?e.slice(o).length:1,l=n.slice(a);return l[0]!=="/"&&(l="/"+l),Ga(l,"")}return Ga(s,e)+r+n}function Pp(e,t,s,r){let n=[],o=[],i=null;const a=({state:h})=>{const p=fu(e,location),x=s.value,w=t.value;let S=0;if(h){if(s.value=p,t.value=h,i&&i===x){i=null;return}S=w?h.position-w.position:0}else r(p);n.forEach(R=>{R(s.value,x,{delta:S,type:zr.pop,direction:S?S>0?Tr.forward:Tr.back:Tr.unknown})})};function l(){i=s.value}function d(h){n.push(h);const p=()=>{const x=n.indexOf(h);x>-1&&n.splice(x,1)};return o.push(p),p}function u(){const{history:h}=window;h.state&&h.replaceState(Se({},h.state,{scroll:so()}),"")}function f(){for(const h of o)h();o=[],window.removeEventListener("popstate",a),window.removeEventListener("beforeunload",u)}return window.addEventListener("popstate",a),window.addEventListener("beforeunload",u,{passive:!0}),{pauseListeners:l,listen:d,destroy:f}}function Ya(e,t,s,r=!1,n=!1){return{back:e,current:t,forward:s,replaced:r,position:window.history.length,scroll:n?so():null}}function Ap(e){const{history:t,location:s}=window,r={value:fu(e,s)},n={value:t.state};n.value||o(r.value,{back:null,current:r.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0);function o(l,d,u){const f=e.indexOf("#"),h=f>-1?(s.host&&document.querySelector("base")?e:e.slice(f))+l:Tp()+e+l;try{t[u?"replaceState":"pushState"](d,"",h),n.value=d}catch(p){console.error(p),s[u?"replace":"assign"](h)}}function i(l,d){const u=Se({},t.state,Ya(n.value.back,l,n.value.forward,!0),d,{position:n.value.position});o(l,u,!0),r.value=l}function a(l,d){const u=Se({},n.value,t.state,{forward:l,scroll:so()});o(u.current,u,!0);const f=Se({},Ya(r.value,l,null),{position:u.position+1},d);o(l,f,!1),r.value=l}return{location:r,state:n,push:a,replace:i}}function Rp(e){e=wp(e);const t=Ap(e),s=Pp(e,t.state,t.location,t.replace);function r(o,i=!0){i||s.pauseListeners(),history.go(o)}const n=Se({location:"",base:e,go:r,createHref:kp.bind(null,e)},t,s);return Object.defineProperty(n,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(n,"state",{enumerable:!0,get:()=>t.state.value}),n}function jp(e){return typeof e=="string"||e&&typeof e=="object"}function hu(e){return typeof e=="string"||typeof e=="symbol"}const pu=Symbol("");var Xa;(function(e){e[e.aborted=4]="aborted",e[e.cancelled=8]="cancelled",e[e.duplicated=16]="duplicated"})(Xa||(Xa={}));function er(e,t){return Se(new Error,{type:e,[pu]:!0},t)}function Ut(e,t){return e instanceof Error&&pu in e&&(t==null||!!(e.type&t))}const Za="[^/]+?",Op={sensitive:!1,strict:!1,start:!0,end:!0},Ip=/[.+*?^${}()[\]/\\]/g;function Mp(e,t){const s=Se({},Op,t),r=[];let n=s.start?"^":"";const o=[];for(const d of e){const u=d.length?[]:[90];s.strict&&!d.length&&(n+="/");for(let f=0;f<d.length;f++){const h=d[f];let p=40+(s.sensitive?.25:0);if(h.type===0)f||(n+="/"),n+=h.value.replace(Ip,"\\$&"),p+=40;else if(h.type===1){const{value:x,repeatable:w,optional:S,regexp:R}=h;o.push({name:x,repeatable:w,optional:S});const y=R||Za;if(y!==Za){p+=10;try{new RegExp(`(${y})`)}catch($){throw new Error(`Invalid custom RegExp for param "${x}" (${y}): `+$.message)}}let g=w?`((?:${y})(?:/(?:${y}))*)`:`(${y})`;f||(g=S&&d.length<2?`(?:/${g})`:"/"+g),S&&(g+="?"),n+=g,p+=20,S&&(p+=-8),w&&(p+=-20),y===".*"&&(p+=-50)}u.push(p)}r.push(u)}if(s.strict&&s.end){const d=r.length-1;r[d][r[d].length-1]+=.7000000000000001}s.strict||(n+="/?"),s.end?n+="$":s.strict&&!n.endsWith("/")&&(n+="(?:/|$)");const i=new RegExp(n,s.sensitive?"":"i");function a(d){const u=d.match(i),f={};if(!u)return null;for(let h=1;h<u.length;h++){const p=u[h]||"",x=o[h-1];f[x.name]=p&&x.repeatable?p.split("/"):p}return f}function l(d){let u="",f=!1;for(const h of e){(!f||!u.endsWith("/"))&&(u+="/"),f=!1;for(const p of h)if(p.type===0)u+=p.value;else if(p.type===1){const{value:x,repeatable:w,optional:S}=p,R=x in d?d[x]:"";if(St(R)&&!w)throw new Error(`Provided param "${x}" is an array but it is not repeatable (* or + modifiers)`);const y=St(R)?R.join("/"):R;if(!y)if(S)h.length<2&&(u.endsWith("/")?u=u.slice(0,-1):f=!0);else throw new Error(`Missing required param "${x}"`);u+=y}}return u||"/"}return{re:i,score:r,keys:o,parse:a,stringify:l}}function Lp(e,t){let s=0;for(;s<e.length&&s<t.length;){const r=t[s]-e[s];if(r)return r;s++}return e.length<t.length?e.length===1&&e[0]===80?-1:1:e.length>t.length?t.length===1&&t[0]===80?1:-1:0}function mu(e,t){let s=0;const r=e.score,n=t.score;for(;s<r.length&&s<n.length;){const o=Lp(r[s],n[s]);if(o)return o;s++}if(Math.abs(n.length-r.length)===1){if(el(r))return 1;if(el(n))return-1}return n.length-r.length}function el(e){const t=e[e.length-1];return e.length>0&&t[t.length-1]<0}const Dp={type:0,value:""},Np=/[a-zA-Z0-9_]/;function Fp(e){if(!e)return[[]];if(e==="/")return[[Dp]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function t(p){throw new Error(`ERR (${s})/"${d}": ${p}`)}let s=0,r=s;const n=[];let o;function i(){o&&n.push(o),o=[]}let a=0,l,d="",u="";function f(){d&&(s===0?o.push({type:0,value:d}):s===1||s===2||s===3?(o.length>1&&(l==="*"||l==="+")&&t(`A repeatable param (${d}) must be alone in its segment. eg: '/:ids+.`),o.push({type:1,value:d,regexp:u,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):t("Invalid state to consume buffer"),d="")}function h(){d+=l}for(;a<e.length;){if(l=e[a++],l==="\\"&&s!==2){r=s,s=4;continue}switch(s){case 0:l==="/"?(d&&f(),i()):l===":"?(f(),s=1):h();break;case 4:h(),s=r;break;case 1:l==="("?s=2:Np.test(l)?h():(f(),s=0,l!=="*"&&l!=="?"&&l!=="+"&&a--);break;case 2:l===")"?u[u.length-1]=="\\"?u=u.slice(0,-1)+l:s=3:u+=l;break;case 3:f(),s=0,l!=="*"&&l!=="?"&&l!=="+"&&a--,u="";break;default:t("Unknown state");break}}return s===2&&t(`Unfinished custom RegExp for param "${d}"`),f(),i(),n}function Up(e,t,s){const r=Mp(Fp(e.path),s),n=Se(r,{record:e,parent:t,children:[],alias:[]});return t&&!n.record.aliasOf==!t.record.aliasOf&&t.children.push(n),n}function Bp(e,t){const s=[],r=new Map;t=nl({strict:!1,end:!0,sensitive:!1},t);function n(f){return r.get(f)}function o(f,h,p){const x=!p,w=sl(f);w.aliasOf=p&&p.record;const S=nl(t,f),R=[w];if("alias"in f){const $=typeof f.alias=="string"?[f.alias]:f.alias;for(const D of $)R.push(sl(Se({},w,{components:p?p.record.components:w.components,path:D,aliasOf:p?p.record:w})))}let y,g;for(const $ of R){const{path:D}=$;if(h&&D[0]!=="/"){const se=h.record.path,W=se[se.length-1]==="/"?"":"/";$.path=h.record.path+(D&&W+D)}if(y=Up($,h,S),p?p.alias.push(y):(g=g||y,g!==y&&g.alias.push(y),x&&f.name&&!rl(y)&&i(f.name)),gu(y)&&l(y),w.children){const se=w.children;for(let W=0;W<se.length;W++)o(se[W],y,p&&p.children[W])}p=p||y}return g?()=>{i(g)}:Sr}function i(f){if(hu(f)){const h=r.get(f);h&&(r.delete(f),s.splice(s.indexOf(h),1),h.children.forEach(i),h.alias.forEach(i))}else{const h=s.indexOf(f);h>-1&&(s.splice(h,1),f.record.name&&r.delete(f.record.name),f.children.forEach(i),f.alias.forEach(i))}}function a(){return s}function l(f){const h=Hp(f,s);s.splice(h,0,f),f.record.name&&!rl(f)&&r.set(f.record.name,f)}function d(f,h){let p,x={},w,S;if("name"in f&&f.name){if(p=r.get(f.name),!p)throw er(1,{location:f});S=p.record.name,x=Se(tl(h.params,p.keys.filter(g=>!g.optional).concat(p.parent?p.parent.keys.filter(g=>g.optional):[]).map(g=>g.name)),f.params&&tl(f.params,p.keys.map(g=>g.name))),w=p.stringify(x)}else if(f.path!=null)w=f.path,p=s.find(g=>g.re.test(w)),p&&(x=p.parse(w),S=p.record.name);else{if(p=h.name?r.get(h.name):s.find(g=>g.re.test(h.path)),!p)throw er(1,{location:f,currentLocation:h});S=p.record.name,x=Se({},h.params,f.params),w=p.stringify(x)}const R=[];let y=p;for(;y;)R.unshift(y.record),y=y.parent;return{name:S,path:w,params:x,matched:R,meta:Vp(R)}}e.forEach(f=>o(f));function u(){s.length=0,r.clear()}return{addRoute:o,resolve:d,removeRoute:i,clearRoutes:u,getRoutes:a,getRecordMatcher:n}}function tl(e,t){const s={};for(const r of t)r in e&&(s[r]=e[r]);return s}function sl(e){const t={path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:e.aliasOf,beforeEnter:e.beforeEnter,props:zp(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||null:e.component&&{default:e.component}};return Object.defineProperty(t,"mods",{value:{}}),t}function zp(e){const t={},s=e.props||!1;if("component"in e)t.default=s;else for(const r in e.components)t[r]=typeof s=="object"?s[r]:s;return t}function rl(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function Vp(e){return e.reduce((t,s)=>Se(t,s.meta),{})}function nl(e,t){const s={};for(const r in e)s[r]=r in t?t[r]:e[r];return s}function Hp(e,t){let s=0,r=t.length;for(;s!==r;){const o=s+r>>1;mu(e,t[o])<0?r=o:s=o+1}const n=qp(e);return n&&(r=t.lastIndexOf(n,r-1)),r}function qp(e){let t=e;for(;t=t.parent;)if(gu(t)&&mu(e,t)===0)return t}function gu({record:e}){return!!(e.name||e.components&&Object.keys(e.components).length||e.redirect)}function Kp(e){const t={};if(e===""||e==="?")return t;const r=(e[0]==="?"?e.slice(1):e).split("&");for(let n=0;n<r.length;++n){const o=r[n].replace(au," "),i=o.indexOf("="),a=Br(i<0?o:o.slice(0,i)),l=i<0?null:Br(o.slice(i+1));if(a in t){let d=t[a];St(d)||(d=t[a]=[d]),d.push(l)}else t[a]=l}return t}function ol(e){let t="";for(let s in e){const r=e[s];if(s=fp(s),r==null){r!==void 0&&(t+=(t.length?"&":"")+s);continue}(St(r)?r.map(o=>o&&Zo(o)):[r&&Zo(r)]).forEach(o=>{o!==void 0&&(t+=(t.length?"&":"")+s,o!=null&&(t+="="+o))})}return t}function Wp(e){const t={};for(const s in e){const r=e[s];r!==void 0&&(t[s]=St(r)?r.map(n=>n==null?null:""+n):r==null?r:""+r)}return t}const Gp=Symbol(""),il=Symbol(""),ro=Symbol(""),Ui=Symbol(""),ti=Symbol("");function fr(){let e=[];function t(r){return e.push(r),()=>{const n=e.indexOf(r);n>-1&&e.splice(n,1)}}function s(){e=[]}return{add:t,list:()=>e.slice(),reset:s}}function is(e,t,s,r,n,o=i=>i()){const i=r&&(r.enterCallbacks[n]=r.enterCallbacks[n]||[]);return()=>new Promise((a,l)=>{const d=h=>{h===!1?l(er(4,{from:s,to:t})):h instanceof Error?l(h):jp(h)?l(er(2,{from:t,to:h})):(i&&r.enterCallbacks[n]===i&&typeof h=="function"&&i.push(h),a())},u=o(()=>e.call(r&&r.instances[n],t,s,d));let f=Promise.resolve(u);e.length<3&&(f=f.then(d)),f.catch(h=>l(h))})}function Po(e,t,s,r,n=o=>o()){const o=[];for(const i of e)for(const a in i.components){let l=i.components[a];if(!(t!=="beforeRouteEnter"&&!i.instances[a]))if(ou(l)){const u=(l.__vccOpts||l)[t];u&&o.push(is(u,s,r,i,a,n))}else{let d=l();o.push(()=>d.then(u=>{if(!u)throw new Error(`Couldn't resolve component "${a}" at "${i.path}"`);const f=tp(u)?u.default:u;i.mods[a]=u,i.components[a]=f;const p=(f.__vccOpts||f)[t];return p&&is(p,s,r,i,a,n)()}))}}return o}function al(e){const t=Ne(ro),s=Ne(Ui),r=V(()=>{const l=B(e.to);return t.resolve(l)}),n=V(()=>{const{matched:l}=r.value,{length:d}=l,u=l[d-1],f=s.matched;if(!u||!f.length)return-1;const h=f.findIndex(Zs.bind(null,u));if(h>-1)return h;const p=ll(l[d-2]);return d>1&&ll(u)===p&&f[f.length-1].path!==p?f.findIndex(Zs.bind(null,l[d-2])):h}),o=V(()=>n.value>-1&&Zp(s.params,r.value.params)),i=V(()=>n.value>-1&&n.value===s.matched.length-1&&du(s.params,r.value.params));function a(l={}){if(Xp(l)){const d=t[B(e.replace)?"replace":"push"](B(e.to)).catch(Sr);return e.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>d),d}return Promise.resolve()}return{route:r,href:V(()=>r.value.href),isActive:o,isExactActive:i,navigate:a}}function Jp(e){return e.length===1?e[0]:e}const Qp=Ee({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:al,setup(e,{slots:t}){const s=rr(al(e)),{options:r}=Ne(ro),n=V(()=>({[cl(e.activeClass,r.linkActiveClass,"router-link-active")]:s.isActive,[cl(e.exactActiveClass,r.linkExactActiveClass,"router-link-exact-active")]:s.isExactActive}));return()=>{const o=t.default&&Jp(t.default(s));return e.custom?o:He("a",{"aria-current":s.isExactActive?e.ariaCurrentValue:null,href:s.href,onClick:s.navigate,class:n.value},o)}}}),Yp=Qp;function Xp(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&!(e.button!==void 0&&e.button!==0)){if(e.currentTarget&&e.currentTarget.getAttribute){const t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return e.preventDefault&&e.preventDefault(),!0}}function Zp(e,t){for(const s in t){const r=t[s],n=e[s];if(typeof r=="string"){if(r!==n)return!1}else if(!St(n)||n.length!==r.length||r.some((o,i)=>o!==n[i]))return!1}return!0}function ll(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const cl=(e,t,s)=>e??t??s,e0=Ee({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(e,{attrs:t,slots:s}){const r=Ne(ti),n=V(()=>e.route||r.value),o=Ne(il,0),i=V(()=>{let d=B(o);const{matched:u}=n.value;let f;for(;(f=u[d])&&!f.components;)d++;return d}),a=V(()=>n.value.matched[i.value]);ut(il,V(()=>i.value+1)),ut(Gp,a),ut(ti,n);const l=U();return ot(()=>[l.value,a.value,e.name],([d,u,f],[h,p,x])=>{u&&(u.instances[f]=d,p&&p!==u&&d&&d===h&&(u.leaveGuards.size||(u.leaveGuards=p.leaveGuards),u.updateGuards.size||(u.updateGuards=p.updateGuards))),d&&u&&(!p||!Zs(u,p)||!h)&&(u.enterCallbacks[f]||[]).forEach(w=>w(d))},{flush:"post"}),()=>{const d=n.value,u=e.name,f=a.value,h=f&&f.components[u];if(!h)return ul(s.default,{Component:h,route:d});const p=f.props[u],x=p?p===!0?d.params:typeof p=="function"?p(d):p:null,S=He(h,Se({},x,t,{onVnodeUnmounted:R=>{R.component.isUnmounted&&(f.instances[u]=null)},ref:l}));return ul(s.default,{Component:S,route:d})||S}}});function ul(e,t){if(!e)return null;const s=e(t);return s.length===1?s[0]:s}const t0=e0;function s0(e){const t=Bp(e.routes,e),s=e.parseQuery||Kp,r=e.stringifyQuery||ol,n=e.history,o=fr(),i=fr(),a=fr(),l=nc(Xt);let d=Xt;Vs&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const u=So.bind(null,P=>""+P),f=So.bind(null,pp),h=So.bind(null,Br);function p(P,X){let Z,ie;return hu(P)?(Z=t.getRecordMatcher(P),ie=X):ie=P,t.addRoute(ie,Z)}function x(P){const X=t.getRecordMatcher(P);X&&t.removeRoute(X)}function w(){return t.getRoutes().map(P=>P.record)}function S(P){return!!t.getRecordMatcher(P)}function R(P,X){if(X=Se({},X||l.value),typeof P=="string"){const v=To(s,P,X.path),j=t.resolve({path:v.path},X),C=n.createHref(v.fullPath);return Se(v,j,{params:h(j.params),hash:Br(v.hash),redirectedFrom:void 0,href:C})}let Z;if(P.path!=null)Z=Se({},P,{path:To(s,P.path,X.path).path});else{const v=Se({},P.params);for(const j in v)v[j]==null&&delete v[j];Z=Se({},P,{params:f(v)}),X.params=f(X.params)}const ie=t.resolve(Z,X),Pe=P.hash||"";ie.params=u(h(ie.params));const _=vp(r,Se({},P,{hash:dp(Pe),path:ie.path})),m=n.createHref(_);return Se({fullPath:_,hash:Pe,query:r===ol?Wp(P.query):P.query||{}},ie,{redirectedFrom:void 0,href:m})}function y(P){return typeof P=="string"?To(s,P,l.value.path):Se({},P)}function g(P,X){if(d!==P)return er(8,{from:X,to:P})}function $(P){return W(P)}function D(P){return $(Se(y(P),{replace:!0}))}function se(P){const X=P.matched[P.matched.length-1];if(X&&X.redirect){const{redirect:Z}=X;let ie=typeof Z=="function"?Z(P):Z;return typeof ie=="string"&&(ie=ie.includes("?")||ie.includes("#")?ie=y(ie):{path:ie},ie.params={}),Se({query:P.query,hash:P.hash,params:ie.path!=null?{}:P.params},ie)}}function W(P,X){const Z=d=R(P),ie=l.value,Pe=P.state,_=P.force,m=P.replace===!0,v=se(Z);if(v)return W(Se(y(v),{state:typeof v=="object"?Se({},Pe,v.state):Pe,force:_,replace:m}),X||Z);const j=Z;j.redirectedFrom=X;let C;return!_&&yp(r,ie,Z)&&(C=er(16,{to:j,from:ie}),ue(ie,ie,!0,!1)),(C?Promise.resolve(C):T(j,ie)).catch(O=>Ut(O)?Ut(O,2)?O:be(O):H(O,j,ie)).then(O=>{if(O){if(Ut(O,2))return W(Se({replace:m},y(O.to),{state:typeof O.to=="object"?Se({},Pe,O.to.state):Pe,force:_}),X||j)}else O=N(j,ie,!0,m,Pe);return I(j,ie,O),O})}function L(P,X){const Z=g(P,X);return Z?Promise.reject(Z):Promise.resolve()}function A(P){const X=te.values().next().value;return X&&typeof X.runWithContext=="function"?X.runWithContext(P):P()}function T(P,X){let Z;const[ie,Pe,_]=r0(P,X);Z=Po(ie.reverse(),"beforeRouteLeave",P,X);for(const v of ie)v.leaveGuards.forEach(j=>{Z.push(is(j,P,X))});const m=L.bind(null,P,X);return Z.push(m),K(Z).then(()=>{Z=[];for(const v of o.list())Z.push(is(v,P,X));return Z.push(m),K(Z)}).then(()=>{Z=Po(Pe,"beforeRouteUpdate",P,X);for(const v of Pe)v.updateGuards.forEach(j=>{Z.push(is(j,P,X))});return Z.push(m),K(Z)}).then(()=>{Z=[];for(const v of _)if(v.beforeEnter)if(St(v.beforeEnter))for(const j of v.beforeEnter)Z.push(is(j,P,X));else Z.push(is(v.beforeEnter,P,X));return Z.push(m),K(Z)}).then(()=>(P.matched.forEach(v=>v.enterCallbacks={}),Z=Po(_,"beforeRouteEnter",P,X,A),Z.push(m),K(Z))).then(()=>{Z=[];for(const v of i.list())Z.push(is(v,P,X));return Z.push(m),K(Z)}).catch(v=>Ut(v,8)?v:Promise.reject(v))}function I(P,X,Z){a.list().forEach(ie=>A(()=>ie(P,X,Z)))}function N(P,X,Z,ie,Pe){const _=g(P,X);if(_)return _;const m=X===Xt,v=Vs?history.state:{};Z&&(ie||m?n.replace(P.fullPath,Se({scroll:m&&v&&v.scroll},Pe)):n.push(P.fullPath,Pe)),l.value=P,ue(P,X,Z,m),be()}let G;function re(){G||(G=n.listen((P,X,Z)=>{if(!z.listening)return;const ie=R(P),Pe=se(ie);if(Pe){W(Se(Pe,{replace:!0,force:!0}),ie).catch(Sr);return}d=ie;const _=l.value;Vs&&Cp(Qa(_.fullPath,Z.delta),so()),T(ie,_).catch(m=>Ut(m,12)?m:Ut(m,2)?(W(Se(y(m.to),{force:!0}),ie).then(v=>{Ut(v,20)&&!Z.delta&&Z.type===zr.pop&&n.go(-1,!1)}).catch(Sr),Promise.reject()):(Z.delta&&n.go(-Z.delta,!1),H(m,ie,_))).then(m=>{m=m||N(ie,_,!1),m&&(Z.delta&&!Ut(m,8)?n.go(-Z.delta,!1):Z.type===zr.pop&&Ut(m,20)&&n.go(-1,!1)),I(ie,_,m)}).catch(Sr)}))}let we=fr(),he=fr(),M;function H(P,X,Z){be(P);const ie=he.list();return ie.length?ie.forEach(Pe=>Pe(P,X,Z)):console.error(P),Promise.reject(P)}function ne(){return M&&l.value!==Xt?Promise.resolve():new Promise((P,X)=>{we.add([P,X])})}function be(P){return M||(M=!P,re(),we.list().forEach(([X,Z])=>P?Z(P):X()),we.reset()),P}function ue(P,X,Z,ie){const{scrollBehavior:Pe}=e;if(!Vs||!Pe)return Promise.resolve();const _=!Z&&Sp(Qa(P.fullPath,0))||(ie||!Z)&&history.state&&history.state.scroll||null;return Wr().then(()=>Pe(P,X,_)).then(m=>m&&Ep(m)).catch(m=>H(m,P,X))}const de=P=>n.go(P);let Oe;const te=new Set,z={currentRoute:l,listening:!0,addRoute:p,removeRoute:x,clearRoutes:t.clearRoutes,hasRoute:S,getRoutes:w,resolve:R,options:e,push:$,replace:D,go:de,back:()=>de(-1),forward:()=>de(1),beforeEach:o.add,beforeResolve:i.add,afterEach:a.add,onError:he.add,isReady:ne,install(P){const X=this;P.component("RouterLink",Yp),P.component("RouterView",t0),P.config.globalProperties.$router=X,Object.defineProperty(P.config.globalProperties,"$route",{enumerable:!0,get:()=>B(l)}),Vs&&!Oe&&l.value===Xt&&(Oe=!0,$(n.location).catch(Pe=>{}));const Z={};for(const Pe in Xt)Object.defineProperty(Z,Pe,{get:()=>l.value[Pe],enumerable:!0});P.provide(ro,X),P.provide(Ui,rc(Z)),P.provide(ti,l);const ie=P.unmount;te.add(P),P.unmount=function(){te.delete(P),te.size<1&&(d=Xt,G&&G(),G=null,l.value=Xt,Oe=!1,M=!1),ie()}}};function K(P){return P.reduce((X,Z)=>X.then(()=>A(Z)),Promise.resolve())}return z}function r0(e,t){const s=[],r=[],n=[],o=Math.max(t.matched.length,e.matched.length);for(let i=0;i<o;i++){const a=t.matched[i];a&&(e.matched.find(d=>Zs(d,a))?r.push(a):s.push(a));const l=e.matched[i];l&&(t.matched.find(d=>Zs(d,l))||n.push(l))}return[s,r,n]}function no(){return Ne(ro)}function nr(e){return Ne(Ui)}const n0=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...s)=>hs(async()=>{const{default:r}=await Promise.resolve().then(()=>or);return{default:r}},void 0).then(({default:r})=>r(...s)):t=fetch,(...s)=>t(...s)};class Bi extends Error{constructor(t,s="FunctionsError",r){super(t),this.name=s,this.context=r}}class o0 extends Bi{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class i0 extends Bi{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class a0 extends Bi{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var si;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(si||(si={}));var l0=function(e,t,s,r){function n(o){return o instanceof s?o:new s(function(i){i(o)})}return new(s||(s=Promise))(function(o,i){function a(u){try{d(r.next(u))}catch(f){i(f)}}function l(u){try{d(r.throw(u))}catch(f){i(f)}}function d(u){u.done?o(u.value):n(u.value).then(a,l)}d((r=r.apply(e,t||[])).next())})};class c0{constructor(t,{headers:s={},customFetch:r,region:n=si.Any}={}){this.url=t,this.headers=s,this.region=n,this.fetch=n0(r)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t,s={}){var r;return l0(this,void 0,void 0,function*(){try{const{headers:n,method:o,body:i}=s;let a={},{region:l}=s;l||(l=this.region),l&&l!=="any"&&(a["x-region"]=l);let d;i&&(n&&!Object.prototype.hasOwnProperty.call(n,"Content-Type")||!n)&&(typeof Blob<"u"&&i instanceof Blob||i instanceof ArrayBuffer?(a["Content-Type"]="application/octet-stream",d=i):typeof i=="string"?(a["Content-Type"]="text/plain",d=i):typeof FormData<"u"&&i instanceof FormData?d=i:(a["Content-Type"]="application/json",d=JSON.stringify(i)));const u=yield this.fetch(`${this.url}/${t}`,{method:o||"POST",headers:Object.assign(Object.assign(Object.assign({},a),this.headers),n),body:d}).catch(x=>{throw new o0(x)}),f=u.headers.get("x-relay-error");if(f&&f==="true")throw new i0(u);if(!u.ok)throw new a0(u);let h=((r=u.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),p;return h==="application/json"?p=yield u.json():h==="application/octet-stream"?p=yield u.blob():h==="text/event-stream"?p=u:h==="multipart/form-data"?p=yield u.formData():p=yield u.text(),{data:p,error:null}}catch(n){return{data:null,error:n}}})}}var wt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function a3(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function u0(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var s=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};s.prototype=t.prototype}else s={};return Object.defineProperty(s,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var n=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(s,r,n.get?n:{enumerable:!0,get:function(){return e[r]}})}),s}var ct={},zi={},oo={},Jr={},io={},ao={},d0=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},tr=d0();const f0=tr.fetch,vu=tr.fetch.bind(tr),yu=tr.Headers,h0=tr.Request,p0=tr.Response,or=Object.freeze(Object.defineProperty({__proto__:null,Headers:yu,Request:h0,Response:p0,default:vu,fetch:f0},Symbol.toStringTag,{value:"Module"})),m0=u0(or);var lo={};Object.defineProperty(lo,"__esModule",{value:!0});let g0=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}};lo.default=g0;var bu=wt&&wt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ao,"__esModule",{value:!0});const v0=bu(m0),y0=bu(lo);let b0=class{constructor(t){this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=t.headers,this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=t.shouldThrowOnError,this.signal=t.signal,this.isMaybeSingle=t.isMaybeSingle,t.fetch?this.fetch=t.fetch:typeof fetch>"u"?this.fetch=v0.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,s){return this.headers=Object.assign({},this.headers),this.headers[t]=s,this}then(t,s){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const r=this.fetch;let n=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async o=>{var i,a,l;let d=null,u=null,f=null,h=o.status,p=o.statusText;if(o.ok){if(this.method!=="HEAD"){const R=await o.text();R===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?u=R:u=JSON.parse(R))}const w=(i=this.headers.Prefer)===null||i===void 0?void 0:i.match(/count=(exact|planned|estimated)/),S=(a=o.headers.get("content-range"))===null||a===void 0?void 0:a.split("/");w&&S&&S.length>1&&(f=parseInt(S[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(u)&&(u.length>1?(d={code:"PGRST116",details:`Results contain ${u.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},u=null,f=null,h=406,p="Not Acceptable"):u.length===1?u=u[0]:u=null)}else{const w=await o.text();try{d=JSON.parse(w),Array.isArray(d)&&o.status===404&&(u=[],d=null,h=200,p="OK")}catch{o.status===404&&w===""?(h=204,p="No Content"):d={message:w}}if(d&&this.isMaybeSingle&&(!((l=d==null?void 0:d.details)===null||l===void 0)&&l.includes("0 rows"))&&(d=null,h=200,p="OK"),d&&this.shouldThrowOnError)throw new y0.default(d)}return{error:d,data:u,count:f,status:h,statusText:p}});return this.shouldThrowOnError||(n=n.catch(o=>{var i,a,l;return{error:{message:`${(i=o==null?void 0:o.name)!==null&&i!==void 0?i:"FetchError"}: ${o==null?void 0:o.message}`,details:`${(a=o==null?void 0:o.stack)!==null&&a!==void 0?a:""}`,hint:"",code:`${(l=o==null?void 0:o.code)!==null&&l!==void 0?l:""}`},data:null,count:null,status:0,statusText:""}})),n.then(t,s)}returns(){return this}overrideTypes(){return this}};ao.default=b0;var _0=wt&&wt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(io,"__esModule",{value:!0});const w0=_0(ao);let x0=class extends w0.default{select(t){let s=!1;const r=(t??"*").split("").map(n=>/\s/.test(n)&&!s?"":(n==='"'&&(s=!s),n)).join("");return this.url.searchParams.set("select",r),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(t,{ascending:s=!0,nullsFirst:r,foreignTable:n,referencedTable:o=n}={}){const i=o?`${o}.order`:"order",a=this.url.searchParams.get(i);return this.url.searchParams.set(i,`${a?`${a},`:""}${t}.${s?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:s,referencedTable:r=s}={}){const n=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(n,`${t}`),this}range(t,s,{foreignTable:r,referencedTable:n=r}={}){const o=typeof n>"u"?"offset":`${n}.offset`,i=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(o,`${t}`),this.url.searchParams.set(i,`${s-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:t=!1,verbose:s=!1,settings:r=!1,buffers:n=!1,wal:o=!1,format:i="text"}={}){var a;const l=[t?"analyze":null,s?"verbose":null,r?"settings":null,n?"buffers":null,o?"wal":null].filter(Boolean).join("|"),d=(a=this.headers.Accept)!==null&&a!==void 0?a:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${i}; for="${d}"; options=${l};`,i==="json"?this:this}rollback(){var t;return((t=this.headers.Prefer)!==null&&t!==void 0?t:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};io.default=x0;var k0=wt&&wt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Jr,"__esModule",{value:!0});const $0=k0(io);let E0=class extends $0.default{eq(t,s){return this.url.searchParams.append(t,`eq.${s}`),this}neq(t,s){return this.url.searchParams.append(t,`neq.${s}`),this}gt(t,s){return this.url.searchParams.append(t,`gt.${s}`),this}gte(t,s){return this.url.searchParams.append(t,`gte.${s}`),this}lt(t,s){return this.url.searchParams.append(t,`lt.${s}`),this}lte(t,s){return this.url.searchParams.append(t,`lte.${s}`),this}like(t,s){return this.url.searchParams.append(t,`like.${s}`),this}likeAllOf(t,s){return this.url.searchParams.append(t,`like(all).{${s.join(",")}}`),this}likeAnyOf(t,s){return this.url.searchParams.append(t,`like(any).{${s.join(",")}}`),this}ilike(t,s){return this.url.searchParams.append(t,`ilike.${s}`),this}ilikeAllOf(t,s){return this.url.searchParams.append(t,`ilike(all).{${s.join(",")}}`),this}ilikeAnyOf(t,s){return this.url.searchParams.append(t,`ilike(any).{${s.join(",")}}`),this}is(t,s){return this.url.searchParams.append(t,`is.${s}`),this}in(t,s){const r=Array.from(new Set(s)).map(n=>typeof n=="string"&&new RegExp("[,()]").test(n)?`"${n}"`:`${n}`).join(",");return this.url.searchParams.append(t,`in.(${r})`),this}contains(t,s){return typeof s=="string"?this.url.searchParams.append(t,`cs.${s}`):Array.isArray(s)?this.url.searchParams.append(t,`cs.{${s.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(s)}`),this}containedBy(t,s){return typeof s=="string"?this.url.searchParams.append(t,`cd.${s}`):Array.isArray(s)?this.url.searchParams.append(t,`cd.{${s.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(s)}`),this}rangeGt(t,s){return this.url.searchParams.append(t,`sr.${s}`),this}rangeGte(t,s){return this.url.searchParams.append(t,`nxl.${s}`),this}rangeLt(t,s){return this.url.searchParams.append(t,`sl.${s}`),this}rangeLte(t,s){return this.url.searchParams.append(t,`nxr.${s}`),this}rangeAdjacent(t,s){return this.url.searchParams.append(t,`adj.${s}`),this}overlaps(t,s){return typeof s=="string"?this.url.searchParams.append(t,`ov.${s}`):this.url.searchParams.append(t,`ov.{${s.join(",")}}`),this}textSearch(t,s,{config:r,type:n}={}){let o="";n==="plain"?o="pl":n==="phrase"?o="ph":n==="websearch"&&(o="w");const i=r===void 0?"":`(${r})`;return this.url.searchParams.append(t,`${o}fts${i}.${s}`),this}match(t){return Object.entries(t).forEach(([s,r])=>{this.url.searchParams.append(s,`eq.${r}`)}),this}not(t,s,r){return this.url.searchParams.append(t,`not.${s}.${r}`),this}or(t,{foreignTable:s,referencedTable:r=s}={}){const n=r?`${r}.or`:"or";return this.url.searchParams.append(n,`(${t})`),this}filter(t,s,r){return this.url.searchParams.append(t,`${s}.${r}`),this}};Jr.default=E0;var C0=wt&&wt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(oo,"__esModule",{value:!0});const hr=C0(Jr);let S0=class{constructor(t,{headers:s={},schema:r,fetch:n}){this.url=t,this.headers=s,this.schema=r,this.fetch=n}select(t,{head:s=!1,count:r}={}){const n=s?"HEAD":"GET";let o=!1;const i=(t??"*").split("").map(a=>/\s/.test(a)&&!o?"":(a==='"'&&(o=!o),a)).join("");return this.url.searchParams.set("select",i),r&&(this.headers.Prefer=`count=${r}`),new hr.default({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(t,{count:s,defaultToNull:r=!0}={}){const n="POST",o=[];if(this.headers.Prefer&&o.push(this.headers.Prefer),s&&o.push(`count=${s}`),r||o.push("missing=default"),this.headers.Prefer=o.join(","),Array.isArray(t)){const i=t.reduce((a,l)=>a.concat(Object.keys(l)),[]);if(i.length>0){const a=[...new Set(i)].map(l=>`"${l}"`);this.url.searchParams.set("columns",a.join(","))}}return new hr.default({method:n,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}upsert(t,{onConflict:s,ignoreDuplicates:r=!1,count:n,defaultToNull:o=!0}={}){const i="POST",a=[`resolution=${r?"ignore":"merge"}-duplicates`];if(s!==void 0&&this.url.searchParams.set("on_conflict",s),this.headers.Prefer&&a.push(this.headers.Prefer),n&&a.push(`count=${n}`),o||a.push("missing=default"),this.headers.Prefer=a.join(","),Array.isArray(t)){const l=t.reduce((d,u)=>d.concat(Object.keys(u)),[]);if(l.length>0){const d=[...new Set(l)].map(u=>`"${u}"`);this.url.searchParams.set("columns",d.join(","))}}return new hr.default({method:i,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}update(t,{count:s}={}){const r="PATCH",n=[];return this.headers.Prefer&&n.push(this.headers.Prefer),s&&n.push(`count=${s}`),this.headers.Prefer=n.join(","),new hr.default({method:r,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}delete({count:t}={}){const s="DELETE",r=[];return t&&r.push(`count=${t}`),this.headers.Prefer&&r.unshift(this.headers.Prefer),this.headers.Prefer=r.join(","),new hr.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};oo.default=S0;var co={},uo={};Object.defineProperty(uo,"__esModule",{value:!0});uo.version=void 0;uo.version="0.0.0-automated";Object.defineProperty(co,"__esModule",{value:!0});co.DEFAULT_HEADERS=void 0;const T0=uo;co.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${T0.version}`};var _u=wt&&wt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(zi,"__esModule",{value:!0});const P0=_u(oo),A0=_u(Jr),R0=co;let j0=class wu{constructor(t,{headers:s={},schema:r,fetch:n}={}){this.url=t,this.headers=Object.assign(Object.assign({},R0.DEFAULT_HEADERS),s),this.schemaName=r,this.fetch=n}from(t){const s=new URL(`${this.url}/${t}`);return new P0.default(s,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new wu(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,s={},{head:r=!1,get:n=!1,count:o}={}){let i;const a=new URL(`${this.url}/rpc/${t}`);let l;r||n?(i=r?"HEAD":"GET",Object.entries(s).filter(([u,f])=>f!==void 0).map(([u,f])=>[u,Array.isArray(f)?`{${f.join(",")}}`:`${f}`]).forEach(([u,f])=>{a.searchParams.append(u,f)})):(i="POST",l=s);const d=Object.assign({},this.headers);return o&&(d.Prefer=`count=${o}`),new A0.default({method:i,url:a,headers:d,schema:this.schemaName,body:l,fetch:this.fetch,allowEmpty:!1})}};zi.default=j0;var ir=wt&&wt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ct,"__esModule",{value:!0});ct.PostgrestError=ct.PostgrestBuilder=ct.PostgrestTransformBuilder=ct.PostgrestFilterBuilder=ct.PostgrestQueryBuilder=ct.PostgrestClient=void 0;const xu=ir(zi);ct.PostgrestClient=xu.default;const ku=ir(oo);ct.PostgrestQueryBuilder=ku.default;const $u=ir(Jr);ct.PostgrestFilterBuilder=$u.default;const Eu=ir(io);ct.PostgrestTransformBuilder=Eu.default;const Cu=ir(ao);ct.PostgrestBuilder=Cu.default;const Su=ir(lo);ct.PostgrestError=Su.default;var O0=ct.default={PostgrestClient:xu.default,PostgrestQueryBuilder:ku.default,PostgrestFilterBuilder:$u.default,PostgrestTransformBuilder:Eu.default,PostgrestBuilder:Cu.default,PostgrestError:Su.default};const{PostgrestClient:I0,PostgrestQueryBuilder:h3,PostgrestFilterBuilder:p3,PostgrestTransformBuilder:m3,PostgrestBuilder:g3,PostgrestError:v3}=O0,M0="2.11.2",L0={"X-Client-Info":`realtime-js/${M0}`},D0="1.0.0",Tu=1e4,N0=1e3;var Js;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(Js||(Js={}));var ht;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(ht||(ht={}));var xt;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(xt||(xt={}));var ri;(function(e){e.websocket="websocket"})(ri||(ri={}));var Cs;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(Cs||(Cs={}));class F0{constructor(){this.HEADER_LENGTH=1}decode(t,s){return t.constructor===ArrayBuffer?s(this._binaryDecode(t)):s(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const s=new DataView(t),r=new TextDecoder;return this._decodeBroadcast(t,s,r)}_decodeBroadcast(t,s,r){const n=s.getUint8(1),o=s.getUint8(2);let i=this.HEADER_LENGTH+2;const a=r.decode(t.slice(i,i+n));i=i+n;const l=r.decode(t.slice(i,i+o));i=i+o;const d=JSON.parse(r.decode(t.slice(i,t.byteLength)));return{ref:null,topic:a,event:l,payload:d}}}class Pu{constructor(t,s){this.callback=t,this.timerCalc=s,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=s}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Me;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(Me||(Me={}));const dl=(e,t,s={})=>{var r;const n=(r=s.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(t).reduce((o,i)=>(o[i]=U0(i,e,t,n),o),{})},U0=(e,t,s,r)=>{const n=t.find(a=>a.name===e),o=n==null?void 0:n.type,i=s[e];return o&&!r.includes(o)?Au(o,i):ni(i)},Au=(e,t)=>{if(e.charAt(0)==="_"){const s=e.slice(1,e.length);return H0(t,s)}switch(e){case Me.bool:return B0(t);case Me.float4:case Me.float8:case Me.int2:case Me.int4:case Me.int8:case Me.numeric:case Me.oid:return z0(t);case Me.json:case Me.jsonb:return V0(t);case Me.timestamp:return q0(t);case Me.abstime:case Me.date:case Me.daterange:case Me.int4range:case Me.int8range:case Me.money:case Me.reltime:case Me.text:case Me.time:case Me.timestamptz:case Me.timetz:case Me.tsrange:case Me.tstzrange:return ni(t);default:return ni(t)}},ni=e=>e,B0=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},z0=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},V0=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},H0=(e,t)=>{if(typeof e!="string")return e;const s=e.length-1,r=e[s];if(e[0]==="{"&&r==="}"){let o;const i=e.slice(1,s);try{o=JSON.parse("["+i+"]")}catch{o=i?i.split(","):[]}return o.map(a=>Au(t,a))}return e},q0=e=>typeof e=="string"?e.replace(" ","T"):e,Ru=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")};class Ao{constructor(t,s,r={},n=Tu){this.channel=t,this.event=s,this.payload=r,this.timeout=n,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,s){var r;return this._hasReceived(t)&&s((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:t,callback:s}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=s=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=s,this._matchReceive(s)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,s){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:s})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:s}){this.recHooks.filter(r=>r.status===t).forEach(r=>r.callback(s))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var fl;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(fl||(fl={}));class Pr{constructor(t,s){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(s==null?void 0:s.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},n=>{const{onJoin:o,onLeave:i,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Pr.syncState(this.state,n,o,i),this.pendingDiffs.forEach(l=>{this.state=Pr.syncDiff(this.state,l,o,i)}),this.pendingDiffs=[],a()}),this.channel._on(r.diff,{},n=>{const{onJoin:o,onLeave:i,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(n):(this.state=Pr.syncDiff(this.state,n,o,i),a())}),this.onJoin((n,o,i)=>{this.channel._trigger("presence",{event:"join",key:n,currentPresences:o,newPresences:i})}),this.onLeave((n,o,i)=>{this.channel._trigger("presence",{event:"leave",key:n,currentPresences:o,leftPresences:i})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,s,r,n){const o=this.cloneDeep(t),i=this.transformState(s),a={},l={};return this.map(o,(d,u)=>{i[d]||(l[d]=u)}),this.map(i,(d,u)=>{const f=o[d];if(f){const h=u.map(S=>S.presence_ref),p=f.map(S=>S.presence_ref),x=u.filter(S=>p.indexOf(S.presence_ref)<0),w=f.filter(S=>h.indexOf(S.presence_ref)<0);x.length>0&&(a[d]=x),w.length>0&&(l[d]=w)}else a[d]=u}),this.syncDiff(o,{joins:a,leaves:l},r,n)}static syncDiff(t,s,r,n){const{joins:o,leaves:i}={joins:this.transformState(s.joins),leaves:this.transformState(s.leaves)};return r||(r=()=>{}),n||(n=()=>{}),this.map(o,(a,l)=>{var d;const u=(d=t[a])!==null&&d!==void 0?d:[];if(t[a]=this.cloneDeep(l),u.length>0){const f=t[a].map(p=>p.presence_ref),h=u.filter(p=>f.indexOf(p.presence_ref)<0);t[a].unshift(...h)}r(a,u,l)}),this.map(i,(a,l)=>{let d=t[a];if(!d)return;const u=l.map(f=>f.presence_ref);d=d.filter(f=>u.indexOf(f.presence_ref)<0),t[a]=d,n(a,d,l),d.length===0&&delete t[a]}),t}static map(t,s){return Object.getOwnPropertyNames(t).map(r=>s(r,t[r]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((s,r)=>{const n=t[r];return"metas"in n?s[r]=n.metas.map(o=>(o.presence_ref=o.phx_ref,delete o.phx_ref,delete o.phx_ref_prev,o)):s[r]=n,s},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var hl;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(hl||(hl={}));var pl;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(pl||(pl={}));var zt;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(zt||(zt={}));class Vi{constructor(t,s={config:{}},r){this.topic=t,this.params=s,this.socket=r,this.bindings={},this.state=ht.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},s.config),this.timeout=this.socket.timeout,this.joinPush=new Ao(this,xt.join,this.params,this.timeout),this.rejoinTimer=new Pu(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=ht.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(n=>n.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=ht.closed,this.socket._remove(this)}),this._onError(n=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,n),this.state=ht.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=ht.errored,this.rejoinTimer.scheduleTimeout())}),this._on(xt.reply,{},(n,o)=>{this._trigger(this._replyEventName(o),n)}),this.presence=new Pr(this),this.broadcastEndpointURL=Ru(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(t,s=this.timeout){var r,n;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:o,presence:i,private:a}}=this.params;this._onError(u=>t==null?void 0:t(zt.CHANNEL_ERROR,u)),this._onClose(()=>t==null?void 0:t(zt.CLOSED));const l={},d={broadcast:o,presence:i,postgres_changes:(n=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(u=>u.filter))!==null&&n!==void 0?n:[],private:a};this.socket.accessTokenValue&&(l.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:d},l)),this.joinedOnce=!0,this._rejoin(s),this.joinPush.receive("ok",async({postgres_changes:u})=>{var f;if(this.socket.setAuth(),u===void 0){t==null||t(zt.SUBSCRIBED);return}else{const h=this.bindings.postgres_changes,p=(f=h==null?void 0:h.length)!==null&&f!==void 0?f:0,x=[];for(let w=0;w<p;w++){const S=h[w],{filter:{event:R,schema:y,table:g,filter:$}}=S,D=u&&u[w];if(D&&D.event===R&&D.schema===y&&D.table===g&&D.filter===$)x.push(Object.assign(Object.assign({},S),{id:D.id}));else{this.unsubscribe(),t==null||t(zt.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=x,t&&t(zt.SUBSCRIBED);return}}).receive("error",u=>{t==null||t(zt.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(u).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(zt.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,s={}){return await this.send({type:"presence",event:"track",payload:t},s.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,s,r){return this._on(t,s,r)}async send(t,s={}){var r,n;if(!this._canPush()&&t.type==="broadcast"){const{event:o,payload:i}=t,l={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:o,payload:i,private:this.private}]})};try{const d=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(r=s.timeout)!==null&&r!==void 0?r:this.timeout);return await((n=d.body)===null||n===void 0?void 0:n.cancel()),d.ok?"ok":"error"}catch(d){return d.name==="AbortError"?"timed out":"error"}}else return new Promise(o=>{var i,a,l;const d=this._push(t.type,t,s.timeout||this.timeout);t.type==="broadcast"&&!(!((l=(a=(i=this.params)===null||i===void 0?void 0:i.config)===null||a===void 0?void 0:a.broadcast)===null||l===void 0)&&l.ack)&&o("ok"),d.receive("ok",()=>o("ok")),d.receive("error",()=>o("error")),d.receive("timeout",()=>o("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=ht.leaving;const s=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(xt.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise(r=>{const n=new Ao(this,xt.leave,{},t);n.receive("ok",()=>{s(),r("ok")}).receive("timeout",()=>{s(),r("timed out")}).receive("error",()=>{r("error")}),n.send(),this._canPush()||n.trigger("ok",{})})}async _fetchWithTimeout(t,s,r){const n=new AbortController,o=setTimeout(()=>n.abort(),r),i=await this.socket.fetch(t,Object.assign(Object.assign({},s),{signal:n.signal}));return clearTimeout(o),i}_push(t,s,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let n=new Ao(this,t,s,r);return this._canPush()?n.send():(n.startTimeout(),this.pushBuffer.push(n)),n}_onMessage(t,s,r){return s}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,s,r){var n,o;const i=t.toLocaleLowerCase(),{close:a,error:l,leave:d,join:u}=xt;if(r&&[a,l,d,u].indexOf(i)>=0&&r!==this._joinRef())return;let h=this._onMessage(i,s,r);if(s&&!h)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(i)?(n=this.bindings.postgres_changes)===null||n===void 0||n.filter(p=>{var x,w,S;return((x=p.filter)===null||x===void 0?void 0:x.event)==="*"||((S=(w=p.filter)===null||w===void 0?void 0:w.event)===null||S===void 0?void 0:S.toLocaleLowerCase())===i}).map(p=>p.callback(h,r)):(o=this.bindings[i])===null||o===void 0||o.filter(p=>{var x,w,S,R,y,g;if(["broadcast","presence","postgres_changes"].includes(i))if("id"in p){const $=p.id,D=(x=p.filter)===null||x===void 0?void 0:x.event;return $&&((w=s.ids)===null||w===void 0?void 0:w.includes($))&&(D==="*"||(D==null?void 0:D.toLocaleLowerCase())===((S=s.data)===null||S===void 0?void 0:S.type.toLocaleLowerCase()))}else{const $=(y=(R=p==null?void 0:p.filter)===null||R===void 0?void 0:R.event)===null||y===void 0?void 0:y.toLocaleLowerCase();return $==="*"||$===((g=s==null?void 0:s.event)===null||g===void 0?void 0:g.toLocaleLowerCase())}else return p.type.toLocaleLowerCase()===i}).map(p=>{if(typeof h=="object"&&"ids"in h){const x=h.data,{schema:w,table:S,commit_timestamp:R,type:y,errors:g}=x;h=Object.assign(Object.assign({},{schema:w,table:S,commit_timestamp:R,eventType:y,new:{},old:{},errors:g}),this._getPayloadRecords(x))}p.callback(h,r)})}_isClosed(){return this.state===ht.closed}_isJoined(){return this.state===ht.joined}_isJoining(){return this.state===ht.joining}_isLeaving(){return this.state===ht.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,s,r){const n=t.toLocaleLowerCase(),o={type:n,filter:s,callback:r};return this.bindings[n]?this.bindings[n].push(o):this.bindings[n]=[o],this}_off(t,s){const r=t.toLocaleLowerCase();return this.bindings[r]=this.bindings[r].filter(n=>{var o;return!(((o=n.type)===null||o===void 0?void 0:o.toLocaleLowerCase())===r&&Vi.isEqual(n.filter,s))}),this}static isEqual(t,s){if(Object.keys(t).length!==Object.keys(s).length)return!1;for(const r in t)if(t[r]!==s[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(xt.close,{},t)}_onError(t){this._on(xt.error,{},s=>t(s))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=ht.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const s={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(s.new=dl(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(s.old=dl(t.columns,t.old_record)),s}}const K0=()=>{},W0=typeof WebSocket<"u",G0=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class J0{constructor(t,s){var r;this.accessTokenValue=null,this.apiKey=null,this.channels=[],this.endPoint="",this.httpEndpoint="",this.headers=L0,this.params={},this.timeout=Tu,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=K0,this.conn=null,this.sendBuffer=[],this.serializer=new F0,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=o=>{let i;return o?i=o:typeof fetch>"u"?i=(...a)=>hs(async()=>{const{default:l}=await Promise.resolve().then(()=>or);return{default:l}},void 0).then(({default:l})=>l(...a)):i=fetch,(...a)=>i(...a)},this.endPoint=`${t}/${ri.websocket}`,this.httpEndpoint=Ru(t),s!=null&&s.transport?this.transport=s.transport:this.transport=null,s!=null&&s.params&&(this.params=s.params),s!=null&&s.headers&&(this.headers=Object.assign(Object.assign({},this.headers),s.headers)),s!=null&&s.timeout&&(this.timeout=s.timeout),s!=null&&s.logger&&(this.logger=s.logger),s!=null&&s.heartbeatIntervalMs&&(this.heartbeatIntervalMs=s.heartbeatIntervalMs);const n=(r=s==null?void 0:s.params)===null||r===void 0?void 0:r.apikey;if(n&&(this.accessTokenValue=n,this.apiKey=n),this.reconnectAfterMs=s!=null&&s.reconnectAfterMs?s.reconnectAfterMs:o=>[1e3,2e3,5e3,1e4][o-1]||1e4,this.encode=s!=null&&s.encode?s.encode:(o,i)=>i(JSON.stringify(o)),this.decode=s!=null&&s.decode?s.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new Pu(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(s==null?void 0:s.fetch),s!=null&&s.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(s==null?void 0:s.worker)||!1,this.workerUrl=s==null?void 0:s.workerUrl}this.accessToken=(s==null?void 0:s.accessToken)||null}connect(){if(!this.conn){if(this.transport){this.conn=new this.transport(this.endpointURL(),void 0,{headers:this.headers});return}if(W0){this.conn=new WebSocket(this.endpointURL()),this.setupConnection();return}this.conn=new Q0(this.endpointURL(),void 0,{close:()=>{this.conn=null}}),hs(async()=>{const{default:t}=await import("./browser-DTz-czOd.js").then(s=>s.b);return{default:t}},[]).then(({default:t})=>{this.conn=new t(this.endpointURL(),void 0,{headers:this.headers}),this.setupConnection()})}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:D0}))}disconnect(t,s){this.conn&&(this.conn.onclose=function(){},t?this.conn.close(t,s??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}async removeChannel(t){const s=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),s}async removeAllChannels(){const t=await Promise.all(this.channels.map(s=>s.unsubscribe()));return this.disconnect(),t}log(t,s,r){this.logger(t,s,r)}connectionState(){switch(this.conn&&this.conn.readyState){case Js.connecting:return Cs.Connecting;case Js.open:return Cs.Open;case Js.closing:return Cs.Closing;default:return Cs.Closed}}isConnected(){return this.connectionState()===Cs.Open}channel(t,s={config:{}}){const r=new Vi(`realtime:${t}`,s,this);return this.channels.push(r),r}push(t){const{topic:s,event:r,payload:n,ref:o}=t,i=()=>{this.encode(t,a=>{var l;(l=this.conn)===null||l===void 0||l.send(a)})};this.log("push",`${s} ${r} (${o})`,n),this.isConnected()?i():this.sendBuffer.push(i)}async setAuth(t=null){let s=t||this.accessToken&&await this.accessToken()||this.accessTokenValue;if(s){let r=null;try{r=JSON.parse(atob(s.split(".")[1]))}catch{}if(r&&r.exp&&!(Math.floor(Date.now()/1e3)-r.exp<0))return this.log("auth",`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${r.exp}`),Promise.reject(`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${r.exp}`);this.accessTokenValue=s,this.channels.forEach(n=>{s&&n.updateJoinPayload({access_token:s}),n.joinedOnce&&n._isJoined()&&n._push(xt.access_token,{access_token:s})})}}async sendHeartbeat(){var t;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),(t=this.conn)===null||t===void 0||t.close(N0,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth()}}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let s=this.channels.find(r=>r.topic===t&&(r._isJoined()||r._isJoining()));s&&(this.log("transport",`leaving duplicate topic "${t}"`),s.unsubscribe())}_remove(t){this.channels=this.channels.filter(s=>s._joinRef()!==t._joinRef())}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_onConnMessage(t){this.decode(t.data,s=>{let{topic:r,event:n,payload:o,ref:i}=s;i&&i===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${o.status||""} ${r} ${n} ${i&&"("+i+")"||""}`,o),this.channels.filter(a=>a._isMember(r)).forEach(a=>a._trigger(n,o,i)),this.stateChangeCallbacks.message.forEach(a=>a(s))})}async _onConnOpen(){if(this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),!this.worker)this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs);else{this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=s=>{this.log("worker","worker error",s.message),this.workerRef.terminate()},this.workerRef.onmessage=s=>{s.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}this.stateChangeCallbacks.open.forEach(t=>t())}_onConnClose(t){this.log("transport","close",t),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(s=>s(t))}_onConnError(t){this.log("transport",t.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(s=>s(t))}_triggerChanError(){this.channels.forEach(t=>t._trigger(xt.error))}_appendParams(t,s){if(Object.keys(s).length===0)return t;const r=t.match(/\?/)?"&":"?",n=new URLSearchParams(s);return`${t}${r}${n}`}_workerObjectUrl(t){let s;if(t)s=t;else{const r=new Blob([G0],{type:"application/javascript"});s=URL.createObjectURL(r)}return s}}class Q0{constructor(t,s,r){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=Js.connecting,this.send=()=>{},this.url=null,this.url=t,this.close=r.close}}class Hi extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function Je(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class Y0 extends Hi{constructor(t,s){super(t),this.name="StorageApiError",this.status=s}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class oi extends Hi{constructor(t,s){super(t),this.name="StorageUnknownError",this.originalError=s}}var X0=function(e,t,s,r){function n(o){return o instanceof s?o:new s(function(i){i(o)})}return new(s||(s=Promise))(function(o,i){function a(u){try{d(r.next(u))}catch(f){i(f)}}function l(u){try{d(r.throw(u))}catch(f){i(f)}}function d(u){u.done?o(u.value):n(u.value).then(a,l)}d((r=r.apply(e,t||[])).next())})};const ju=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...s)=>hs(async()=>{const{default:r}=await Promise.resolve().then(()=>or);return{default:r}},void 0).then(({default:r})=>r(...s)):t=fetch,(...s)=>t(...s)},Z0=()=>X0(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield hs(()=>Promise.resolve().then(()=>or),void 0)).Response:Response}),ii=e=>{if(Array.isArray(e))return e.map(s=>ii(s));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([s,r])=>{const n=s.replace(/([-_][a-z])/gi,o=>o.toUpperCase().replace(/[-_]/g,""));t[n]=ii(r)}),t};var Ls=function(e,t,s,r){function n(o){return o instanceof s?o:new s(function(i){i(o)})}return new(s||(s=Promise))(function(o,i){function a(u){try{d(r.next(u))}catch(f){i(f)}}function l(u){try{d(r.throw(u))}catch(f){i(f)}}function d(u){u.done?o(u.value):n(u.value).then(a,l)}d((r=r.apply(e,t||[])).next())})};const Ro=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),em=(e,t,s)=>Ls(void 0,void 0,void 0,function*(){const r=yield Z0();e instanceof r&&!(s!=null&&s.noResolveJson)?e.json().then(n=>{t(new Y0(Ro(n),e.status||500))}).catch(n=>{t(new oi(Ro(n),n))}):t(new oi(Ro(e),e))}),tm=(e,t,s,r)=>{const n={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?n:(n.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),r&&(n.body=JSON.stringify(r)),Object.assign(Object.assign({},n),s))};function Qr(e,t,s,r,n,o){return Ls(this,void 0,void 0,function*(){return new Promise((i,a)=>{e(s,tm(t,r,n,o)).then(l=>{if(!l.ok)throw l;return r!=null&&r.noResolveJson?l:l.json()}).then(l=>i(l)).catch(l=>em(l,a,r))})})}function Mn(e,t,s,r){return Ls(this,void 0,void 0,function*(){return Qr(e,"GET",t,s,r)})}function as(e,t,s,r,n){return Ls(this,void 0,void 0,function*(){return Qr(e,"POST",t,r,n,s)})}function sm(e,t,s,r,n){return Ls(this,void 0,void 0,function*(){return Qr(e,"PUT",t,r,n,s)})}function rm(e,t,s,r){return Ls(this,void 0,void 0,function*(){return Qr(e,"HEAD",t,Object.assign(Object.assign({},s),{noResolveJson:!0}),r)})}function Ou(e,t,s,r,n){return Ls(this,void 0,void 0,function*(){return Qr(e,"DELETE",t,r,n,s)})}var lt=function(e,t,s,r){function n(o){return o instanceof s?o:new s(function(i){i(o)})}return new(s||(s=Promise))(function(o,i){function a(u){try{d(r.next(u))}catch(f){i(f)}}function l(u){try{d(r.throw(u))}catch(f){i(f)}}function d(u){u.done?o(u.value):n(u.value).then(a,l)}d((r=r.apply(e,t||[])).next())})};const nm={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},ml={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class om{constructor(t,s={},r,n){this.url=t,this.headers=s,this.bucketId=r,this.fetch=ju(n)}uploadOrUpdate(t,s,r,n){return lt(this,void 0,void 0,function*(){try{let o;const i=Object.assign(Object.assign({},ml),n);let a=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(i.upsert)});const l=i.metadata;typeof Blob<"u"&&r instanceof Blob?(o=new FormData,o.append("cacheControl",i.cacheControl),l&&o.append("metadata",this.encodeMetadata(l)),o.append("",r)):typeof FormData<"u"&&r instanceof FormData?(o=r,o.append("cacheControl",i.cacheControl),l&&o.append("metadata",this.encodeMetadata(l))):(o=r,a["cache-control"]=`max-age=${i.cacheControl}`,a["content-type"]=i.contentType,l&&(a["x-metadata"]=this.toBase64(this.encodeMetadata(l)))),n!=null&&n.headers&&(a=Object.assign(Object.assign({},a),n.headers));const d=this._removeEmptyFolders(s),u=this._getFinalPath(d),f=yield this.fetch(`${this.url}/object/${u}`,Object.assign({method:t,body:o,headers:a},i!=null&&i.duplex?{duplex:i.duplex}:{})),h=yield f.json();return f.ok?{data:{path:d,id:h.Id,fullPath:h.Key},error:null}:{data:null,error:h}}catch(o){if(Je(o))return{data:null,error:o};throw o}})}upload(t,s,r){return lt(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,s,r)})}uploadToSignedUrl(t,s,r,n){return lt(this,void 0,void 0,function*(){const o=this._removeEmptyFolders(t),i=this._getFinalPath(o),a=new URL(this.url+`/object/upload/sign/${i}`);a.searchParams.set("token",s);try{let l;const d=Object.assign({upsert:ml.upsert},n),u=Object.assign(Object.assign({},this.headers),{"x-upsert":String(d.upsert)});typeof Blob<"u"&&r instanceof Blob?(l=new FormData,l.append("cacheControl",d.cacheControl),l.append("",r)):typeof FormData<"u"&&r instanceof FormData?(l=r,l.append("cacheControl",d.cacheControl)):(l=r,u["cache-control"]=`max-age=${d.cacheControl}`,u["content-type"]=d.contentType);const f=yield this.fetch(a.toString(),{method:"PUT",body:l,headers:u}),h=yield f.json();return f.ok?{data:{path:o,fullPath:h.Key},error:null}:{data:null,error:h}}catch(l){if(Je(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(t,s){return lt(this,void 0,void 0,function*(){try{let r=this._getFinalPath(t);const n=Object.assign({},this.headers);s!=null&&s.upsert&&(n["x-upsert"]="true");const o=yield as(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:n}),i=new URL(this.url+o.url),a=i.searchParams.get("token");if(!a)throw new Hi("No token returned by API");return{data:{signedUrl:i.toString(),path:t,token:a},error:null}}catch(r){if(Je(r))return{data:null,error:r};throw r}})}update(t,s,r){return lt(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,s,r)})}move(t,s,r){return lt(this,void 0,void 0,function*(){try{return{data:yield as(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:s,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(n){if(Je(n))return{data:null,error:n};throw n}})}copy(t,s,r){return lt(this,void 0,void 0,function*(){try{return{data:{path:(yield as(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:s,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(n){if(Je(n))return{data:null,error:n};throw n}})}createSignedUrl(t,s,r){return lt(this,void 0,void 0,function*(){try{let n=this._getFinalPath(t),o=yield as(this.fetch,`${this.url}/object/sign/${n}`,Object.assign({expiresIn:s},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const i=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return o={signedUrl:encodeURI(`${this.url}${o.signedURL}${i}`)},{data:o,error:null}}catch(n){if(Je(n))return{data:null,error:n};throw n}})}createSignedUrls(t,s,r){return lt(this,void 0,void 0,function*(){try{const n=yield as(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:s,paths:t},{headers:this.headers}),o=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:n.map(i=>Object.assign(Object.assign({},i),{signedUrl:i.signedURL?encodeURI(`${this.url}${i.signedURL}${o}`):null})),error:null}}catch(n){if(Je(n))return{data:null,error:n};throw n}})}download(t,s){return lt(this,void 0,void 0,function*(){const n=typeof(s==null?void 0:s.transform)<"u"?"render/image/authenticated":"object",o=this.transformOptsToQueryString((s==null?void 0:s.transform)||{}),i=o?`?${o}`:"";try{const a=this._getFinalPath(t);return{data:yield(yield Mn(this.fetch,`${this.url}/${n}/${a}${i}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(a){if(Je(a))return{data:null,error:a};throw a}})}info(t){return lt(this,void 0,void 0,function*(){const s=this._getFinalPath(t);try{const r=yield Mn(this.fetch,`${this.url}/object/info/${s}`,{headers:this.headers});return{data:ii(r),error:null}}catch(r){if(Je(r))return{data:null,error:r};throw r}})}exists(t){return lt(this,void 0,void 0,function*(){const s=this._getFinalPath(t);try{return yield rm(this.fetch,`${this.url}/object/${s}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(Je(r)&&r instanceof oi){const n=r.originalError;if([400,404].includes(n==null?void 0:n.status))return{data:!1,error:r}}throw r}})}getPublicUrl(t,s){const r=this._getFinalPath(t),n=[],o=s!=null&&s.download?`download=${s.download===!0?"":s.download}`:"";o!==""&&n.push(o);const a=typeof(s==null?void 0:s.transform)<"u"?"render/image":"object",l=this.transformOptsToQueryString((s==null?void 0:s.transform)||{});l!==""&&n.push(l);let d=n.join("&");return d!==""&&(d=`?${d}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${r}${d}`)}}}remove(t){return lt(this,void 0,void 0,function*(){try{return{data:yield Ou(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(s){if(Je(s))return{data:null,error:s};throw s}})}list(t,s,r){return lt(this,void 0,void 0,function*(){try{const n=Object.assign(Object.assign(Object.assign({},nm),s),{prefix:t||""});return{data:yield as(this.fetch,`${this.url}/object/list/${this.bucketId}`,n,{headers:this.headers},r),error:null}}catch(n){if(Je(n))return{data:null,error:n};throw n}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const s=[];return t.width&&s.push(`width=${t.width}`),t.height&&s.push(`height=${t.height}`),t.resize&&s.push(`resize=${t.resize}`),t.format&&s.push(`format=${t.format}`),t.quality&&s.push(`quality=${t.quality}`),s.join("&")}}const im="2.7.1",am={"X-Client-Info":`storage-js/${im}`};var Fs=function(e,t,s,r){function n(o){return o instanceof s?o:new s(function(i){i(o)})}return new(s||(s=Promise))(function(o,i){function a(u){try{d(r.next(u))}catch(f){i(f)}}function l(u){try{d(r.throw(u))}catch(f){i(f)}}function d(u){u.done?o(u.value):n(u.value).then(a,l)}d((r=r.apply(e,t||[])).next())})};class lm{constructor(t,s={},r){this.url=t,this.headers=Object.assign(Object.assign({},am),s),this.fetch=ju(r)}listBuckets(){return Fs(this,void 0,void 0,function*(){try{return{data:yield Mn(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(Je(t))return{data:null,error:t};throw t}})}getBucket(t){return Fs(this,void 0,void 0,function*(){try{return{data:yield Mn(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(s){if(Je(s))return{data:null,error:s};throw s}})}createBucket(t,s={public:!1}){return Fs(this,void 0,void 0,function*(){try{return{data:yield as(this.fetch,`${this.url}/bucket`,{id:t,name:t,public:s.public,file_size_limit:s.fileSizeLimit,allowed_mime_types:s.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(Je(r))return{data:null,error:r};throw r}})}updateBucket(t,s){return Fs(this,void 0,void 0,function*(){try{return{data:yield sm(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:s.public,file_size_limit:s.fileSizeLimit,allowed_mime_types:s.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(Je(r))return{data:null,error:r};throw r}})}emptyBucket(t){return Fs(this,void 0,void 0,function*(){try{return{data:yield as(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(s){if(Je(s))return{data:null,error:s};throw s}})}deleteBucket(t){return Fs(this,void 0,void 0,function*(){try{return{data:yield Ou(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(s){if(Je(s))return{data:null,error:s};throw s}})}}class cm extends lm{constructor(t,s={},r){super(t,s,r)}from(t){return new om(this.url,this.headers,t,this.fetch)}}const um="2.49.4";let yr="";typeof Deno<"u"?yr="deno":typeof document<"u"?yr="web":typeof navigator<"u"&&navigator.product==="ReactNative"?yr="react-native":yr="node";const dm={"X-Client-Info":`supabase-js-${yr}/${um}`},fm={headers:dm},hm={schema:"public"},pm={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},mm={};var gm=function(e,t,s,r){function n(o){return o instanceof s?o:new s(function(i){i(o)})}return new(s||(s=Promise))(function(o,i){function a(u){try{d(r.next(u))}catch(f){i(f)}}function l(u){try{d(r.throw(u))}catch(f){i(f)}}function d(u){u.done?o(u.value):n(u.value).then(a,l)}d((r=r.apply(e,t||[])).next())})};const vm=e=>{let t;return e?t=e:typeof fetch>"u"?t=vu:t=fetch,(...s)=>t(...s)},ym=()=>typeof Headers>"u"?yu:Headers,bm=(e,t,s)=>{const r=vm(s),n=ym();return(o,i)=>gm(void 0,void 0,void 0,function*(){var a;const l=(a=yield t())!==null&&a!==void 0?a:e;let d=new n(i==null?void 0:i.headers);return d.has("apikey")||d.set("apikey",e),d.has("Authorization")||d.set("Authorization",`Bearer ${l}`),r(o,Object.assign(Object.assign({},i),{headers:d}))})};var _m=function(e,t,s,r){function n(o){return o instanceof s?o:new s(function(i){i(o)})}return new(s||(s=Promise))(function(o,i){function a(u){try{d(r.next(u))}catch(f){i(f)}}function l(u){try{d(r.throw(u))}catch(f){i(f)}}function d(u){u.done?o(u.value):n(u.value).then(a,l)}d((r=r.apply(e,t||[])).next())})};function wm(e){return e.replace(/\/$/,"")}function xm(e,t){const{db:s,auth:r,realtime:n,global:o}=e,{db:i,auth:a,realtime:l,global:d}=t,u={db:Object.assign(Object.assign({},i),s),auth:Object.assign(Object.assign({},a),r),realtime:Object.assign(Object.assign({},l),n),global:Object.assign(Object.assign({},d),o),accessToken:()=>_m(this,void 0,void 0,function*(){return""})};return e.accessToken?u.accessToken=e.accessToken:delete u.accessToken,u}const Iu="2.69.1",Hs=30*1e3,ai=3,jo=ai*Hs,km="http://localhost:9999",$m="supabase.auth.token",Em={"X-Client-Info":`gotrue-js/${Iu}`},li="X-Supabase-Api-Version",Mu={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},Cm=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,Sm=6e5;class qi extends Error{constructor(t,s,r){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=s,this.code=r}}function ve(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class Tm extends qi{constructor(t,s,r){super(t,s,r),this.name="AuthApiError",this.status=s,this.code=r}}function Pm(e){return ve(e)&&e.name==="AuthApiError"}class Lu extends qi{constructor(t,s){super(t),this.name="AuthUnknownError",this.originalError=s}}class vs extends qi{constructor(t,s,r,n){super(t,r,n),this.name=s,this.status=r}}class ts extends vs{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Am(e){return ve(e)&&e.name==="AuthSessionMissingError"}class Oo extends vs{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class cn extends vs{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class un extends vs{constructor(t,s=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function Rm(e){return ve(e)&&e.name==="AuthImplicitGrantRedirectError"}class gl extends vs{constructor(t,s=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class ci extends vs{constructor(t,s){super(t,"AuthRetryableFetchError",s,void 0)}}function Io(e){return ve(e)&&e.name==="AuthRetryableFetchError"}class vl extends vs{constructor(t,s,r){super(t,"AuthWeakPasswordError",s,"weak_password"),this.reasons=r}}class Ar extends vs{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const yl="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),bl=` 	
\r=`.split(""),jm=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<bl.length;t+=1)e[bl[t].charCodeAt(0)]=-2;for(let t=0;t<yl.length;t+=1)e[yl[t].charCodeAt(0)]=t;return e})();function Du(e,t,s){const r=jm[e];if(r>-1)for(t.queue=t.queue<<6|r,t.queuedBits+=6;t.queuedBits>=8;)s(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function _l(e){const t=[],s=i=>{t.push(String.fromCodePoint(i))},r={utf8seq:0,codepoint:0},n={queue:0,queuedBits:0},o=i=>{Mm(i,r,s)};for(let i=0;i<e.length;i+=1)Du(e.charCodeAt(i),n,o);return t.join("")}function Om(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function Im(e,t){for(let s=0;s<e.length;s+=1){let r=e.charCodeAt(s);if(r>55295&&r<=56319){const n=(r-55296)*1024&65535;r=(e.charCodeAt(s+1)-56320&65535|n)+65536,s+=1}Om(r,t)}}function Mm(e,t,s){if(t.utf8seq===0){if(e<=127){s(e);return}for(let r=1;r<6;r+=1)if(!(e>>7-r&1)){t.utf8seq=r;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&s(t.codepoint)}}function Lm(e){const t=[],s={queue:0,queuedBits:0},r=n=>{t.push(n)};for(let n=0;n<e.length;n+=1)Du(e.charCodeAt(n),s,r);return new Uint8Array(t)}function Dm(e){const t=[];return Im(e,s=>t.push(s)),new Uint8Array(t)}function Nm(e){return Math.round(Date.now()/1e3)+e}function Fm(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const Ot=()=>typeof window<"u"&&typeof document<"u",ws={tested:!1,writable:!1},Rr=()=>{if(!Ot())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(ws.tested)return ws.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),ws.tested=!0,ws.writable=!0}catch{ws.tested=!0,ws.writable=!1}return ws.writable};function Um(e){const t={},s=new URL(e);if(s.hash&&s.hash[0]==="#")try{new URLSearchParams(s.hash.substring(1)).forEach((n,o)=>{t[o]=n})}catch{}return s.searchParams.forEach((r,n)=>{t[n]=r}),t}const Nu=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...s)=>hs(async()=>{const{default:r}=await Promise.resolve().then(()=>or);return{default:r}},void 0).then(({default:r})=>r(...s)):t=fetch,(...s)=>t(...s)},Bm=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",Fu=async(e,t,s)=>{await e.setItem(t,JSON.stringify(s))},dn=async(e,t)=>{const s=await e.getItem(t);if(!s)return null;try{return JSON.parse(s)}catch{return s}},fn=async(e,t)=>{await e.removeItem(t)};class fo{constructor(){this.promise=new fo.promiseConstructor((t,s)=>{this.resolve=t,this.reject=s})}}fo.promiseConstructor=Promise;function Mo(e){const t=e.split(".");if(t.length!==3)throw new Ar("Invalid JWT structure");for(let r=0;r<t.length;r++)if(!Cm.test(t[r]))throw new Ar("JWT not in base64url format");return{header:JSON.parse(_l(t[0])),payload:JSON.parse(_l(t[1])),signature:Lm(t[2]),raw:{header:t[0],payload:t[1]}}}async function zm(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function Vm(e,t){return new Promise((r,n)=>{(async()=>{for(let o=0;o<1/0;o++)try{const i=await e(o);if(!t(o,null,i)){r(i);return}}catch(i){if(!t(o,i)){n(i);return}}})()})}function Hm(e){return("0"+e.toString(16)).substr(-2)}function qm(){const t=new Uint32Array(56);if(typeof crypto>"u"){const s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=s.length;let n="";for(let o=0;o<56;o++)n+=s.charAt(Math.floor(Math.random()*r));return n}return crypto.getRandomValues(t),Array.from(t,Hm).join("")}async function Km(e){const s=new TextEncoder().encode(e),r=await crypto.subtle.digest("SHA-256",s),n=new Uint8Array(r);return Array.from(n).map(o=>String.fromCharCode(o)).join("")}async function Wm(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const s=await Km(e);return btoa(s).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Us(e,t,s=!1){const r=qm();let n=r;s&&(n+="/PASSWORD_RECOVERY"),await Fu(e,`${t}-code-verifier`,n);const o=await Wm(r);return[o,r===o?"plain":"s256"]}const Gm=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Jm(e){const t=e.headers.get(li);if(!t||!t.match(Gm))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function Qm(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function Ym(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}var Xm=function(e,t){var s={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(s[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,r=Object.getOwnPropertySymbols(e);n<r.length;n++)t.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(e,r[n])&&(s[r[n]]=e[r[n]]);return s};const $s=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),Zm=[502,503,504];async function wl(e){var t;if(!Bm(e))throw new ci($s(e),0);if(Zm.includes(e.status))throw new ci($s(e),e.status);let s;try{s=await e.json()}catch(o){throw new Lu($s(o),o)}let r;const n=Jm(e);if(n&&n.getTime()>=Mu["2024-01-01"].timestamp&&typeof s=="object"&&s&&typeof s.code=="string"?r=s.code:typeof s=="object"&&s&&typeof s.error_code=="string"&&(r=s.error_code),r){if(r==="weak_password")throw new vl($s(s),e.status,((t=s.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(r==="session_not_found")throw new ts}else if(typeof s=="object"&&s&&typeof s.weak_password=="object"&&s.weak_password&&Array.isArray(s.weak_password.reasons)&&s.weak_password.reasons.length&&s.weak_password.reasons.reduce((o,i)=>o&&typeof i=="string",!0))throw new vl($s(s),e.status,s.weak_password.reasons);throw new Tm($s(s),e.status||500,r)}const eg=(e,t,s,r)=>{const n={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?n:(n.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),n.body=JSON.stringify(r),Object.assign(Object.assign({},n),s))};async function _e(e,t,s,r){var n;const o=Object.assign({},r==null?void 0:r.headers);o[li]||(o[li]=Mu["2024-01-01"].name),r!=null&&r.jwt&&(o.Authorization=`Bearer ${r.jwt}`);const i=(n=r==null?void 0:r.query)!==null&&n!==void 0?n:{};r!=null&&r.redirectTo&&(i.redirect_to=r.redirectTo);const a=Object.keys(i).length?"?"+new URLSearchParams(i).toString():"",l=await tg(e,t,s+a,{headers:o,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(l):{data:Object.assign({},l),error:null}}async function tg(e,t,s,r,n,o){const i=eg(t,r,n,o);let a;try{a=await e(s,Object.assign({},i))}catch(l){throw console.error(l),new ci($s(l),0)}if(a.ok||await wl(a),r!=null&&r.noResolveJson)return a;try{return await a.json()}catch(l){await wl(l)}}function ss(e){var t;let s=null;og(e)&&(s=Object.assign({},e),e.expires_at||(s.expires_at=Nm(e.expires_in)));const r=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:s,user:r},error:null}}function xl(e){const t=ss(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((s,r)=>s&&typeof r=="string",!0)&&(t.data.weak_password=e.weak_password),t}function ls(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function sg(e){return{data:e,error:null}}function rg(e){const{action_link:t,email_otp:s,hashed_token:r,redirect_to:n,verification_type:o}=e,i=Xm(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:t,email_otp:s,hashed_token:r,redirect_to:n,verification_type:o},l=Object.assign({},i);return{data:{properties:a,user:l},error:null}}function ng(e){return e}function og(e){return e.access_token&&e.refresh_token&&e.expires_in}var ig=function(e,t){var s={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(s[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,r=Object.getOwnPropertySymbols(e);n<r.length;n++)t.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(e,r[n])&&(s[r[n]]=e[r[n]]);return s};class ag{constructor({url:t="",headers:s={},fetch:r}){this.url=t,this.headers=s,this.fetch=Nu(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(t,s="global"){try{return await _e(this.fetch,"POST",`${this.url}/logout?scope=${s}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(r){if(ve(r))return{data:null,error:r};throw r}}async inviteUserByEmail(t,s={}){try{return await _e(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:s.data},headers:this.headers,redirectTo:s.redirectTo,xform:ls})}catch(r){if(ve(r))return{data:{user:null},error:r};throw r}}async generateLink(t){try{const{options:s}=t,r=ig(t,["options"]),n=Object.assign(Object.assign({},r),s);return"newEmail"in r&&(n.new_email=r==null?void 0:r.newEmail,delete n.newEmail),await _e(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:n,headers:this.headers,xform:rg,redirectTo:s==null?void 0:s.redirectTo})}catch(s){if(ve(s))return{data:{properties:null,user:null},error:s};throw s}}async createUser(t){try{return await _e(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:ls})}catch(s){if(ve(s))return{data:{user:null},error:s};throw s}}async listUsers(t){var s,r,n,o,i,a,l;try{const d={nextPage:null,lastPage:0,total:0},u=await _e(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(s=t==null?void 0:t.page)===null||s===void 0?void 0:s.toString())!==null&&r!==void 0?r:"",per_page:(o=(n=t==null?void 0:t.perPage)===null||n===void 0?void 0:n.toString())!==null&&o!==void 0?o:""},xform:ng});if(u.error)throw u.error;const f=await u.json(),h=(i=u.headers.get("x-total-count"))!==null&&i!==void 0?i:0,p=(l=(a=u.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return p.length>0&&(p.forEach(x=>{const w=parseInt(x.split(";")[0].split("=")[1].substring(0,1)),S=JSON.parse(x.split(";")[1].split("=")[1]);d[`${S}Page`]=w}),d.total=parseInt(h)),{data:Object.assign(Object.assign({},f),d),error:null}}catch(d){if(ve(d))return{data:{users:[]},error:d};throw d}}async getUserById(t){try{return await _e(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:ls})}catch(s){if(ve(s))return{data:{user:null},error:s};throw s}}async updateUserById(t,s){try{return await _e(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:s,headers:this.headers,xform:ls})}catch(r){if(ve(r))return{data:{user:null},error:r};throw r}}async deleteUser(t,s=!1){try{return await _e(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:s},xform:ls})}catch(r){if(ve(r))return{data:{user:null},error:r};throw r}}async _listFactors(t){try{const{data:s,error:r}=await _e(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:n=>({data:{factors:n},error:null})});return{data:s,error:r}}catch(s){if(ve(s))return{data:null,error:s};throw s}}async _deleteFactor(t){try{return{data:await _e(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(s){if(ve(s))return{data:null,error:s};throw s}}}const lg={getItem:e=>Rr()?globalThis.localStorage.getItem(e):null,setItem:(e,t)=>{Rr()&&globalThis.localStorage.setItem(e,t)},removeItem:e=>{Rr()&&globalThis.localStorage.removeItem(e)}};function kl(e={}){return{getItem:t=>e[t]||null,setItem:(t,s)=>{e[t]=s},removeItem:t=>{delete e[t]}}}function cg(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Bs={debug:!!(globalThis&&Rr()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Uu extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class ug extends Uu{}async function dg(e,t,s){Bs.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const r=new globalThis.AbortController;return t>0&&setTimeout(()=>{r.abort(),Bs.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async n=>{if(n){Bs.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,n.name);try{return await s()}finally{Bs.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,n.name)}}else{if(t===0)throw Bs.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new ug(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(Bs.debug)try{const o=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(o,null,"  "))}catch(o){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",o)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await s()}}))}cg();const fg={url:km,storageKey:$m,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Em,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function $l(e,t,s){return await s()}class Vr{constructor(t){var s,r;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Vr.nextInstanceID,Vr.nextInstanceID+=1,this.instanceID>0&&Ot()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const n=Object.assign(Object.assign({},fg),t);if(this.logDebugMessages=!!n.debug,typeof n.debug=="function"&&(this.logger=n.debug),this.persistSession=n.persistSession,this.storageKey=n.storageKey,this.autoRefreshToken=n.autoRefreshToken,this.admin=new ag({url:n.url,headers:n.headers,fetch:n.fetch}),this.url=n.url,this.headers=n.headers,this.fetch=Nu(n.fetch),this.lock=n.lock||$l,this.detectSessionInUrl=n.detectSessionInUrl,this.flowType=n.flowType,this.hasCustomAuthorizationHeader=n.hasCustomAuthorizationHeader,n.lock?this.lock=n.lock:Ot()&&(!((s=globalThis==null?void 0:globalThis.navigator)===null||s===void 0)&&s.locks)?this.lock=dg:this.lock=$l,this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?n.storage?this.storage=n.storage:Rr()?this.storage=lg:(this.memoryStorage={},this.storage=kl(this.memoryStorage)):(this.memoryStorage={},this.storage=kl(this.memoryStorage)),Ot()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",o)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async o=>{this._debug("received broadcast notification from other tab or client",o),await this._notifyAllSubscribers(o.data.event,o.data.session,!1)})}this.initialize()}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Iu}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{const s=Um(window.location.href);let r="none";if(this._isImplicitGrantCallback(s)?r="implicit":await this._isPKCECallback(s)&&(r="pkce"),Ot()&&this.detectSessionInUrl&&r!=="none"){const{data:n,error:o}=await this._getSessionFromURL(s,r);if(o){if(this._debug("#_initialize()","error detecting session from URL",o),Rm(o)){const l=(t=o.details)===null||t===void 0?void 0:t.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:o}}return await this._removeSession(),{error:o}}const{session:i,redirectType:a}=n;return this._debug("#_initialize()","detected session in URL",i,"redirect type",a),await this._saveSession(i),setTimeout(async()=>{a==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",i):await this._notifyAllSubscribers("SIGNED_IN",i)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(s){return ve(s)?{error:s}:{error:new Lu("Unexpected error during initialization",s)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var s,r,n;try{const o=await _e(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(s=t==null?void 0:t.options)===null||s===void 0?void 0:s.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(n=t==null?void 0:t.options)===null||n===void 0?void 0:n.captchaToken}},xform:ss}),{data:i,error:a}=o;if(a||!i)return{data:{user:null,session:null},error:a};const l=i.session,d=i.user;return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:d,session:l},error:null}}catch(o){if(ve(o))return{data:{user:null,session:null},error:o};throw o}}async signUp(t){var s,r,n;try{let o;if("email"in t){const{email:u,password:f,options:h}=t;let p=null,x=null;this.flowType==="pkce"&&([p,x]=await Us(this.storage,this.storageKey)),o=await _e(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:h==null?void 0:h.emailRedirectTo,body:{email:u,password:f,data:(s=h==null?void 0:h.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken},code_challenge:p,code_challenge_method:x},xform:ss})}else if("phone"in t){const{phone:u,password:f,options:h}=t;o=await _e(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:u,password:f,data:(r=h==null?void 0:h.data)!==null&&r!==void 0?r:{},channel:(n=h==null?void 0:h.channel)!==null&&n!==void 0?n:"sms",gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}},xform:ss})}else throw new cn("You must provide either an email or phone number and a password");const{data:i,error:a}=o;if(a||!i)return{data:{user:null,session:null},error:a};const l=i.session,d=i.user;return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:d,session:l},error:null}}catch(o){if(ve(o))return{data:{user:null,session:null},error:o};throw o}}async signInWithPassword(t){try{let s;if("email"in t){const{email:o,password:i,options:a}=t;s=await _e(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:o,password:i,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:xl})}else if("phone"in t){const{phone:o,password:i,options:a}=t;s=await _e(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:o,password:i,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:xl})}else throw new cn("You must provide either an email or phone number and a password");const{data:r,error:n}=s;return n?{data:{user:null,session:null},error:n}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new Oo}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:n})}catch(s){if(ve(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithOAuth(t){var s,r,n,o;return await this._handleProviderSignIn(t.provider,{redirectTo:(s=t.options)===null||s===void 0?void 0:s.redirectTo,scopes:(r=t.options)===null||r===void 0?void 0:r.scopes,queryParams:(n=t.options)===null||n===void 0?void 0:n.queryParams,skipBrowserRedirect:(o=t.options)===null||o===void 0?void 0:o.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async _exchangeCodeForSession(t){const s=await dn(this.storage,`${this.storageKey}-code-verifier`),[r,n]=(s??"").split("/");try{const{data:o,error:i}=await _e(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:r},xform:ss});if(await fn(this.storage,`${this.storageKey}-code-verifier`),i)throw i;return!o||!o.session||!o.user?{data:{user:null,session:null,redirectType:null},error:new Oo}:(o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),{data:Object.assign(Object.assign({},o),{redirectType:n??null}),error:i})}catch(o){if(ve(o))return{data:{user:null,session:null,redirectType:null},error:o};throw o}}async signInWithIdToken(t){try{const{options:s,provider:r,token:n,access_token:o,nonce:i}=t,a=await _e(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:n,access_token:o,nonce:i,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},xform:ss}),{data:l,error:d}=a;return d?{data:{user:null,session:null},error:d}:!l||!l.session||!l.user?{data:{user:null,session:null},error:new Oo}:(l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),{data:l,error:d})}catch(s){if(ve(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithOtp(t){var s,r,n,o,i;try{if("email"in t){const{email:a,options:l}=t;let d=null,u=null;this.flowType==="pkce"&&([d,u]=await Us(this.storage,this.storageKey));const{error:f}=await _e(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:a,data:(s=l==null?void 0:l.data)!==null&&s!==void 0?s:{},create_user:(r=l==null?void 0:l.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:d,code_challenge_method:u},redirectTo:l==null?void 0:l.emailRedirectTo});return{data:{user:null,session:null},error:f}}if("phone"in t){const{phone:a,options:l}=t,{data:d,error:u}=await _e(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:a,data:(n=l==null?void 0:l.data)!==null&&n!==void 0?n:{},create_user:(o=l==null?void 0:l.shouldCreateUser)!==null&&o!==void 0?o:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(i=l==null?void 0:l.channel)!==null&&i!==void 0?i:"sms"}});return{data:{user:null,session:null,messageId:d==null?void 0:d.message_id},error:u}}throw new cn("You must provide either an email or phone number.")}catch(a){if(ve(a))return{data:{user:null,session:null},error:a};throw a}}async verifyOtp(t){var s,r;try{let n,o;"options"in t&&(n=(s=t.options)===null||s===void 0?void 0:s.redirectTo,o=(r=t.options)===null||r===void 0?void 0:r.captchaToken);const{data:i,error:a}=await _e(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:o}}),redirectTo:n,xform:ss});if(a)throw a;if(!i)throw new Error("An error occurred on token verification.");const l=i.session,d=i.user;return l!=null&&l.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),{data:{user:d,session:l},error:null}}catch(n){if(ve(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithSSO(t){var s,r,n;try{let o=null,i=null;return this.flowType==="pkce"&&([o,i]=await Us(this.storage,this.storageKey)),await _e(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(r=(s=t.options)===null||s===void 0?void 0:s.redirectTo)!==null&&r!==void 0?r:void 0}),!((n=t==null?void 0:t.options)===null||n===void 0)&&n.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:o,code_challenge_method:i}),headers:this.headers,xform:sg})}catch(o){if(ve(o))return{data:null,error:o};throw o}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:s},error:r}=t;if(r)throw r;if(!s)throw new ts;const{error:n}=await _e(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:s.access_token});return{data:{user:null,session:null},error:n}})}catch(t){if(ve(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const s=`${this.url}/resend`;if("email"in t){const{email:r,type:n,options:o}=t,{error:i}=await _e(this.fetch,"POST",s,{headers:this.headers,body:{email:r,type:n,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},redirectTo:o==null?void 0:o.emailRedirectTo});return{data:{user:null,session:null},error:i}}else if("phone"in t){const{phone:r,type:n,options:o}=t,{data:i,error:a}=await _e(this.fetch,"POST",s,{headers:this.headers,body:{phone:r,type:n,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}}});return{data:{user:null,session:null,messageId:i==null?void 0:i.message_id},error:a}}throw new cn("You must provide either an email or phone number and a type")}catch(s){if(ve(s))return{data:{user:null,session:null},error:s};throw s}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async s=>s))}async _acquireLock(t,s){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),n=(async()=>(await r,await s()))();return this.pendingInLock.push((async()=>{try{await n}catch{}})()),n}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=s();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const n=[...this.pendingInLock];await Promise.all(n),this.pendingInLock.splice(0,n.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const s=await this.__loadSession();return await t(s)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const s=await dn(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",s),s!==null&&(this._isValidSession(s)?t=s:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const r=t.expires_at?t.expires_at*1e3-Date.now()<jo:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",t.expires_at),!r){if(this.storage.isServer){let i=this.suppressGetSessionWarning;t=new Proxy(t,{get:(l,d,u)=>(!i&&d==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),i=!0,this.suppressGetSessionWarning=!0),Reflect.get(l,d,u))})}return{data:{session:t},error:null}}const{session:n,error:o}=await this._callRefreshToken(t.refresh_token);return o?{data:{session:null},error:o}:{data:{session:n},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await _e(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:ls}):await this._useSession(async s=>{var r,n,o;const{data:i,error:a}=s;if(a)throw a;return!(!((r=i.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new ts}:await _e(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(o=(n=i.session)===null||n===void 0?void 0:n.access_token)!==null&&o!==void 0?o:void 0,xform:ls})})}catch(s){if(ve(s))return Am(s)&&(await this._removeSession(),await fn(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:s};throw s}}async updateUser(t,s={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,s))}async _updateUser(t,s={}){try{return await this._useSession(async r=>{const{data:n,error:o}=r;if(o)throw o;if(!n.session)throw new ts;const i=n.session;let a=null,l=null;this.flowType==="pkce"&&t.email!=null&&([a,l]=await Us(this.storage,this.storageKey));const{data:d,error:u}=await _e(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:s==null?void 0:s.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:a,code_challenge_method:l}),jwt:i.access_token,xform:ls});if(u)throw u;return i.user=d.user,await this._saveSession(i),await this._notifyAllSubscribers("USER_UPDATED",i),{data:{user:i.user},error:null}})}catch(r){if(ve(r))return{data:{user:null},error:r};throw r}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new ts;const s=Date.now()/1e3;let r=s,n=!0,o=null;const{payload:i}=Mo(t.access_token);if(i.exp&&(r=i.exp,n=r<=s),n){const{session:a,error:l}=await this._callRefreshToken(t.refresh_token);if(l)return{data:{user:null,session:null},error:l};if(!a)return{data:{user:null,session:null},error:null};o=a}else{const{data:a,error:l}=await this._getUser(t.access_token);if(l)throw l;o={access_token:t.access_token,refresh_token:t.refresh_token,user:a.user,token_type:"bearer",expires_in:r-s,expires_at:r},await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)}return{data:{user:o.user,session:o},error:null}}catch(s){if(ve(s))return{data:{session:null,user:null},error:s};throw s}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async s=>{var r;if(!t){const{data:i,error:a}=s;if(a)throw a;t=(r=i.session)!==null&&r!==void 0?r:void 0}if(!(t!=null&&t.refresh_token))throw new ts;const{session:n,error:o}=await this._callRefreshToken(t.refresh_token);return o?{data:{user:null,session:null},error:o}:n?{data:{user:n.user,session:n},error:null}:{data:{user:null,session:null},error:null}})}catch(s){if(ve(s))return{data:{user:null,session:null},error:s};throw s}}async _getSessionFromURL(t,s){try{if(!Ot())throw new un("No browser detected.");if(t.error||t.error_description||t.error_code)throw new un(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(s){case"implicit":if(this.flowType==="pkce")throw new gl("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new un("Not a valid implicit grant flow url.");break;default:}if(s==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new gl("No code detected.");const{data:y,error:g}=await this._exchangeCodeForSession(t.code);if(g)throw g;const $=new URL(window.location.href);return $.searchParams.delete("code"),window.history.replaceState(window.history.state,"",$.toString()),{data:{session:y.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:n,access_token:o,refresh_token:i,expires_in:a,expires_at:l,token_type:d}=t;if(!o||!a||!i||!d)throw new un("No session defined in URL");const u=Math.round(Date.now()/1e3),f=parseInt(a);let h=u+f;l&&(h=parseInt(l));const p=h-u;p*1e3<=Hs&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${p}s, should have been closer to ${f}s`);const x=h-f;u-x>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",x,h,u):u-x<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",x,h,u);const{data:w,error:S}=await this._getUser(o);if(S)throw S;const R={provider_token:r,provider_refresh_token:n,access_token:o,expires_in:f,expires_at:h,refresh_token:i,token_type:d,user:w.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:R,redirectType:t.type},error:null}}catch(r){if(ve(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const s=await dn(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&s)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async s=>{var r;const{data:n,error:o}=s;if(o)return{error:o};const i=(r=n.session)===null||r===void 0?void 0:r.access_token;if(i){const{error:a}=await this.admin.signOut(i,t);if(a&&!(Pm(a)&&(a.status===404||a.status===401||a.status===403)))return{error:a}}return t!=="others"&&(await this._removeSession(),await fn(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const s=Fm(),r={id:s,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",s),this.stateChangeEmitters.delete(s)}};return this._debug("#onAuthStateChange()","registered callback with id",s),this.stateChangeEmitters.set(s,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(s)})))(),{data:{subscription:r}}}async _emitInitialSession(t){return await this._useSession(async s=>{var r,n;try{const{data:{session:o},error:i}=s;if(i)throw i;await((r=this.stateChangeEmitters.get(t))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",o)),this._debug("INITIAL_SESSION","callback id",t,"session",o)}catch(o){await((n=this.stateChangeEmitters.get(t))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",o),console.error(o)}})}async resetPasswordForEmail(t,s={}){let r=null,n=null;this.flowType==="pkce"&&([r,n]=await Us(this.storage,this.storageKey,!0));try{return await _e(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:r,code_challenge_method:n,gotrue_meta_security:{captcha_token:s.captchaToken}},headers:this.headers,redirectTo:s.redirectTo})}catch(o){if(ve(o))return{data:null,error:o};throw o}}async getUserIdentities(){var t;try{const{data:s,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(t=s.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(s){if(ve(s))return{data:null,error:s};throw s}}async linkIdentity(t){var s;try{const{data:r,error:n}=await this._useSession(async o=>{var i,a,l,d,u;const{data:f,error:h}=o;if(h)throw h;const p=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(i=t.options)===null||i===void 0?void 0:i.redirectTo,scopes:(a=t.options)===null||a===void 0?void 0:a.scopes,queryParams:(l=t.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await _e(this.fetch,"GET",p,{headers:this.headers,jwt:(u=(d=f.session)===null||d===void 0?void 0:d.access_token)!==null&&u!==void 0?u:void 0})});if(n)throw n;return Ot()&&!(!((s=t.options)===null||s===void 0)&&s.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:t.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(ve(r))return{data:{provider:t.provider,url:null},error:r};throw r}}async unlinkIdentity(t){try{return await this._useSession(async s=>{var r,n;const{data:o,error:i}=s;if(i)throw i;return await _e(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(n=(r=o.session)===null||r===void 0?void 0:r.access_token)!==null&&n!==void 0?n:void 0})})}catch(s){if(ve(s))return{data:null,error:s};throw s}}async _refreshAccessToken(t){const s=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(s,"begin");try{const r=Date.now();return await Vm(async n=>(n>0&&await zm(200*Math.pow(2,n-1)),this._debug(s,"refreshing attempt",n),await _e(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:ss})),(n,o)=>{const i=200*Math.pow(2,n);return o&&Io(o)&&Date.now()+i-r<Hs})}catch(r){if(this._debug(s,"error",r),ve(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(s,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,s){const r=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:s.redirectTo,scopes:s.scopes,queryParams:s.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",s,"url",r),Ot()&&!s.skipBrowserRedirect&&window.location.assign(r),{data:{provider:t,url:r},error:null}}async _recoverAndRefresh(){var t;const s="#_recoverAndRefresh()";this._debug(s,"begin");try{const r=await dn(this.storage,this.storageKey);if(this._debug(s,"session from storage",r),!this._isValidSession(r)){this._debug(s,"session is not valid"),r!==null&&await this._removeSession();return}const n=((t=r.expires_at)!==null&&t!==void 0?t:1/0)*1e3-Date.now()<jo;if(this._debug(s,`session has${n?"":" not"} expired with margin of ${jo}s`),n){if(this.autoRefreshToken&&r.refresh_token){const{error:o}=await this._callRefreshToken(r.refresh_token);o&&(console.error(o),Io(o)||(this._debug(s,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",r)}catch(r){this._debug(s,"error",r),console.error(r);return}finally{this._debug(s,"end")}}async _callRefreshToken(t){var s,r;if(!t)throw new ts;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const n=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(n,"begin");try{this.refreshingDeferred=new fo;const{data:o,error:i}=await this._refreshAccessToken(t);if(i)throw i;if(!o.session)throw new ts;await this._saveSession(o.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",o.session);const a={session:o.session,error:null};return this.refreshingDeferred.resolve(a),a}catch(o){if(this._debug(n,"error",o),ve(o)){const i={session:null,error:o};return Io(o)||await this._removeSession(),(s=this.refreshingDeferred)===null||s===void 0||s.resolve(i),i}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(o),o}finally{this.refreshingDeferred=null,this._debug(n,"end")}}async _notifyAllSubscribers(t,s,r=!0){const n=`#_notifyAllSubscribers(${t})`;this._debug(n,"begin",s,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:t,session:s});const o=[],i=Array.from(this.stateChangeEmitters.values()).map(async a=>{try{await a.callback(t,s)}catch(l){o.push(l)}});if(await Promise.all(i),o.length>0){for(let a=0;a<o.length;a+=1)console.error(o[a]);throw o[0]}}finally{this._debug(n,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0,await Fu(this.storage,this.storageKey,t)}async _removeSession(){this._debug("#_removeSession()"),await fn(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&Ot()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(s){console.error("removing visibilitychange callback failed",s)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),Hs);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async s=>{const{data:{session:r}}=s;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const n=Math.floor((r.expires_at*1e3-t)/Hs);this._debug("#_autoRefreshTokenTick()",`access token expires in ${n} ticks, a tick lasts ${Hs}ms, refresh threshold is ${ai} ticks`),n<=ai&&await this._callRefreshToken(r.refresh_token)})}catch(s){console.error("Auto refresh tick failed with error. This is likely a transient error.",s)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof Uu)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Ot()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const s=`#_onVisibilityChanged(${t})`;this._debug(s,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(s,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,s,r){const n=[`provider=${encodeURIComponent(s)}`];if(r!=null&&r.redirectTo&&n.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&n.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[o,i]=await Us(this.storage,this.storageKey),a=new URLSearchParams({code_challenge:`${encodeURIComponent(o)}`,code_challenge_method:`${encodeURIComponent(i)}`});n.push(a.toString())}if(r!=null&&r.queryParams){const o=new URLSearchParams(r.queryParams);n.push(o.toString())}return r!=null&&r.skipBrowserRedirect&&n.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${t}?${n.join("&")}`}async _unenroll(t){try{return await this._useSession(async s=>{var r;const{data:n,error:o}=s;return o?{data:null,error:o}:await _e(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(r=n==null?void 0:n.session)===null||r===void 0?void 0:r.access_token})})}catch(s){if(ve(s))return{data:null,error:s};throw s}}async _enroll(t){try{return await this._useSession(async s=>{var r,n;const{data:o,error:i}=s;if(i)return{data:null,error:i};const a=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:{issuer:t.issuer}),{data:l,error:d}=await _e(this.fetch,"POST",`${this.url}/factors`,{body:a,headers:this.headers,jwt:(r=o==null?void 0:o.session)===null||r===void 0?void 0:r.access_token});return d?{data:null,error:d}:(t.factorType==="totp"&&(!((n=l==null?void 0:l.totp)===null||n===void 0)&&n.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),{data:l,error:null})})}catch(s){if(ve(s))return{data:null,error:s};throw s}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async s=>{var r;const{data:n,error:o}=s;if(o)return{data:null,error:o};const{data:i,error:a}=await _e(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:{code:t.code,challenge_id:t.challengeId},headers:this.headers,jwt:(r=n==null?void 0:n.session)===null||r===void 0?void 0:r.access_token});return a?{data:null,error:a}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+i.expires_in},i)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",i),{data:i,error:a})})}catch(s){if(ve(s))return{data:null,error:s};throw s}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async s=>{var r;const{data:n,error:o}=s;return o?{data:null,error:o}:await _e(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:{channel:t.channel},headers:this.headers,jwt:(r=n==null?void 0:n.session)===null||r===void 0?void 0:r.access_token})})}catch(s){if(ve(s))return{data:null,error:s};throw s}})}async _challengeAndVerify(t){const{data:s,error:r}=await this._challenge({factorId:t.factorId});return r?{data:null,error:r}:await this._verify({factorId:t.factorId,challengeId:s.id,code:t.code})}async _listFactors(){const{data:{user:t},error:s}=await this.getUser();if(s)return{data:null,error:s};const r=(t==null?void 0:t.factors)||[],n=r.filter(i=>i.factor_type==="totp"&&i.status==="verified"),o=r.filter(i=>i.factor_type==="phone"&&i.status==="verified");return{data:{all:r,totp:n,phone:o},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async t=>{var s,r;const{data:{session:n},error:o}=t;if(o)return{data:null,error:o};if(!n)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:i}=Mo(n.access_token);let a=null;i.aal&&(a=i.aal);let l=a;((r=(s=n.user.factors)===null||s===void 0?void 0:s.filter(f=>f.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(l="aal2");const u=i.amr||[];return{data:{currentLevel:a,nextLevel:l,currentAuthenticationMethods:u},error:null}}))}async fetchJwk(t,s={keys:[]}){let r=s.keys.find(i=>i.kid===t);if(r||(r=this.jwks.keys.find(i=>i.kid===t),r&&this.jwks_cached_at+Sm>Date.now()))return r;const{data:n,error:o}=await _e(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;if(!n.keys||n.keys.length===0)throw new Ar("JWKS is empty");if(this.jwks=n,this.jwks_cached_at=Date.now(),r=n.keys.find(i=>i.kid===t),!r)throw new Ar("No matching signing key found in JWKS");return r}async getClaims(t,s={keys:[]}){try{let r=t;if(!r){const{data:p,error:x}=await this.getSession();if(x||!p.session)return{data:null,error:x};r=p.session.access_token}const{header:n,payload:o,signature:i,raw:{header:a,payload:l}}=Mo(r);if(Qm(o.exp),!n.kid||n.alg==="HS256"||!("crypto"in globalThis&&"subtle"in globalThis.crypto)){const{error:p}=await this.getUser(r);if(p)throw p;return{data:{claims:o,header:n,signature:i},error:null}}const d=Ym(n.alg),u=await this.fetchJwk(n.kid,s),f=await crypto.subtle.importKey("jwk",u,d,!0,["verify"]);if(!await crypto.subtle.verify(d,f,i,Dm(`${a}.${l}`)))throw new Ar("Invalid JWT signature");return{data:{claims:o,header:n,signature:i},error:null}}catch(r){if(ve(r))return{data:null,error:r};throw r}}}Vr.nextInstanceID=0;const hg=Vr;class pg extends hg{constructor(t){super(t)}}var mg=function(e,t,s,r){function n(o){return o instanceof s?o:new s(function(i){i(o)})}return new(s||(s=Promise))(function(o,i){function a(u){try{d(r.next(u))}catch(f){i(f)}}function l(u){try{d(r.throw(u))}catch(f){i(f)}}function d(u){u.done?o(u.value):n(u.value).then(a,l)}d((r=r.apply(e,t||[])).next())})};class gg{constructor(t,s,r){var n,o,i;if(this.supabaseUrl=t,this.supabaseKey=s,!t)throw new Error("supabaseUrl is required.");if(!s)throw new Error("supabaseKey is required.");const a=wm(t);this.realtimeUrl=`${a}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${a}/auth/v1`,this.storageUrl=`${a}/storage/v1`,this.functionsUrl=`${a}/functions/v1`;const l=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,d={db:hm,realtime:mm,auth:Object.assign(Object.assign({},pm),{storageKey:l}),global:fm},u=xm(r??{},d);this.storageKey=(n=u.auth.storageKey)!==null&&n!==void 0?n:"",this.headers=(o=u.global.headers)!==null&&o!==void 0?o:{},u.accessToken?(this.accessToken=u.accessToken,this.auth=new Proxy({},{get:(f,h)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(h)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((i=u.auth)!==null&&i!==void 0?i:{},this.headers,u.global.fetch),this.fetch=bm(s,this._getAccessToken.bind(this),u.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},u.realtime)),this.rest=new I0(`${a}/rest/v1`,{headers:this.headers,schema:u.db.schema,fetch:this.fetch}),u.accessToken||this._listenForAuthEvents()}get functions(){return new c0(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new cm(this.storageUrl,this.headers,this.fetch)}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,s={},r={}){return this.rest.rpc(t,s,r)}channel(t,s={config:{}}){return this.realtime.channel(t,s)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var t,s;return mg(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(s=(t=r.session)===null||t===void 0?void 0:t.access_token)!==null&&s!==void 0?s:null})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:s,detectSessionInUrl:r,storage:n,storageKey:o,flowType:i,lock:a,debug:l},d,u){const f={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new pg({url:this.authUrl,headers:Object.assign(Object.assign({},f),d),storageKey:o,autoRefreshToken:t,persistSession:s,detectSessionInUrl:r,storage:n,flowType:i,lock:a,debug:l,fetch:u,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(t){return new J0(this.realtimeUrl,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((s,r)=>{this._handleTokenChanged(s,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(t,s,r){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==r?this.changedAccessToken=r:t==="SIGNED_OUT"&&(this.realtime.setAuth(),s=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const vg=(e,t,s)=>new gg(e,t,s),yg="https://iksfrzqpjtwjoonbqwaz.supabase.co",bg="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imlrc2ZyenFwanR3am9vbmJxd2F6Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDcxNjA4NzcsImV4cCI6MjA2MjczNjg3N30.TAXEbb8V4Ji1D6rZWfsQbO3HUfB_nvP10GfVE-tKG9M",ge=vg(yg,bg,{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"pkce"},realtime:{params:{eventsPerSecond:10}},db:{schema:"public"},global:{headers:{"X-Client-Info":"comandaplus-dashboard-v1.0.0"}}}),pt=e=>{var r,n,o,i;return console.error("Supabase error:",e),{message:{"Invalid login credentials":"Credenciales de acceso incorrectas","Email not confirmed":"Debes confirmar tu email antes de continuar","User not found":"Usuario no encontrado","Invalid email":"Email no válido","Password should be at least 6 characters":"La contraseña debe tener al menos 6 caracteres","User already registered":"Este email ya está registrado","Database connection error":"Error de conexión con la base de datos","Row Level Security policy violation":"No tienes permisos para realizar esta acción","JWT expired":"Tu sesión ha expirado, por favor inicia sesión nuevamente","Permission denied":"No tienes permisos suficientes para esta acción"}[e.message]||e.message||"Error desconocido",code:e.code,details:e.details,isAuthError:((r=e.message)==null?void 0:r.includes("JWT"))||((n=e.message)==null?void 0:n.includes("credentials")),isPermissionError:((o=e.message)==null?void 0:o.includes("Permission"))||((i=e.message)==null?void 0:i.includes("policy"))}},xn={getDashboardData:async e=>{const{data:t,error:s}=await ge.rpc("get_restaurant_dashboard",{restaurante_uuid:e});if(s)throw s;return t},getAnalyticsRapidos:async e=>{const{data:t,error:s}=await ge.rpc("get_analytics_rapidos",{restaurante_uuid:e});if(s)throw s;return t},getPedidosActivos:async e=>{const{data:t,error:s}=await ge.rpc("get_pedidos_activos",{restaurante_uuid:e});if(s)throw s;return t},getResumenFinanciero:async(e,t,s)=>{const{data:r,error:n}=await ge.rpc("resumen_financiero_restaurante",{restaurante_uuid:e,p_fecha_inicio:t,p_fecha_fin:s});if(n)throw n;return r},getStatsRealTime:async e=>{const{data:t,error:s}=await ge.rpc("get_stats_tiempo_real",{restaurante_uuid:e});if(s)throw s;return t}},Bu=(e,t)=>{const s=[];if(t.onPedidoChange){const r=ge.channel(`pedidos-${e}`).on("postgres_changes",{event:"*",schema:"public",table:"pedidos",filter:`restaurante_id=eq.${e}`},t.onPedidoChange).subscribe();s.push(r)}if(t.onItemChange){const r=ge.channel(`items-${e}`).on("postgres_changes",{event:"*",schema:"public",table:"items_pedido"},t.onItemChange).subscribe();s.push(r)}if(t.onPagoChange){const r=ge.channel(`pagos-${e}`).on("postgres_changes",{event:"*",schema:"public",table:"pagos"},t.onPagoChange).subscribe();s.push(r)}return()=>{s.forEach(r=>{ge.removeChannel(r)})}},_g=Object.freeze(Object.defineProperty({__proto__:null,dashboardQueries:xn,handleSupabaseError:pt,setupRealtimeSubscriptions:Bu,supabase:ge},Symbol.toStringTag,{value:"Module"})),Qt=to("auth",()=>{const e=U(null),t=U(null),s=U([]),r=U(null),n=U(!1),o=U(null),i=U(!1),a=V(()=>!!e.value),l=V(()=>{var M;return((M=t.value)==null?void 0:M.rol)||"cliente"}),d=V(()=>!!t.value),u=V(()=>{var M;return((M=t.value)==null?void 0:M.rol)==="dueño"}),f=V(()=>{var M;return((M=t.value)==null?void 0:M.rol)==="encargado"}),h=V(()=>{var M;return((M=t.value)==null?void 0:M.rol)==="empleado"}),p=V(()=>{var M;return((M=t.value)==null?void 0:M.rol)==="admin"}),x=V(()=>u.value||p.value),w=V(()=>u.value||f.value||p.value),S=V(()=>{var M;return((M=r.value)==null?void 0:M.role)==="propietario"}),R=V(()=>{if(!r.value)return{};const M={viewDashboard:!0,viewOrders:!0,manageOrders:!0,viewAnalytics:!1,manageMenu:!1,manageEmployees:!1,manageSettings:!1,viewFinances:!1};return r.value.role==="propietario"?{...M,viewAnalytics:!0,manageMenu:!0,manageEmployees:!0,manageSettings:!0,viewFinances:!0}:r.value.role==="encargado"?{...M,viewAnalytics:!0,manageMenu:!0,manageEmployees:!1,viewFinances:!0}:M});ot(e,async M=>{M?(await $(M.id),await D()):(t.value=null,s.value=[],r.value=null)});async function y(){if(!i.value)try{n.value=!0,o.value=null;const{data:{session:M}}=await ge.auth.getSession();e.value=(M==null?void 0:M.user)||null,e.value&&(await $(e.value.id),await D()),ge.auth.onAuthStateChange(async(H,ne)=>{var be;console.log("Auth state changed:",H,(be=ne==null?void 0:ne.user)==null?void 0:be.email),H==="SIGNED_IN"&&(ne!=null&&ne.user)?(e.value=ne.user,await $(ne.user.id),await D()):H==="SIGNED_OUT"&&(e.value=null,t.value=null,s.value=[],r.value=null)}),i.value=!0}catch(M){console.error("Error initializing auth:",M);const H=pt(M);o.value=H.message}finally{n.value=!1}}async function g(){try{n.value=!0,o.value=null;const{data:{user:M}}=await ge.auth.getUser();e.value=M,M?(await $(M.id),await D()):(t.value=null,s.value=[],r.value=null)}catch(M){console.error("Error loading user:",M);const H=pt(M);o.value=H.message}finally{n.value=!1}}async function $(M){try{const{data:H,error:ne}=await ge.from("perfiles").select("*").eq("auth_user_id",M).maybeSingle();if(ne)throw console.error("Error fetching profile:",ne),ne;t.value=H,H||console.log("No se encontró perfil para el usuario:",M)}catch(H){console.error("Error loading user profile:",H);const ne=pt(H);o.value=ne.message,t.value=null}}async function D(){if(!t.value){s.value=[];return}try{const M=[],{data:H,error:ne}=await ge.from("restaurantes").select("*").eq("propietario_id",t.value.id).eq("esta_activo",!0).order("nombre",{ascending:!0});if(ne)throw ne;H&&M.push(...H.map(de=>({...de,role:"propietario"})));const{data:be,error:ue}=await ge.from("empleados").select(`
          posicion,
          restaurantes!inner (*)
        `).eq("perfil_id",t.value.id).eq("esta_activo",!0).eq("restaurantes.esta_activo",!0);if(ue)throw ue;be&&M.push(...be.map(de=>({...de.restaurantes,role:de.posicion==="encargado"||de.posicion==="encargada"?"encargado":"empleado",posicion:de.posicion}))),M.sort((de,Oe)=>de.nombre.localeCompare(Oe.nombre)),s.value=M,!r.value&&M.length>0&&se(M[0].id)}catch(M){console.error("Error loading user restaurants:",M);const H=pt(M);o.value=H.message,s.value=[]}}function se(M){const H=s.value.find(ne=>ne.id===M);H&&(r.value=H,localStorage.setItem("currentRestaurantId",M))}function W(){const M=localStorage.getItem("currentRestaurantId");if(M&&s.value.length>0){const H=s.value.find(ne=>ne.id===M);H&&(r.value=H)}}async function L(M){if(!e.value)throw new Error("No hay usuario autenticado");try{n.value=!0,o.value=null;const H={auth_user_id:e.value.id,email:e.value.email,nombre_completo:M.nombre_completo,telefono:M.telefono||null,rol:M.rol||"cliente",esta_activo:!0},{data:ne,error:be}=await ge.from("perfiles").insert(H).select().single();if(be)throw console.error("Error creating profile:",be),be;return t.value=ne,console.log("Perfil creado exitosamente:",ne),await D(),ne}catch(H){console.error("Error creating profile:",H);const ne=pt(H);throw o.value=ne.message,H}finally{n.value=!1}}async function A(M){if(!t.value)throw new Error("No hay perfil para actualizar");try{n.value=!0,o.value=null;const{data:H,error:ne}=await ge.from("perfiles").update(M).eq("id",t.value.id).select().single();if(ne)throw ne;return t.value=H,H}catch(H){console.error("Error updating profile:",H);const ne=pt(H);throw o.value=ne.message,H}finally{n.value=!1}}async function T(M,H){try{n.value=!0,o.value=null;const{data:ne,error:be}=await ge.auth.signInWithPassword({email:M.trim().toLowerCase(),password:H});if(be)throw be;return e.value=ne.user,ne.user&&(await $(ne.user.id),await D()),{user:ne.user,profile:t.value}}catch(ne){console.error("Error signing in:",ne);const be=pt(ne);throw o.value=be.message,ne}finally{n.value=!1}}async function I(M,H,ne){try{n.value=!0,o.value=null;const{data:be,error:ue}=await ge.auth.signUp({email:M.trim().toLowerCase(),password:H,options:{data:ne}});if(ue)throw ue;return e.value=be.user,be}catch(be){console.error("Error signing up:",be);const ue=pt(be);throw o.value=ue.message,be}finally{n.value=!1}}async function N(){try{n.value=!0,o.value=null;const{error:M}=await ge.auth.signOut();if(M)throw M;e.value=null,t.value=null,s.value=[],r.value=null,localStorage.removeItem("currentRestaurantId")}catch(M){console.error("Error signing out:",M);const H=pt(M);o.value=H.message}finally{n.value=!1}}async function G(M){if(!t.value)return!1;try{const{data:H}=await ge.from("restaurantes").select("propietario_id").eq("id",M).eq("propietario_id",t.value.id).maybeSingle();if(H)return!0;const{data:ne}=await ge.from("empleados").select("id, posicion").eq("restaurante_id",M).eq("perfil_id",t.value.id).eq("esta_activo",!0).maybeSingle();return!!ne}catch(H){return console.error("Error checking restaurant access:",H),!1}}function re(){if(!w.value)throw new Error("No tienes permisos para acceder al dashboard")}function we(){if(!S.value)throw new Error("Solo el propietario puede realizar esta acción")}function he(){o.value=null}return y(),{user:Ue(e),profile:Ue(t),userRestaurants:Ue(s),currentRestaurant:Ue(r),loading:Ue(n),error:Ue(o),isInitialized:Ue(i),isAuthenticated:a,userRole:l,hasProfile:d,isDueño:u,isEncargado:f,isEmpleado:h,isAdmin:p,canManageRestaurant:x,canAccessDashboard:w,isCurrentRestaurantOwner:S,currentRestaurantPermissions:R,initialize:y,loadUser:g,loadUserProfile:$,loadUserRestaurants:D,setCurrentRestaurant:se,loadCurrentRestaurantFromStorage:W,createProfile:L,updateProfile:A,signIn:T,signUp:I,signOut:N,checkRestaurantAccess:G,requireDashboardAccess:re,requireRestaurantOwnership:we,clearError:he}}),wg=Object.freeze(Object.defineProperty({__proto__:null,useAuthStore:Qt},Symbol.toStringTag,{value:"Module"})),xg={class:"min-h-screen bg-gray-50"},kg={class:"bg-gradient-to-br from-orange-500 to-orange-600"},$g={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-20"},Eg={class:"text-center"},Cg={class:"flex flex-col sm:flex-row gap-4 justify-center"},Sg={class:"py-20 bg-orange-600"},Tg={class:"max-w-4xl mx-auto text-center px-4 sm:px-6 lg:px-8"},Pg={class:"flex flex-col sm:flex-row gap-4 justify-center"},Ag=Ee({__name:"HomeView",setup(e){const t=()=>{const r=document.getElementById("features");r&&r.scrollIntoView({behavior:"smooth"})},s=()=>{window.scrollTo({top:0,behavior:"smooth"})};return(r,n)=>{const o=Jn("router-link");return b(),k("div",xg,[c("div",kg,[c("div",$g,[c("div",Eg,[n[1]||(n[1]=c("h1",{class:"text-4xl md:text-6xl font-bold text-white mb-6"}," ComandaPlus ",-1)),n[2]||(n[2]=c("p",{class:"text-xl md:text-2xl text-orange-100 mb-8 max-w-3xl mx-auto"}," La plataforma digital que revoluciona la gestión de bares, restaurantes y cafeterías ",-1)),c("div",Cg,[oe(o,{to:"/auth",class:"bg-white text-orange-600 px-8 py-3 rounded-lg font-semibold hover:bg-gray-100 transition-colors"},{default:ze(()=>n[0]||(n[0]=[xe(" Comenzar ahora ")])),_:1,__:[0]}),c("button",{onClick:t,class:"border-2 border-white text-white px-8 py-3 rounded-lg font-semibold hover:bg-white hover:text-orange-600 transition-colors"}," Ver características ")])])])]),n[7]||(n[7]=Fr('<div id="features" class="py-20 bg-white"><div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"><div class="text-center mb-16"><h2 class="text-3xl md:text-4xl font-bold text-gray-900 mb-4"> Todo lo que necesitas en una sola plataforma </h2><p class="text-xl text-gray-600 max-w-3xl mx-auto"> Digitaliza tu restaurante y mejora la experiencia de tus clientes con nuestras herramientas avanzadas </p></div><div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8"><div class="text-center p-6 rounded-lg border border-gray-200 hover:shadow-lg transition-shadow"><div class="w-16 h-16 bg-orange-100 rounded-lg flex items-center justify-center mx-auto mb-4"><svg class="w-8 h-8 text-orange-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.746 0 3.332.477 4.5 1.253v13C19.832 18.477 18.246 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"></path></svg></div><h3 class="text-xl font-semibold text-gray-900 mb-2">Menú Digital</h3><p class="text-gray-600"> Clientes acceden al menú escaneando un QR. Fotos, precios, alérgenos y pedidos desde el móvil. </p></div><div class="text-center p-6 rounded-lg border border-gray-200 hover:shadow-lg transition-shadow"><div class="w-16 h-16 bg-blue-100 rounded-lg flex items-center justify-center mx-auto mb-4"><svg class="w-8 h-8 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"></path></svg></div><h3 class="text-xl font-semibold text-gray-900 mb-2">Gestión en Tiempo Real</h3><p class="text-gray-600"> Pedidos actualizados al instante. Control total desde cocina hasta entrega con notificaciones automáticas. </p></div><div class="text-center p-6 rounded-lg border border-gray-200 hover:shadow-lg transition-shadow"><div class="w-16 h-16 bg-green-100 rounded-lg flex items-center justify-center mx-auto mb-4"><svg class="w-8 h-8 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"></path></svg></div><h3 class="text-xl font-semibold text-gray-900 mb-2">Analytics y Reportes</h3><p class="text-gray-600"> Métricas detalladas de ventas, platos populares y rendimiento del negocio para tomar mejores decisiones. </p></div><div class="text-center p-6 rounded-lg border border-gray-200 hover:shadow-lg transition-shadow"><div class="w-16 h-16 bg-purple-100 rounded-lg flex items-center justify-center mx-auto mb-4"><svg class="w-8 h-8 text-purple-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z"></path></svg></div><h3 class="text-xl font-semibold text-gray-900 mb-2">Control de Personal</h3><p class="text-gray-600"> Gestión de turnos, fichaje digital y control horario automático para optimizar la productividad. </p></div><div class="text-center p-6 rounded-lg border border-gray-200 hover:shadow-lg transition-shadow"><div class="w-16 h-16 bg-yellow-100 rounded-lg flex items-center justify-center mx-auto mb-4"><svg class="w-8 h-8 text-yellow-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"></path></svg></div><h3 class="text-xl font-semibold text-gray-900 mb-2">Pagos Sin Contacto</h3><p class="text-gray-600"> Clientes pagan directamente desde su móvil. Integración con Stripe, Bizum y principales métodos de pago. </p></div><div class="text-center p-6 rounded-lg border border-gray-200 hover:shadow-lg transition-shadow"><div class="w-16 h-16 bg-red-100 rounded-lg flex items-center justify-center mx-auto mb-4"><svg class="w-8 h-8 text-red-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"></path></svg></div><h3 class="text-xl font-semibold text-gray-900 mb-2">Múltiples Locales</h3><p class="text-gray-600"> Gestiona varios restaurantes desde una sola cuenta. Control centralizado con datos individualizados. </p></div></div></div></div><div class="py-20 bg-gray-50"><div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"><div class="grid grid-cols-1 lg:grid-cols-2 gap-12 items-center"><div><h2 class="text-3xl md:text-4xl font-bold text-gray-900 mb-6"> Aumenta tus ventas hasta un 30% </h2><ul class="space-y-4"><li class="flex items-start"><div class="flex-shrink-0 w-6 h-6 bg-green-100 rounded-full flex items-center justify-center mt-1"><svg class="w-4 h-4 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg></div><div class="ml-3"><p class="text-lg text-gray-900 font-medium">Reduce errores en pedidos</p><p class="text-gray-600">Elimina malentendidos entre clientes y personal</p></div></li><li class="flex items-start"><div class="flex-shrink-0 w-6 h-6 bg-green-100 rounded-full flex items-center justify-center mt-1"><svg class="w-4 h-4 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg></div><div class="ml-3"><p class="text-lg text-gray-900 font-medium">Mejora la rotación de mesas</p><p class="text-gray-600">Pedidos más rápidos = más clientes atendidos</p></div></li><li class="flex items-start"><div class="flex-shrink-0 w-6 h-6 bg-green-100 rounded-full flex items-center justify-center mt-1"><svg class="w-4 h-4 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg></div><div class="ml-3"><p class="text-lg text-gray-900 font-medium">Optimiza el personal</p><p class="text-gray-600">Libera tiempo para enfocarse en la calidad del servicio</p></div></li><li class="flex items-start"><div class="flex-shrink-0 w-6 h-6 bg-green-100 rounded-full flex items-center justify-center mt-1"><svg class="w-4 h-4 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg></div><div class="ml-3"><p class="text-lg text-gray-900 font-medium">Datos para crecer</p><p class="text-gray-600">Analytics detallados para tomar mejores decisiones</p></div></li></ul></div><div class="relative"><div class="bg-white rounded-lg shadow-xl p-6"><div class="text-center"><div class="w-20 h-20 bg-orange-100 rounded-full flex items-center justify-center mx-auto mb-4"><svg class="w-10 h-10 text-orange-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"></path></svg></div><h3 class="text-2xl font-bold text-gray-900 mb-2">ROI Inmediato</h3><p class="text-gray-600 mb-4">Recupera la inversión en menos de 2 meses</p><div class="bg-green-100 rounded-lg p-4"><p class="text-lg font-semibold text-green-800">+30% ventas</p><p class="text-sm text-green-600">Promedio de nuestros clientes</p></div></div></div></div></div></div></div><div class="py-20 bg-white"><div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"><div class="text-center mb-16"><h2 class="text-3xl md:text-4xl font-bold text-gray-900 mb-4"> Lo que dicen nuestros clientes </h2><p class="text-xl text-gray-600"> Más de 500 restaurantes confían en ComandaPlus </p></div><div class="grid grid-cols-1 md:grid-cols-3 gap-8"><div class="bg-gray-50 rounded-lg p-6"><div class="flex items-center mb-4"><div class="w-12 h-12 bg-orange-100 rounded-full flex items-center justify-center"><span class="font-bold text-orange-600">MR</span></div><div class="ml-4"><h4 class="font-semibold text-gray-900">María Rodríguez</h4><p class="text-sm text-gray-600">Propietaria, Tapas El Rincón</p></div></div><p class="text-gray-700 italic"> &quot;ComandaPlus revolucionó nuestro restaurante. Los clientes están encantados con el menú digital y nosotros hemos reducido errores en un 90%.&quot; </p></div><div class="bg-gray-50 rounded-lg p-6"><div class="flex items-center mb-4"><div class="w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center"><span class="font-bold text-blue-600">JL</span></div><div class="ml-4"><h4 class="font-semibold text-gray-900">José Luis García</h4><p class="text-sm text-gray-600">Chef, Bistró Moderno</p></div></div><p class="text-gray-700 italic"> &quot;La gestión de pedidos en tiempo real es increíble. Ahora podemos atender más mesas sin perder calidad en el servicio.&quot; </p></div><div class="bg-gray-50 rounded-lg p-6"><div class="flex items-center mb-4"><div class="w-12 h-12 bg-green-100 rounded-full flex items-center justify-center"><span class="font-bold text-green-600">AM</span></div><div class="ml-4"><h4 class="font-semibold text-gray-900">Ana Martínez</h4><p class="text-sm text-gray-600">Gerente, Café Central</p></div></div><p class="text-gray-700 italic"> &quot;Los analytics nos ayudan a entender mejor a nuestros clientes. Hemos optimizado nuestro menú y aumentado las ventas un 25%.&quot; </p></div></div></div></div>',3)),c("div",Sg,[c("div",Tg,[n[4]||(n[4]=c("h2",{class:"text-3xl md:text-4xl font-bold text-white mb-6"}," ¿Listo para digitalizar tu restaurante? ",-1)),n[5]||(n[5]=c("p",{class:"text-xl text-orange-100 mb-8"}," Únete a los cientos de restaurantes que ya están aumentando sus ventas con ComandaPlus ",-1)),c("div",Pg,[oe(o,{to:"/auth",class:"bg-white text-orange-600 px-8 py-3 rounded-lg font-semibold hover:bg-gray-100 transition-colors"},{default:ze(()=>n[3]||(n[3]=[xe(" Empezar gratis ")])),_:1,__:[3]}),c("button",{onClick:s,class:"border-2 border-white text-white px-8 py-3 rounded-lg font-semibold hover:bg-white hover:text-orange-600 transition-colors"}," Solicitar demo ")]),n[6]||(n[6]=c("p",{class:"text-orange-200 text-sm mt-4"}," Sin permanencia • Setup gratuito • Soporte 24/7 ",-1))])]),n[8]||(n[8]=Fr('<footer class="bg-gray-900 text-white py-12"><div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"><div class="grid grid-cols-1 md:grid-cols-4 gap-8"><div><h3 class="text-lg font-semibold mb-4">ComandaPlus</h3><p class="text-gray-400 text-sm"> La plataforma digital que revoluciona la gestión de restaurantes. </p></div><div><h4 class="font-semibold mb-4">Producto</h4><ul class="space-y-2 text-sm text-gray-400"><li><a href="#" class="hover:text-white transition-colors">Características</a></li><li><a href="#" class="hover:text-white transition-colors">Precios</a></li><li><a href="#" class="hover:text-white transition-colors">Integraciones</a></li><li><a href="#" class="hover:text-white transition-colors">API</a></li></ul></div><div><h4 class="font-semibold mb-4">Soporte</h4><ul class="space-y-2 text-sm text-gray-400"><li><a href="#" class="hover:text-white transition-colors">Centro de ayuda</a></li><li><a href="#" class="hover:text-white transition-colors">Contacto</a></li><li><a href="#" class="hover:text-white transition-colors">Estado del servicio</a></li><li><a href="#" class="hover:text-white transition-colors">Documentación</a></li></ul></div><div><h4 class="font-semibold mb-4">Legal</h4><ul class="space-y-2 text-sm text-gray-400"><li><a href="#" class="hover:text-white transition-colors">Privacidad</a></li><li><a href="#" class="hover:text-white transition-colors">Términos</a></li><li><a href="#" class="hover:text-white transition-colors">Cookies</a></li><li><a href="#" class="hover:text-white transition-colors">RGPD</a></li></ul></div></div><div class="border-t border-gray-800 mt-8 pt-8 text-center"><p class="text-gray-400 text-sm"> © 2025 ComandaPlus. Todos los derechos reservados. </p></div></div></footer>',1))])}}}),zu=to("dashboard",()=>{const e=Qt(),t=U(!1),s=U(null),r=U(!1),n=U(null),o=U(null),i=U(null),a=U([]),l=U([]),d=U(null),u=U([]),f=U([]),h=U(3e4),p=U(!0);let x=null,w=null;const S=V(()=>!!o.value),R=V(()=>a.value.length),y=V(()=>{var te;return((te=o.value)==null?void 0:te.ventas_hoy)||0}),g=V(()=>{var te;return((te=i.value)==null?void 0:te.crecimiento_mes_anterior)||0}),$=V(()=>{var K;const te=new Set(a.value.filter(P=>P.tipo_servicio==="mesa"&&P.estado!=="entregado"&&P.estado!=="cancelado").map(P=>P.numero_mesa)).size,z=((K=e.currentRestaurant)==null?void 0:K.numero_mesas)||10;return{ocupadas:te,total:z,porcentaje:te/z*100}}),D=V(()=>{const te=a.value.filter(P=>P.estado==="pendiente").length,z=a.value.filter(P=>P.estado==="en_preparacion").length,K=a.value.filter(P=>P.estado==="listo").length;return{pendientes:te,en_preparacion:z,listos:K}}),se=V(()=>{const te=l.value.length,z=l.value.filter(K=>K.estado==="listo").length;return{total:te,completados:z,porcentaje:te>0?z/te*100:0}}),W=V(()=>{const te=[],z=a.value.filter(K=>K.tiempo_transcurrido>30);return z.length>0&&te.push({tipo:"warning",mensaje:`${z.length} pedidos con más de 30 minutos de espera`,prioridad:2}),$.value.porcentaje>90&&te.push({tipo:"warning",mensaje:"Capacidad casi completa - considerar gestión de espera",prioridad:1}),p.value&&!r.value&&te.push({tipo:"error",mensaje:"Desconectado del tiempo real - datos pueden estar desactualizados",prioridad:3}),te.sort((K,P)=>P.prioridad-K.prioridad)});async function L(te){var K;const z=te||((K=e.currentRestaurant)==null?void 0:K.id);if(!z){s.value="No hay restaurante seleccionado";return}try{t.value=!0,s.value=null,console.log("🏪 Inicializando dashboard para restaurante:",z),await Promise.all([A(z),T(z),I(z),N(z)]),p.value&&he(z),M(z),n.value=new Date,console.log("✅ Dashboard inicializado correctamente")}catch(P){console.error("Error inicializando dashboard:",P);const X=pt(P);s.value=X.message}finally{t.value=!1}}async function A(te){try{const z=await xn.getDashboardData(te);o.value=z,z.ventas_ultimos_7_dias&&(u.value=z.ventas_ultimos_7_dias),z.platos_mas_vendidos&&(f.value=z.platos_mas_vendidos.map((K,P)=>({id:`producto-${P}`,nombre:K.nombre,cantidad_vendida:K.cantidad,ingresos_totales:K.ingresos,porcentaje_ventas:0})))}catch(z){throw console.error("Error cargando datos del dashboard:",z),z}}async function T(te){try{const z=await xn.getAnalyticsRapidos(te);i.value=z}catch(z){throw console.error("Error cargando analytics:",z),z}}async function I(te){try{const z=await xn.getPedidosActivos(te);a.value=z.map(K=>({...K,cliente_nombre:K.cliente_nombre||K.nombre_cliente||"Cliente anónimo",tiempo_transcurrido:H(K.creado_el),items_totales:K.total_items||0,items_listos:K.items_listos||0}))}catch(z){throw console.error("Error cargando pedidos activos:",z),z}}async function N(te){try{const{data:z,error:K}=await ge.rpc("get_items_estacion",{restaurante_uuid:te,estacion_param:null});if(K)throw K;l.value=z.map(P=>({...P,tiempo_transcurrido:H(P.creado_el)}))}catch(z){throw console.error("Error cargando items pendientes:",z),z}}async function G(te){var K;const z=te||((K=e.currentRestaurant)==null?void 0:K.id);if(z)try{await Promise.all([I(z),N(z)]),n.value=new Date}catch(P){console.error("Error refrescando datos:",P)}}async function re(te,z){try{const{error:K}=await ge.from("pedidos").update({estado:z,actualizado_el:new Date().toISOString()}).eq("id",te);if(K)throw K;const P=a.value.findIndex(X=>X.id===te);P!==-1&&(a.value[P].estado=z,a.value[P].actualizado_el=new Date().toISOString())}catch(K){console.error("Error actualizando estado del pedido:",K);const P=pt(K);throw s.value=P.message,K}}async function we(te,z){try{const{error:K}=await ge.from("items_pedido").update({estado:z,actualizado_el:new Date().toISOString()}).eq("id",te);if(K)throw K;const P=l.value.findIndex(X=>X.id===te);P!==-1&&(l.value[P].estado=z)}catch(K){console.error("Error actualizando estado del item:",K);const P=pt(K);throw s.value=P.message,K}}function he(te){x&&x(),console.log("🔄 Configurando suscripciones en tiempo real para:",te),x=Bu(te,{onPedidoChange:z=>{if(console.log("📦 Cambio en pedido:",z),z.eventType==="INSERT"){const K={...z.new,cliente_nombre:z.new.nombre_cliente||"Cliente anónimo",tiempo_transcurrido:0,items_totales:0,items_listos:0};a.value.unshift(K)}else if(z.eventType==="UPDATE"){const K=a.value.findIndex(P=>P.id===z.new.id);K!==-1&&(a.value[K]={...a.value[K],...z.new,tiempo_transcurrido:H(z.new.creado_el)})}else if(z.eventType==="DELETE"){const K=a.value.findIndex(P=>P.id===z.old.id);K!==-1&&a.value.splice(K,1)}n.value=new Date},onItemChange:z=>{if(console.log("🍽️ Cambio en item:",z),z.eventType==="INSERT"){const K={...z.new,tiempo_transcurrido:0};l.value.unshift(K)}else if(z.eventType==="UPDATE"){const K=l.value.findIndex(P=>P.id===z.new.id);K!==-1&&(l.value[K]={...l.value[K],...z.new,tiempo_transcurrido:H(z.new.creado_el)})}else if(z.eventType==="DELETE"){const K=l.value.findIndex(P=>P.id===z.old.id);K!==-1&&l.value.splice(K,1)}n.value=new Date}}),r.value=!0}function M(te){w&&clearInterval(w),w=setInterval(()=>{t.value||G(te)},h.value)}function H(te){const z=new Date,K=new Date(te);return Math.floor((z.getTime()-K.getTime())/(1e3*60))}function ne(te){var K;h.value=te;const z=(K=e.currentRestaurant)==null?void 0:K.id;z&&M(z)}function be(){var z;p.value=!0;const te=(z=e.currentRestaurant)==null?void 0:z.id;te&&he(te)}function ue(){p.value=!1,r.value=!1,x&&(x(),x=null)}function de(){console.log("🧹 Limpiando dashboard store..."),x&&(x(),x=null),w&&(clearInterval(w),w=null),r.value=!1,s.value=null}function Oe(){s.value=null}return{loading:Ue(t),error:Ue(s),isRealTimeConnected:Ue(r),lastUpdate:Ue(n),dashboardData:Ue(o),analyticsData:Ue(i),pedidosActivos:Ue(a),itemsPendientes:Ue(l),estadisticasRealTime:Ue(d),ventasUltimos7Dias:Ue(u),productosMasVendidos:Ue(f),autoRefreshInterval:Ue(h),realTimeEnabled:Ue(p),hasData:S,totalPedidosActivos:R,ventasHoy:y,crecimientoVentas:g,mesasOcupadas:$,estadoPedidos:D,productividadCocina:se,alertas:W,initialize:L,refreshData:G,updatePedidoEstado:re,updateItemEstado:we,setAutoRefreshInterval:ne,enableRealTime:be,disableRealTime:ue,cleanup:de,clearError:Oe}}),Rg={class:"min-h-screen bg-gray-50"},jg={class:"bg-white shadow-sm border-b"},Og={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},Ig={class:"flex justify-between items-center py-6"},Mg={class:"flex items-center space-x-3"},Lg={key:0,class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800"},Dg={key:1,class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800"},Ng={class:"text-sm text-gray-600"},Fg={key:0},Ug={key:0,class:"text-xs text-gray-500"},Bg={class:"flex items-center space-x-4"},zg=["value"],Vg=["value"],Hg=["disabled"],qg={key:0,class:"animate-spin h-4 w-4",fill:"none",viewBox:"0 0 24 24"},Kg={key:1,class:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Wg={key:0,class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 pt-4"},Gg={class:"space-y-2"},Jg={class:"flex items-center"},Qg={key:0,class:"h-5 w-5 mr-2",fill:"currentColor",viewBox:"0 0 20 20"},Yg={class:"text-sm font-medium"},Xg={key:1,class:"flex justify-center items-center py-12"},Zg={key:2,class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12"},ev={class:"bg-red-50 border border-red-200 rounded-lg p-6 text-center"},tv={class:"text-red-600 mb-4"},sv={key:3,class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6"},rv={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8"},nv={class:"bg-white rounded-lg shadow-sm border p-6 transition-all hover:shadow-md"},ov={class:"flex items-center"},iv={class:"ml-5 w-0 flex-1"},av={class:"text-2xl font-bold text-gray-900"},lv={key:0,class:"text-sm text-gray-600"},cv={class:"bg-white rounded-lg shadow-sm border p-6 transition-all hover:shadow-md"},uv={class:"flex items-center"},dv={class:"ml-5 w-0 flex-1"},fv={class:"text-2xl font-bold text-gray-900"},hv={class:"text-sm text-gray-600"},pv={class:"bg-white rounded-lg shadow-sm border p-6 transition-all hover:shadow-md"},mv={class:"flex items-center"},gv={class:"ml-5 w-0 flex-1"},vv={class:"text-2xl font-bold text-gray-900"},yv={class:"text-sm text-gray-600"},bv={class:"bg-white rounded-lg shadow-sm border p-6 transition-all hover:shadow-md"},_v={class:"flex items-center"},wv={class:"ml-5 w-0 flex-1"},xv={class:"text-2xl font-bold text-gray-900"},kv={class:"text-sm text-gray-600"},$v={class:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8"},Ev={class:"bg-white rounded-lg shadow-sm border p-6"},Cv={class:"space-y-3"},Sv={class:"bg-white rounded-lg shadow-sm border p-6"},Tv={class:"space-y-3"},Pv={class:"grid grid-cols-1 lg:grid-cols-2 gap-8"},Av={class:"bg-white rounded-lg shadow-sm border"},Rv={class:"px-6 py-4 border-b border-gray-200 flex items-center justify-between"},jv={class:"text-lg font-medium text-gray-900 flex items-center"},Ov={class:"ml-2 bg-yellow-100 text-yellow-800 text-xs font-medium px-2.5 py-0.5 rounded-full"},Iv={class:"p-6 max-h-96 overflow-y-auto"},Mv={key:0,class:"space-y-4"},Lv={class:"flex items-center space-x-3"},Dv={class:"flex-shrink-0"},Nv={class:"font-medium text-gray-900"},Fv={class:"text-sm text-gray-600"},Uv={class:"text-xs text-gray-500"},Bv={class:"text-right"},zv={class:"font-medium text-gray-900"},Vv={class:"text-sm text-gray-600"},Hv={key:1,class:"text-center py-8 text-gray-500"},qv={class:"bg-white rounded-lg shadow-sm border"},Kv={class:"p-6"},Wv={key:0,class:"space-y-4"},Gv={class:"flex-shrink-0"},Jv={class:"flex-1 min-w-0"},Qv={class:"font-medium text-gray-900 truncate"},Yv={class:"text-sm text-gray-600"},Xv={class:"flex-shrink-0"},Zv={class:"w-16 bg-gray-200 rounded-full h-2"},e1={key:1,class:"text-center py-8 text-gray-500"},t1={key:0,class:"mt-8"},s1={class:"bg-white rounded-lg shadow-sm border p-6"},r1={class:"space-y-4"},n1={class:"w-20 text-sm text-gray-600"},o1={class:"flex-1"},i1={class:"flex items-center space-x-2"},a1={class:"flex-1 bg-gray-200 rounded-full h-6 relative"},l1={class:"text-xs font-medium text-white"},c1={class:"w-16 text-sm text-gray-600 text-right"},u1={key:4,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},d1={class:"bg-white rounded-lg p-6 max-w-md w-full mx-4"},f1={class:"flex justify-between items-center mb-4"},h1={class:"space-y-4"},p1={class:"flex space-x-3"},m1=["disabled"],g1=Ee({__name:"DashboardView",setup(e){const t=Qt(),s=zu(),r=nr(),n=no(),o=U(!1),i=U(""),a=V(()=>{var y;return r.params.restaurante_id||((y=t.currentRestaurant)==null?void 0:y.id)}),l=y=>new Intl.NumberFormat("es-ES",{minimumFractionDigits:2,maximumFractionDigits:2}).format(y),d=y=>new Intl.DateTimeFormat("es-ES",{hour:"2-digit",minute:"2-digit",second:"2-digit"}).format(y),u=y=>{const g=new Date(y);return new Intl.DateTimeFormat("es-ES",{weekday:"short",day:"numeric"}).format(g)},f=y=>({pendiente:"Pendiente",confirmado:"Confirmado",en_preparacion:"En preparación",listo:"Listo",entregado:"Entregado",pagado:"Pagado",cancelado:"Cancelado"})[y]||y,h=async()=>{if(!a.value){console.warn("No hay restaurante seleccionado");return}try{s.clearError(),await s.initialize(a.value)}catch(y){console.error("Error inicializando dashboard:",y)}},p=async()=>{if(a.value)try{await s.refreshData(a.value)}catch(y){console.error("Error refrescando datos:",y)}},x=async y=>{var D;const $=y.target.value;$&&$!==((D=t.currentRestaurant)==null?void 0:D.id)&&(t.setCurrentRestaurant($),await n.push({name:"dashboard",params:{restaurante_id:$}}),await h())},w=()=>{s.realTimeEnabled?s.disableRealTime():s.enableRealTime()},S=()=>{o.value=!0,i.value=""},R=()=>{if(!i.value.trim()||!a.value)return;const y=`${window.location.origin}/menu/${a.value}/${i.value.trim()}`;window.open(`https://api.qrserver.com/v1/create-qr-code/?size=300x300&data=${encodeURIComponent(y)}`,"_blank"),o.value=!1,i.value=""};return Be(async()=>{var y;console.log("🏪 DashboardView montado");try{t.requireDashboardAccess()}catch(g){console.error("Sin acceso al dashboard:",g),await n.push({name:"home"});return}if(a.value&&a.value!==((y=t.currentRestaurant)==null?void 0:y.id)){if(await t.checkRestaurantAccess(a.value))t.setCurrentRestaurant(a.value);else if(console.warn("Sin acceso al restaurante:",a.value),t.userRestaurants.length>0){await n.push({name:"dashboard",params:{restaurante_id:t.userRestaurants[0].id}});return}}await h()}),it(()=>{console.log("🧹 DashboardView desmontado - limpiando..."),s.cleanup()}),(y,g)=>{var D,se,W,L,A;const $=Jn("router-link");return b(),k("div",Rg,[c("div",jg,[c("div",Og,[c("div",Ig,[c("div",null,[c("div",Mg,[g[5]||(g[5]=c("h1",{class:"text-2xl font-bold text-gray-900"},"Dashboard",-1)),B(s).isRealTimeConnected?(b(),k("span",Lg,g[3]||(g[3]=[c("div",{class:"w-2 h-2 bg-green-400 rounded-full mr-1 animate-pulse"},null,-1),xe(" En vivo ")]))):(b(),k("span",Dg,g[4]||(g[4]=[c("div",{class:"w-2 h-2 bg-red-400 rounded-full mr-1"},null,-1),xe(" Desconectado ")])))]),c("p",Ng,[xe(" Bienvenido, "+E((D=B(t).profile)==null?void 0:D.nombre_completo)+" ",1),B(t).currentRestaurant?(b(),k("span",Fg," · "+E(B(t).currentRestaurant.nombre),1)):F("",!0)]),B(s).lastUpdate?(b(),k("p",Ug," Última actualización: "+E(d(B(s).lastUpdate)),1)):F("",!0)]),c("div",Bg,[B(t).userRestaurants.length>1?(b(),k("select",{key:0,value:(se=B(t).currentRestaurant)==null?void 0:se.id,onChange:x,class:"border border-gray-300 rounded-md px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-orange-500"},[(b(!0),k(fe,null,Ce(B(t).userRestaurants,T=>(b(),k("option",{key:T.id,value:T.id},E(T.nombre)+" ("+E(T.role)+") ",9,Vg))),128))],40,zg)):F("",!0),c("button",{onClick:w,class:ye(["px-3 py-2 rounded-lg text-sm font-medium transition-colors",B(s).realTimeEnabled?"bg-green-100 text-green-800 hover:bg-green-200":"bg-gray-100 text-gray-800 hover:bg-gray-200"])},E(B(s).realTimeEnabled?"Tiempo real ON":"Tiempo real OFF"),3),c("button",{onClick:p,disabled:B(s).loading,class:"bg-orange-500 text-white px-4 py-2 rounded-lg hover:bg-orange-600 disabled:opacity-50 transition-colors flex items-center space-x-2"},[B(s).loading?(b(),k("svg",qg,g[6]||(g[6]=[c("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),c("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):(b(),k("svg",Kg,g[7]||(g[7]=[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"},null,-1)]))),c("span",null,E(B(s).loading?"Actualizando...":"Actualizar"),1)],8,Hg)])])])]),B(s).alertas.length>0?(b(),k("div",Wg,[c("div",Gg,[(b(!0),k(fe,null,Ce(B(s).alertas,(T,I)=>(b(),k("div",{key:I,class:ye(["p-4 rounded-lg border-l-4",T.tipo==="error"?"bg-red-50 border-red-400 text-red-800":T.tipo==="warning"?"bg-yellow-50 border-yellow-400 text-yellow-800":T.tipo==="success"?"bg-green-50 border-green-400 text-green-800":"bg-blue-50 border-blue-400 text-blue-800"])},[c("div",Jg,[T.tipo==="warning"?(b(),k("svg",Qg,g[8]||(g[8]=[c("path",{"fill-rule":"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z","clip-rule":"evenodd"},null,-1)]))):F("",!0),c("span",Yg,E(T.mensaje),1)])],2))),128))])])):F("",!0),B(s).loading&&!B(s).hasData?(b(),k("div",Xg,g[9]||(g[9]=[c("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-orange-500"},null,-1),c("span",{class:"ml-3 text-gray-600"},"Cargando dashboard...",-1)]))):B(s).error?(b(),k("div",Zg,[c("div",ev,[g[10]||(g[10]=c("svg",{class:"mx-auto h-12 w-12 text-red-400 mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),g[11]||(g[11]=c("h3",{class:"text-lg font-medium text-red-800 mb-2"},"Error al cargar el dashboard",-1)),c("p",tv,E(B(s).error),1),c("button",{onClick:h,class:"bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 transition-colors"}," Reintentar ")])])):(b(),k("div",sv,[c("div",rv,[c("div",nv,[c("div",ov,[g[14]||(g[14]=c("div",{class:"flex-shrink-0"},[c("div",{class:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center"},[c("svg",{class:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})])])],-1)),c("div",iv,[c("dl",null,[g[13]||(g[13]=c("dt",{class:"text-sm font-medium text-gray-500 truncate"},"Ventas hoy",-1)),c("dd",av,"€"+E(l(B(s).ventasHoy)),1),B(s).crecimientoVentas!==0?(b(),k("dd",lv,[c("span",{class:ye(B(s).crecimientoVentas>0?"text-green-600":"text-red-600")},E(B(s).crecimientoVentas>0?"+":"")+E(B(s).crecimientoVentas.toFixed(1))+"% ",3),g[12]||(g[12]=xe(" vs ayer "))])):F("",!0)])])])]),c("div",cv,[c("div",uv,[g[16]||(g[16]=c("div",{class:"flex-shrink-0"},[c("div",{class:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center"},[c("svg",{class:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"})])])],-1)),c("div",dv,[c("dl",null,[g[15]||(g[15]=c("dt",{class:"text-sm font-medium text-gray-500 truncate"},"Pedidos activos",-1)),c("dd",fv,E(B(s).totalPedidosActivos),1),c("dd",hv,E(B(s).estadoPedidos.pendientes)+" pendientes, "+E(B(s).estadoPedidos.en_preparacion)+" en cocina ",1)])])])]),c("div",pv,[c("div",mv,[g[18]||(g[18]=c("div",{class:"flex-shrink-0"},[c("div",{class:"w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center"},[c("svg",{class:"w-6 h-6 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})])])],-1)),c("div",gv,[c("dl",null,[g[17]||(g[17]=c("dt",{class:"text-sm font-medium text-gray-500 truncate"},"Ocupación",-1)),c("dd",vv,E(B(s).mesasOcupadas.ocupadas)+"/"+E(B(s).mesasOcupadas.total),1),c("dd",yv,E(B(s).mesasOcupadas.porcentaje.toFixed(0))+"% ocupación ",1)])])])]),c("div",bv,[c("div",_v,[g[20]||(g[20]=c("div",{class:"flex-shrink-0"},[c("div",{class:"w-12 h-12 bg-orange-100 rounded-lg flex items-center justify-center"},[c("svg",{class:"w-6 h-6 text-orange-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})])])],-1)),c("div",wv,[c("dl",null,[g[19]||(g[19]=c("dt",{class:"text-sm font-medium text-gray-500 truncate"},"Productividad",-1)),c("dd",xv,E(B(s).productividadCocina.porcentaje.toFixed(0))+"%",1),c("dd",kv,E(B(s).productividadCocina.completados)+"/"+E(B(s).productividadCocina.total)+" items ",1)])])])])]),c("div",$v,[c("div",Ev,[g[21]||(g[21]=c("h3",{class:"text-lg font-medium text-gray-900 mb-4 flex items-center"},[c("svg",{class:"w-5 h-5 mr-2 text-orange-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})]),xe(" Gestión de Pedidos ")],-1)),c("div",Cv,[oe($,{to:`/pedidos/${(W=B(t).currentRestaurant)==null?void 0:W.id}`,class:"block w-full bg-orange-500 text-white text-center py-3 px-4 rounded-lg hover:bg-orange-600 transition-colors font-medium"},{default:ze(()=>[xe(" Ver todos los pedidos ("+E(B(s).totalPedidosActivos)+") ",1)]),_:1},8,["to"]),c("button",{onClick:S,class:"block w-full bg-gray-100 text-gray-700 text-center py-3 px-4 rounded-lg hover:bg-gray-200 transition-colors font-medium"}," Generar QR de mesa ")])]),g[25]||(g[25]=Fr('<div class="bg-white rounded-lg shadow-sm border p-6" data-v-6716ffa6><h3 class="text-lg font-medium text-gray-900 mb-4 flex items-center" data-v-6716ffa6><svg class="w-5 h-5 mr-2 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-6716ffa6><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.746 0 3.332.477 4.5 1.253v13C19.832 18.477 18.246 18 16.5 18c-1.746 0-3.332.477-4.5 1.253" data-v-6716ffa6></path></svg> Gestión de Menú </h3><div class="space-y-3" data-v-6716ffa6><button class="block w-full bg-blue-500 text-white text-center py-3 px-4 rounded-lg hover:bg-blue-600 transition-colors font-medium" disabled data-v-6716ffa6> Editar menú <span class="text-xs block mt-1 opacity-75" data-v-6716ffa6>Próximamente</span></button><button class="block w-full bg-gray-100 text-gray-700 text-center py-3 px-4 rounded-lg hover:bg-gray-200 transition-colors font-medium" disabled data-v-6716ffa6> Gestionar disponibilidad <span class="text-xs block mt-1 opacity-75" data-v-6716ffa6>Próximamente</span></button></div></div>',1)),c("div",Sv,[g[24]||(g[24]=c("h3",{class:"text-lg font-medium text-gray-900 mb-4 flex items-center"},[c("svg",{class:"w-5 h-5 mr-2 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})]),xe(" Reportes ")],-1)),c("div",Tv,[oe($,{to:`/analytics/${(L=B(t).currentRestaurant)==null?void 0:L.id}`,class:"block w-full bg-purple-500 text-white text-center py-3 px-4 rounded-lg hover:bg-purple-600 transition-colors font-medium"},{default:ze(()=>g[22]||(g[22]=[xe(" Ver analytics ")])),_:1,__:[22]},8,["to"]),g[23]||(g[23]=c("button",{class:"block w-full bg-gray-100 text-gray-700 text-center py-3 px-4 rounded-lg hover:bg-gray-200 transition-colors font-medium",disabled:""},[xe(" Exportar datos "),c("span",{class:"text-xs block mt-1 opacity-75"},"Próximamente")],-1))])])]),c("div",Pv,[c("div",Av,[c("div",Rv,[c("h3",jv,[g[26]||(g[26]=c("svg",{class:"w-5 h-5 mr-2 text-yellow-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),g[27]||(g[27]=xe(" Pedidos Activos ")),c("span",Ov,E(B(s).totalPedidosActivos),1)]),oe($,{to:`/pedidos/${(A=B(t).currentRestaurant)==null?void 0:A.id}`,class:"text-sm text-orange-600 hover:text-orange-700 font-medium"},{default:ze(()=>g[28]||(g[28]=[xe(" Ver todos → ")])),_:1,__:[28]},8,["to"])]),c("div",Iv,[B(s).pedidosActivos.length>0?(b(),k("div",Mv,[(b(!0),k(fe,null,Ce(B(s).pedidosActivos.slice(0,5),T=>(b(),k("div",{key:T.id,class:"flex items-center justify-between p-4 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors"},[c("div",Lv,[c("div",Dv,[c("div",{class:ye(["w-3 h-3 rounded-full",T.estado==="pendiente"?"bg-yellow-400":T.estado==="en_preparacion"?"bg-blue-400":T.estado==="listo"?"bg-green-400":"bg-gray-400"])},null,2)]),c("div",null,[c("p",Nv,E(T.numero_pedido),1),c("p",Fv," Mesa "+E(T.numero_mesa)+" · "+E(T.cliente_nombre),1),c("p",Uv,E(T.tiempo_transcurrido)+" min · "+E(f(T.estado)),1)])]),c("div",Bv,[c("p",zv,"€"+E(l(T.total)),1),c("p",Vv,E(T.items_totales)+" items",1)])]))),128))])):(b(),k("div",Hv,g[29]||(g[29]=[c("svg",{class:"mx-auto h-12 w-12 text-gray-300 mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})],-1),c("p",null,"No hay pedidos activos",-1),c("p",{class:"text-sm"},"Los nuevos pedidos aparecerán aquí automáticamente",-1)])))])]),c("div",qv,[g[31]||(g[31]=c("div",{class:"px-6 py-4 border-b border-gray-200"},[c("h3",{class:"text-lg font-medium text-gray-900 flex items-center"},[c("svg",{class:"w-5 h-5 mr-2 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4M7.835 4.697a3.42 3.42 0 001.946-.806 3.42 3.42 0 014.438 0 3.42 3.42 0 001.946.806 3.42 3.42 0 013.138 3.138 3.42 3.42 0 00.806 1.946 3.42 3.42 0 010 4.438 3.42 3.42 0 00-.806 1.946 3.42 3.42 0 01-3.138 3.138 3.42 3.42 0 00-1.946.806 3.42 3.42 0 01-4.438 0 3.42 3.42 0 00-1.946-.806 3.42 3.42 0 01-3.138-3.138 3.42 3.42 0 00-.806-1.946 3.42 3.42 0 010-4.438 3.42 3.42 0 00.806-1.946 3.42 3.42 0 013.138-3.138z"})]),xe(" Productos Populares ")])],-1)),c("div",Kv,[B(s).productosMasVendidos.length>0?(b(),k("div",Wv,[(b(!0),k(fe,null,Ce(B(s).productosMasVendidos.slice(0,5),(T,I)=>(b(),k("div",{key:T.id,class:"flex items-center space-x-3"},[c("div",Gv,[c("div",{class:ye(["w-8 h-8 rounded-full flex items-center justify-center text-sm font-bold",I===0?"bg-yellow-100 text-yellow-800":I===1?"bg-gray-100 text-gray-600":I===2?"bg-orange-100 text-orange-600":"bg-blue-100 text-blue-600"])},E(I+1),3)]),c("div",Jv,[c("p",Qv,E(T.nombre),1),c("p",Yv,E(T.cantidad_vendida)+" vendidos · €"+E(l(T.ingresos_totales)),1)]),c("div",Xv,[c("div",Zv,[c("div",{class:"bg-orange-500 h-2 rounded-full transition-all duration-300",style:ps({width:`${T.cantidad_vendida/Math.max(...B(s).productosMasVendidos.map(N=>N.cantidad_vendida))*100}%`})},null,4)])])]))),128))])):(b(),k("div",e1,g[30]||(g[30]=[c("svg",{class:"mx-auto h-12 w-12 text-gray-300 mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})],-1),c("p",null,"No hay datos de productos",-1),c("p",{class:"text-sm"},"Los productos más vendidos aparecerán aquí",-1)])))])])]),B(s).ventasUltimos7Dias.length>0?(b(),k("div",t1,[c("div",s1,[g[32]||(g[32]=c("h3",{class:"text-lg font-medium text-gray-900 mb-6 flex items-center"},[c("svg",{class:"w-5 h-5 mr-2 text-indigo-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 12l3-3 3 3 4-4M8 21l4-4 4 4M3 4h18M4 4h16v12a1 1 0 01-1 1H5a1 1 0 01-1-1V4z"})]),xe(" Ventas de los Últimos 7 Días ")],-1)),c("div",r1,[(b(!0),k(fe,null,Ce(B(s).ventasUltimos7Dias,T=>(b(),k("div",{key:T.fecha,class:"flex items-center space-x-4"},[c("div",n1,E(u(T.fecha)),1),c("div",o1,[c("div",i1,[c("div",a1,[c("div",{class:"bg-gradient-to-r from-orange-400 to-orange-600 h-6 rounded-full transition-all duration-500 flex items-center justify-end pr-2",style:ps({width:`${T.ventas/Math.max(...B(s).ventasUltimos7Dias.map(I=>I.ventas))*100}%`})},[c("span",l1," €"+E(l(T.ventas)),1)],4)]),c("div",c1,E(T.pedidos)+" pedidos ",1)])])]))),128))])])])):F("",!0)])),o.value?(b(),k("div",u1,[c("div",d1,[c("div",f1,[g[34]||(g[34]=c("h3",{class:"text-lg font-medium text-gray-900"},"Generar QR para Mesa",-1)),c("button",{onClick:g[0]||(g[0]=T=>o.value=!1),class:"text-gray-400 hover:text-gray-600"},g[33]||(g[33]=[c("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),c("div",h1,[c("div",null,[g[35]||(g[35]=c("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Número de Mesa",-1)),Ke(c("input",{"onUpdate:modelValue":g[1]||(g[1]=T=>i.value=T),type:"text",placeholder:"Ej: 1, A1, Terraza-5",class:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-orange-500"},null,512),[[nt,i.value]])]),c("div",p1,[c("button",{onClick:R,disabled:!i.value.trim(),class:"flex-1 bg-orange-500 text-white py-2 px-4 rounded-lg hover:bg-orange-600 disabled:opacity-50 transition-colors"}," Generar QR ",8,m1),c("button",{onClick:g[2]||(g[2]=T=>o.value=!1),class:"flex-1 bg-gray-100 text-gray-700 py-2 px-4 rounded-lg hover:bg-gray-200 transition-colors"}," Cancelar ")])])])])):F("",!0)])}}}),Yr=(e,t)=>{const s=e.__vccOpts||e;for(const[r,n]of t)s[r]=n;return s},v1=Yr(g1,[["__scopeId","data-v-6716ffa6"]]),y1=to("orders",()=>{const e=U([]),t=U(!1),s=U(null);async function r(){try{t.value=!0,s.value=null;const{data:l,error:d}=await ge.from("pedidos").select(`
          *,
          items:items_pedido (
            id,
            plato_id,
            nombre_plato,
            cantidad,
            precio,
            estado,
            estacion_preparacion,
            notas
          )
        `).order("hora_pedido",{ascending:!1});if(d)throw d;e.value=l||[]}catch(l){s.value=l.message,console.error("Error loading orders:",l)}finally{t.value=!1}}async function n(l,d){try{const{error:u}=await ge.from("pedidos").update(d).eq("id",l);if(u)throw u}catch(u){s.value=u.message,console.error("Error updating order:",u)}}async function o(l,d){try{const{error:u}=await ge.from("items_pedido").update(d).eq("id",l);if(u)throw u}catch(u){s.value=u.message,console.error("Error updating order item:",u)}}function i(l){const{eventType:d,new:u,old:f}=l;switch(d){case"INSERT":e.value.unshift(u);break;case"UPDATE":const h=e.value.findIndex(p=>p.id===f.id);h!==-1&&(e.value[h]={...e.value[h],...u});break;case"DELETE":e.value=e.value.filter(p=>p.id!==f.id);break}}function a(l){const{eventType:d,new:u,old:f}=l,h=e.value.find(p=>p.items.some(x=>x.id===((f==null?void 0:f.id)||(u==null?void 0:u.id))));if(h)switch(d){case"INSERT":h.items.push(u);break;case"UPDATE":const p=h.items.findIndex(x=>x.id===f.id);p!==-1&&(h.items[p]={...h.items[p],...u});break;case"DELETE":h.items=h.items.filter(x=>x.id!==f.id);break}}return{orders:e,loading:t,error:s,loadOrders:r,updateOrder:n,updateOrderItem:o,handleOrderUpdate:i,handleItemUpdate:a}});function b1(e,t){return b(),k("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0 3.181 3.183a8.25 8.25 0 0 0 13.803-3.7M4.031 9.865a8.25 8.25 0 0 1 13.803-3.7l3.181 3.182m0-4.991v4.99"})])}function jr(e,t){return b(),k("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})])}function _1(e,t){return b(),k("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 12h3.75M9 15h3.75M9 18h3.75m3 .75H18a2.25 2.25 0 0 0 2.25-2.25V6.108c0-1.135-.845-2.098-1.976-2.192a48.424 48.424 0 0 0-1.123-.08m-5.801 0c-.065.21-.1.433-.1.664 0 .414.336.75.75.75h4.5a.75.75 0 0 0 .75-.75 2.25 2.25 0 0 0-.1-.664m-5.8 0A2.251 2.251 0 0 1 13.5 2.25H15c1.012 0 1.867.668 2.15 1.586m-5.8 0c-.376.023-.75.05-1.124.08C9.095 4.01 8.25 4.973 8.25 6.108V8.25m0 0H4.875c-.621 0-1.125.504-1.125 1.125v11.25c0 .621.504 1.125 1.125 1.125h9.75c.621 0 1.125-.504 1.125-1.125V9.375c0-.621-.504-1.125-1.125-1.125H8.25ZM6.75 12h.008v.008H6.75V12Zm0 3h.008v.008H6.75V15Zm0 3h.008v.008H6.75V18Z"})])}function Ln(e,t){return b(),k("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 6v6h4.5m4.5 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})])}function w1(e,t){return b(),k("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M2.25 8.25h19.5M2.25 9h19.5m-16.5 5.25h6m-6 2.25h3m-3.75 3h15a2.25 2.25 0 0 0 2.25-2.25V6.75A2.25 2.25 0 0 0 19.5 4.5h-15a2.25 2.25 0 0 0-2.25 2.25v10.5A2.25 2.25 0 0 0 4.5 19.5Z"})])}function Dn(e,t){return b(),k("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z"})])}function x1(e,t){return b(),k("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M2.036 12.322a1.012 1.012 0 0 1 0-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178Z"}),c("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"})])}function Vu(e,t){return b(),k("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M10.05 4.575a1.575 1.575 0 1 0-3.15 0v3m3.15-3v-1.5a1.575 1.575 0 0 1 3.15 0v1.5m-3.15 0 .075 5.925m3.075.75V4.575m0 0a1.575 1.575 0 0 1 3.15 0V15M6.9 7.575a1.575 1.575 0 1 0-3.15 0v8.175a6.75 6.75 0 0 0 6.75 6.75h2.018a5.25 5.25 0 0 0 3.712-1.538l1.732-1.732a5.25 5.25 0 0 0 1.538-3.712l.003-2.024a.668.668 0 0 1 .198-.471 1.575 1.575 0 1 0-2.228-2.228 3.818 3.818 0 0 0-1.12 2.687M6.9 7.575V12m6.27 4.318A4.49 4.49 0 0 1 16.35 15m.002 0h-.002"})])}function k1(e,t){return b(),k("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L6.832 19.82a4.5 4.5 0 0 1-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 0 1 1.13-1.897L16.863 4.487Zm0 0L19.5 7.125"})])}function Hu(e,t){return b(),k("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M5.25 5.653c0-.856.917-1.398 1.667-.986l11.54 6.347a1.125 1.125 0 0 1 0 1.972l-11.54 6.347a1.125 1.125 0 0 1-1.667-.986V5.653Z"})])}function qu(e,t){return b(),k("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m9.75 9.75 4.5 4.5m0-4.5-4.5 4.5M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})])}function $1(e,t){return b(),k("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18 18 6M6 6l12 12"})])}const Hr=Ee({__name:"EstadoBadge",props:{estado:{},showIcon:{type:Boolean,default:!0},size:{default:"md"}},setup(e){const t=e,s={pendiente:{text:"Pendiente",classes:"bg-yellow-100 text-yellow-800",icon:Ln},confirmado:{text:"Confirmado",classes:"bg-orange-100 text-orange-800",icon:jr},en_preparacion:{text:"En preparación",classes:"bg-blue-100 text-blue-800",icon:Hu},listo:{text:"Listo",classes:"bg-green-100 text-green-800",icon:jr},entregado:{text:"Entregado",classes:"bg-gray-100 text-gray-800",icon:Vu},pagado:{text:"Pagado",classes:"bg-emerald-100 text-emerald-800",icon:jr},cancelado:{text:"Cancelado",classes:"bg-red-100 text-red-800",icon:qu}},r=()=>({sm:"px-2 py-0.5 text-xs",md:"px-2.5 py-0.5 text-sm",lg:"px-3 py-1 text-base"})[t.size],n=()=>{const a=s[t.estado],l="inline-flex items-center rounded-full font-medium",d=r(),u=(a==null?void 0:a.classes)||"bg-gray-100 text-gray-800";return`${l} ${d} ${u}`},o=()=>{const a=s[t.estado];return(a==null?void 0:a.text)||t.estado},i=()=>{const a=s[t.estado];return(a==null?void 0:a.icon)||Ln};return(a,l)=>(b(),k("span",{class:ye(n())},[a.showIcon?(b(),De(Qs(i()),{key:0,class:"w-3 h-3 mr-1"})):F("",!0),xe(" "+E(o()),1)],2))}}),E1={class:"flex items-center text-sm"},Ki=Ee({__name:"TiempoTranscurrido",props:{minutos:{}},setup(e){const t=e,s=V(()=>t.minutos||0),r=V(()=>{const i=s.value;if(i<1)return"Ahora mismo";if(i<60)return`${i} min`;{const a=Math.floor(i/60),l=i%60;return`${a}h ${l}m`}}),n=()=>s.value>60?"text-red-500":s.value>30?"text-yellow-500":"text-gray-400",o=()=>s.value>60?"text-red-700 font-semibold":s.value>30?"text-yellow-700 font-medium":"text-gray-600";return(i,a)=>(b(),k("div",E1,[oe(B(Ln),{class:ye(["w-4 h-4 mr-1",n()])},null,8,["class"]),c("span",{class:ye(o())},E(r.value),3)]))}}),C1={class:"flex justify-between items-start mb-2"},S1={class:"font-semibold text-sm text-gray-900"},T1={class:"text-xs text-gray-500"},P1={class:"text-right"},A1={key:0,class:"mt-1"},R1={class:"inline-flex items-center px-1.5 py-0.5 rounded text-xs font-medium bg-red-100 text-red-800"},j1={class:"mb-3"},O1={class:"flex items-center justify-between"},I1={class:"font-medium text-gray-900 text-sm"},M1={class:"text-sm font-semibold text-gray-700"},L1={key:0,class:"mt-1"},D1={key:0,class:"text-xs text-blue-600"},N1={class:"list-disc list-inside mt-1"},F1={key:1,class:"text-xs text-orange-600 mt-1"},U1={key:1,class:"mt-1 text-xs text-gray-500"},B1={class:"mb-3"},z1={class:"flex gap-2"},V1={key:0,class:"mt-2 bg-red-500 text-white px-2 py-1 rounded text-center text-xs font-medium"},El=Ee({__name:"ItemCocinaCard",props:{item:{}},emits:["cambiar-estado","cambiar-prioridad"],setup(e,{emit:t}){const s=e,r=t,n=V(()=>s.item.tiempo_transcurrido||0),o=V(()=>s.item.prioridad||0),i=()=>o.value>2?"border-red-500 shadow-md":o.value>0?"border-orange-400":"border-gray-200",a=()=>{const l=o.value>0?0:1;r("cambiar-prioridad",s.item.id,l)};return(l,d)=>(b(),k("div",{class:ye(["bg-white border rounded-lg p-3 transition-all duration-200",i(),n.value>20&&"border-red-300 bg-red-50",n.value>10&&n.value<=20&&"border-yellow-300 bg-yellow-50"])},[c("div",C1,[c("div",null,[c("div",S1,E(l.item.numero_pedido||`Pedido ${(l.item.pedido_id||"").slice(-4)}`),1),c("div",T1," Mesa "+E(l.item.numero_mesa||"N/A"),1)]),c("div",P1,[oe(Ki,{minutos:n.value},null,8,["minutos"]),o.value>0?(b(),k("div",A1,[c("span",R1,[oe(B(Dn),{class:"w-3 h-3 mr-1"}),xe(" Prioridad "+E(o.value),1)])])):F("",!0)])]),c("div",j1,[c("div",O1,[c("h4",I1,E(l.item.nombre_plato||"Plato sin nombre"),1),c("span",M1,"x"+E(l.item.cantidad||1),1)]),l.item.notas||l.item.modificaciones&&l.item.modificaciones.length>0?(b(),k("div",L1,[l.item.modificaciones&&l.item.modificaciones.length>0?(b(),k("div",D1,[d[3]||(d[3]=c("span",{class:"font-medium"},"Modificaciones:",-1)),c("ul",N1,[(b(!0),k(fe,null,Ce(l.item.modificaciones,u=>(b(),k("li",{key:u},E(u),1))),128))])])):F("",!0),l.item.notas?(b(),k("div",F1,[d[4]||(d[4]=c("span",{class:"font-medium"},"Nota:",-1)),xe(" "+E(l.item.notas),1)])):F("",!0)])):F("",!0),l.item.tiempo_preparacion_estimado?(b(),k("div",U1," Tiempo estimado: "+E(l.item.tiempo_preparacion_estimado)+" min ",1)):F("",!0)]),c("div",B1,[oe(Hr,{estado:l.item.estado||"pendiente",size:"sm"},null,8,["estado"])]),c("div",z1,[l.item.estado==="pendiente"?(b(),k("button",{key:0,onClick:d[0]||(d[0]=u=>l.$emit("cambiar-estado",l.item.id,"en_preparacion")),class:"flex-1 bg-blue-500 text-white px-3 py-1.5 rounded text-sm font-medium hover:bg-blue-600 transition-colors"}," Iniciar ")):F("",!0),l.item.estado==="en_preparacion"?(b(),k("button",{key:1,onClick:d[1]||(d[1]=u=>l.$emit("cambiar-estado",l.item.id,"listo")),class:"flex-1 bg-green-500 text-white px-3 py-1.5 rounded text-sm font-medium hover:bg-green-600 transition-colors"}," Listo ")):F("",!0),l.item.estado==="listo"?(b(),k("button",{key:2,onClick:d[2]||(d[2]=u=>l.$emit("cambiar-estado",l.item.id,"servido")),class:"flex-1 bg-gray-500 text-white px-3 py-1.5 rounded text-sm font-medium hover:bg-gray-600 transition-colors"}," Servir ")):F("",!0),["servido","cancelado"].includes(l.item.estado||"pendiente")?F("",!0):(b(),k("button",{key:3,onClick:a,class:ye(["px-2 py-1.5 rounded text-sm font-medium transition-colors",o.value>0?"bg-red-100 text-red-700 hover:bg-red-200":"bg-gray-100 text-gray-700 hover:bg-gray-200"])},[oe(B(Dn),{class:"w-4 h-4"})],2))]),n.value>20&&!["servido","cancelado"].includes(l.item.estado||"pendiente")?(b(),k("div",V1," ⚠️ Tiempo crítico excedido ")):F("",!0)],2))}}),H1={class:"flex min-h-full items-center justify-center p-4"},q1={class:"flex items-center justify-between p-6 border-b border-gray-200"},K1={class:"text-xl font-semibold text-gray-900"},W1={class:"text-sm text-gray-500 mt-1"},G1={class:"flex items-center space-x-3"},J1={class:"p-6"},Q1={class:"grid grid-cols-1 lg:grid-cols-3 gap-6"},Y1={class:"lg:col-span-2"},X1={key:0,class:"mb-6"},Z1={class:"bg-gray-50 rounded-lg p-4"},ey={class:"text-sm text-gray-900"},ty={key:0,class:"text-sm text-gray-500 mt-1"},sy={class:"mb-6"},ry={class:"flex items-center justify-between mb-4"},ny={key:0,class:"flex justify-center py-8"},oy={key:1,class:"bg-red-50 border border-red-200 rounded-lg p-4"},iy={class:"flex"},ay={class:"text-sm text-red-700 mt-1"},ly={key:2,class:"space-y-3"},cy={class:"flex items-start justify-between"},uy={class:"flex-1"},dy={class:"flex items-center justify-between mb-2"},fy={class:"font-medium text-gray-900"},hy={class:"text-sm text-gray-500"},py={key:0,class:"mb-2"},my={class:"text-xs text-blue-600 list-disc list-inside"},gy={key:1,class:"mb-2"},vy={class:"text-xs text-orange-600"},yy={class:"flex items-center justify-between"},by={class:"text-sm font-medium text-gray-900"},_y={key:0,class:"mt-3 flex gap-2"},wy=["onClick"],xy=["onClick"],ky=["onClick"],$y={key:0,class:"text-center py-8 text-gray-500"},Ey={key:1,class:"mb-6"},Cy={class:"bg-yellow-50 border border-yellow-200 rounded-lg p-4"},Sy={class:"text-sm text-gray-900"},Ty={key:2,class:"mb-6"},Py={class:"bg-blue-50 border border-blue-200 rounded-lg p-4"},Ay={class:"text-sm text-gray-900"},Ry={class:"bg-gray-50 rounded-lg p-4 mb-6"},jy={class:"space-y-2 text-sm"},Oy={class:"flex justify-between"},Iy={class:"font-medium"},My={key:0,class:"flex justify-between"},Ly={class:"font-medium"},Dy={key:1,class:"flex justify-between"},Ny={class:"font-medium"},Fy={key:2,class:"flex justify-between"},Uy={class:"font-medium"},By={key:3,class:"flex justify-between"},zy={class:"font-medium"},Vy={class:"flex justify-between pt-2 border-t border-gray-200"},Hy={class:"bg-gray-50 rounded-lg p-4 mb-6"},qy={class:"space-y-2 text-sm"},Ky={class:"flex justify-between"},Wy={class:"font-medium"},Gy={key:0,class:"flex justify-between"},Jy={class:"font-medium text-red-600"},Qy={key:1,class:"flex justify-between"},Yy={class:"font-medium"},Xy={key:2,class:"flex justify-between"},Zy={class:"font-medium"},eb={class:"flex justify-between pt-2 border-t border-gray-200"},tb={class:"font-bold text-lg"},sb={class:"bg-gray-50 rounded-lg p-4 mb-6"},rb={class:"space-y-3"},nb={class:"flex justify-between text-sm"},ob={class:"font-medium"},ib={class:"w-full bg-gray-200 rounded-full h-3"},ab={class:"space-y-3"},lb={class:"flex justify-end px-6 py-4 border-t border-gray-200 bg-gray-50"},cb=Ee({__name:"DetallesPedidoModal",props:{pedido:{},abierto:{type:Boolean}},emits:["cerrar","cambiar-estado","cambiar-estado-item"],setup(e,{emit:t}){const s=e,r=t,n=U([]),o=U(!1),i=U(null),a=V(()=>s.pedido.cliente_nombre||s.pedido.nombre_cliente||null),l=V(()=>s.pedido.items&&s.pedido.items.length>0?s.pedido.items:n.value),d=V(()=>l.value.length),u=V(()=>l.value.filter(y=>["listo","servido"].includes(y.estado||"pendiente")).length),f=V(()=>d.value===0?0:Math.round(u.value/d.value*100)),h=V(()=>l.value.length>0&&l.value.every(y=>["listo","servido"].includes(y.estado||"pendiente"))),p=y=>{if(!y)return"--:--";try{return new Date(y).toLocaleTimeString("es-ES",{hour:"2-digit",minute:"2-digit"})}catch{return"--:--"}},x=()=>{const y=s.pedido.hora_pedido;if(!y)return 0;try{const g=new Date,$=new Date(y);return Math.floor((g.getTime()-$.getTime())/(1e3*60))}catch{return 0}},w=y=>{const g=y.precio_unitario||y.precio||0,$=y.cantidad||1;return(g*$).toFixed(2)},S=async()=>{var y;if((y=s.pedido)!=null&&y.id)try{o.value=!0,i.value=null,console.log("Cargando items para pedido:",s.pedido.id);const{data:g,error:$}=await ge.from("items_pedido").select(`
        id,
        pedido_id,
        plato_id,
        nombre_plato,
        cantidad,
        precio,
        precio_unitario,
        estado,
        notas,
        modificaciones,
        estacion_preparacion,
        prioridad
      `).eq("pedido_id",s.pedido.id).order("creado_el",{ascending:!0});if($){console.error("Error cargando items del pedido:",$),i.value=$.message;return}console.log("Items cargados:",g),n.value=g||[]}catch(g){console.error("Error inesperado cargando items:",g),i.value=g.message||"Error inesperado"}finally{o.value=!1}},R=()=>{confirm("¿Estás seguro de que quieres cancelar este pedido?")&&r("cambiar-estado",s.pedido.id,"cancelado")};return Be(()=>{s.abierto&&(!s.pedido.items||s.pedido.items.length===0)&&S()}),ot(()=>s.abierto,y=>{y&&(!s.pedido.items||s.pedido.items.length===0)&&S()}),ot(()=>{var y;return(y=s.pedido)==null?void 0:y.id},y=>{y&&s.abierto&&(!s.pedido.items||s.pedido.items.length===0)&&S()}),(y,g)=>(b(),De(Kn,{to:"body"},[y.abierto?(b(),k("div",{key:0,class:"fixed inset-0 z-50 overflow-y-auto",onClick:g[6]||(g[6]=$=>y.$emit("cerrar"))},[g[31]||(g[31]=c("div",{class:"fixed inset-0 bg-black bg-opacity-50 transition-opacity"},null,-1)),c("div",H1,[c("div",{class:"relative w-full max-w-4xl bg-white rounded-lg shadow-xl",onClick:g[5]||(g[5]=Is(()=>{},["stop"]))},[c("div",q1,[c("div",null,[c("h2",K1," Detalles del Pedido "+E(y.pedido.numero_pedido||"Sin número"),1),c("p",W1," Mesa "+E(y.pedido.numero_mesa||"N/A")+" • "+E(p(y.pedido.hora_pedido)),1)]),c("div",G1,[oe(Hr,{estado:y.pedido.estado||"pendiente",size:"lg"},null,8,["estado"]),c("button",{onClick:g[0]||(g[0]=$=>y.$emit("cerrar")),class:"text-gray-400 hover:text-gray-500"},[oe(B($1),{class:"w-6 h-6"})])])]),c("div",J1,[c("div",Q1,[c("div",Y1,[a.value?(b(),k("div",X1,[g[7]||(g[7]=c("h3",{class:"text-lg font-medium text-gray-900 mb-2"},"Cliente",-1)),c("div",Z1,[c("p",ey,E(a.value),1),y.pedido.telefono_cliente?(b(),k("p",ty,E(y.pedido.telefono_cliente),1)):F("",!0)])])):F("",!0),c("div",sy,[c("div",ry,[g[8]||(g[8]=c("h3",{class:"text-lg font-medium text-gray-900"},"Items del pedido",-1)),o.value?F("",!0):(b(),k("button",{key:0,onClick:S,class:"text-sm text-orange-600 hover:text-orange-800"}," Actualizar "))]),o.value?(b(),k("div",ny,g[9]||(g[9]=[c("div",{class:"animate-spin rounded-full h-6 w-6 border-b-2 border-orange-500"},null,-1)]))):i.value?(b(),k("div",oy,[c("div",iy,[oe(B(Dn),{class:"h-5 w-5 text-red-400 mr-2"}),c("div",null,[g[10]||(g[10]=c("h4",{class:"text-sm font-medium text-red-800"},"Error al cargar items",-1)),c("p",ay,E(i.value),1),c("button",{onClick:S,class:"mt-2 text-sm text-red-800 underline hover:text-red-900"}," Intentar de nuevo ")])])])):(b(),k("div",ly,[(b(!0),k(fe,null,Ce(l.value,$=>(b(),k("div",{key:$.id,class:"bg-gray-50 rounded-lg p-4"},[c("div",cy,[c("div",uy,[c("div",dy,[c("h4",fy,E($.nombre_plato||"Plato sin nombre"),1),c("span",hy,"x"+E($.cantidad||1),1)]),$.modificaciones&&Array.isArray($.modificaciones)&&$.modificaciones.length>0?(b(),k("div",py,[g[11]||(g[11]=c("p",{class:"text-xs text-blue-600 font-medium"},"Modificaciones:",-1)),c("ul",my,[(b(!0),k(fe,null,Ce($.modificaciones,D=>(b(),k("li",{key:D},E(D),1))),128))])])):F("",!0),$.notas?(b(),k("div",gy,[c("p",vy,[g[12]||(g[12]=c("span",{class:"font-medium"},"Nota:",-1)),xe(" "+E($.notas),1)])])):F("",!0),c("div",yy,[oe(Hr,{estado:$.estado||"pendiente",size:"sm"},null,8,["estado"]),c("span",by," €"+E(w($)),1)])])]),["servido","cancelado"].includes($.estado||"pendiente")?F("",!0):(b(),k("div",_y,[$.estado==="pendiente"?(b(),k("button",{key:0,onClick:D=>y.$emit("cambiar-estado-item",$.id,"en_preparacion"),class:"px-3 py-1 bg-blue-500 text-white rounded text-sm hover:bg-blue-600 transition-colors"}," Iniciar ",8,wy)):F("",!0),$.estado==="en_preparacion"?(b(),k("button",{key:1,onClick:D=>y.$emit("cambiar-estado-item",$.id,"listo"),class:"px-3 py-1 bg-green-500 text-white rounded text-sm hover:bg-green-600 transition-colors"}," Listo ",8,xy)):F("",!0),$.estado==="listo"?(b(),k("button",{key:2,onClick:D=>y.$emit("cambiar-estado-item",$.id,"servido"),class:"px-3 py-1 bg-gray-500 text-white rounded text-sm hover:bg-gray-600 transition-colors"}," Servir ",8,ky)):F("",!0)]))]))),128)),l.value.length===0?(b(),k("div",$y,[g[13]||(g[13]=c("p",null,"No se encontraron items para este pedido",-1)),c("button",{onClick:S,class:"mt-2 text-sm text-orange-600 hover:text-orange-800"}," Intentar cargar de nuevo ")])):F("",!0)]))]),y.pedido.notas?(b(),k("div",Ey,[g[14]||(g[14]=c("h3",{class:"text-lg font-medium text-gray-900 mb-2"},"Notas del pedido",-1)),c("div",Cy,[c("p",Sy,E(y.pedido.notas),1)])])):F("",!0),y.pedido.notas_cocina?(b(),k("div",Ty,[g[15]||(g[15]=c("h3",{class:"text-lg font-medium text-gray-900 mb-2"},"Notas para cocina",-1)),c("div",Py,[c("p",Ay,E(y.pedido.notas_cocina),1)])])):F("",!0)]),c("div",null,[c("div",Ry,[g[22]||(g[22]=c("h3",{class:"text-lg font-medium text-gray-900 mb-3"},"Tiempos",-1)),c("div",jy,[c("div",Oy,[g[16]||(g[16]=c("span",{class:"text-gray-600"},"Pedido realizado:",-1)),c("span",Iy,E(p(y.pedido.hora_pedido)),1)]),y.pedido.hora_confirmacion?(b(),k("div",My,[g[17]||(g[17]=c("span",{class:"text-gray-600"},"Confirmado:",-1)),c("span",Ly,E(p(y.pedido.hora_confirmacion)),1)])):F("",!0),y.pedido.hora_preparacion?(b(),k("div",Dy,[g[18]||(g[18]=c("span",{class:"text-gray-600"},"Iniciado:",-1)),c("span",Ny,E(p(y.pedido.hora_preparacion)),1)])):F("",!0),y.pedido.hora_listo?(b(),k("div",Fy,[g[19]||(g[19]=c("span",{class:"text-gray-600"},"Listo:",-1)),c("span",Uy,E(p(y.pedido.hora_listo)),1)])):F("",!0),y.pedido.hora_entrega?(b(),k("div",By,[g[20]||(g[20]=c("span",{class:"text-gray-600"},"Entregado:",-1)),c("span",zy,E(p(y.pedido.hora_entrega)),1)])):F("",!0),c("div",Vy,[g[21]||(g[21]=c("span",{class:"text-gray-600"},"Tiempo transcurrido:",-1)),oe(Ki,{minutos:x()},null,8,["minutos"])])])]),c("div",Hy,[g[28]||(g[28]=c("h3",{class:"text-lg font-medium text-gray-900 mb-3"},"Resumen",-1)),c("div",qy,[c("div",Ky,[g[23]||(g[23]=c("span",{class:"text-gray-600"},"Subtotal:",-1)),c("span",Wy,"€"+E((y.pedido.subtotal||y.pedido.total||0).toFixed(2)),1)]),y.pedido.descuentos&&y.pedido.descuentos>0?(b(),k("div",Gy,[g[24]||(g[24]=c("span",{class:"text-gray-600"},"Descuentos:",-1)),c("span",Jy,"-€"+E(y.pedido.descuentos.toFixed(2)),1)])):F("",!0),y.pedido.impuestos&&y.pedido.impuestos>0?(b(),k("div",Qy,[g[25]||(g[25]=c("span",{class:"text-gray-600"},"Impuestos:",-1)),c("span",Yy,"€"+E(y.pedido.impuestos.toFixed(2)),1)])):F("",!0),y.pedido.propina&&y.pedido.propina>0?(b(),k("div",Xy,[g[26]||(g[26]=c("span",{class:"text-gray-600"},"Propina:",-1)),c("span",Zy,"€"+E(y.pedido.propina.toFixed(2)),1)])):F("",!0),c("div",eb,[g[27]||(g[27]=c("span",{class:"text-gray-900 font-semibold"},"Total:",-1)),c("span",tb,"€"+E((y.pedido.total||0).toFixed(2)),1)])])]),c("div",sb,[g[30]||(g[30]=c("h3",{class:"text-lg font-medium text-gray-900 mb-3"},"Progreso",-1)),c("div",rb,[c("div",nb,[g[29]||(g[29]=c("span",{class:"text-gray-600"},"Items completados:",-1)),c("span",ob,E(u.value)+"/"+E(d.value),1)]),c("div",ib,[c("div",{class:"bg-green-500 h-3 rounded-full transition-all duration-300",style:ps({width:`${f.value}%`})},null,4)])])]),c("div",ab,[y.pedido.estado==="pendiente"?(b(),k("button",{key:0,onClick:g[1]||(g[1]=$=>y.$emit("cambiar-estado",y.pedido.id,"en_preparacion")),class:"w-full bg-blue-500 text-white py-2 px-4 rounded-lg hover:bg-blue-600 transition-colors"}," Comenzar preparación ")):F("",!0),y.pedido.estado==="en_preparacion"&&h.value?(b(),k("button",{key:1,onClick:g[2]||(g[2]=$=>y.$emit("cambiar-estado",y.pedido.id,"listo")),class:"w-full bg-green-500 text-white py-2 px-4 rounded-lg hover:bg-green-600 transition-colors"}," Marcar como listo ")):F("",!0),y.pedido.estado==="listo"?(b(),k("button",{key:2,onClick:g[3]||(g[3]=$=>y.$emit("cambiar-estado",y.pedido.id,"entregado")),class:"w-full bg-gray-500 text-white py-2 px-4 rounded-lg hover:bg-gray-600 transition-colors"}," Marcar como entregado ")):F("",!0),["pendiente","en_preparacion"].includes(y.pedido.estado)?(b(),k("button",{key:3,onClick:R,class:"w-full bg-red-500 text-white py-2 px-4 rounded-lg hover:bg-red-600 transition-colors"}," Cancelar pedido ")):F("",!0)])])])]),c("div",lb,[c("button",{onClick:g[4]||(g[4]=$=>y.$emit("cerrar")),class:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 transition-colors"}," Cerrar ")])])])])):F("",!0)]))}}),ub={class:"px-3 py-2 border-b border-gray-100"},db={class:"text-xs text-gray-500"},fb={class:"py-1"},hb=["onClick","disabled"],pb={key:0,class:"ml-auto text-xs text-gray-500"},mb={class:"border-t border-gray-100 py-1"},gb=Ee({__name:"MenuEstados",props:{pedido:{},abierto:{type:Boolean},posicion:{}},emits:["cambiar-estado","cerrar"],setup(e,{emit:t}){const s=e,r=t,n=V(()=>{var l;return((l=s.pedido)==null?void 0:l.estado)||"pendiente"}),o=[{estado:"pendiente",texto:"Pendiente",icono:Ln,colorIcono:"text-yellow-500",disponibleDesde:[]},{estado:"confirmado",texto:"Confirmar pedido",icono:jr,colorIcono:"text-orange-500",disponibleDesde:["pendiente"]},{estado:"en_preparacion",texto:"En preparación",icono:Hu,colorIcono:"text-blue-500",disponibleDesde:["pendiente","confirmado"]},{estado:"listo",texto:"Marcar como listo",icono:jr,colorIcono:"text-green-500",disponibleDesde:["en_preparacion"]},{estado:"entregado",texto:"Entregar pedido",icono:Vu,colorIcono:"text-gray-500",disponibleDesde:["listo"]},{estado:"pagado",texto:"Marcar como pagado",icono:w1,colorIcono:"text-emerald-500",disponibleDesde:["entregado"]},{estado:"cancelado",texto:"Cancelar pedido",icono:qu,colorIcono:"text-red-500",disponibleDesde:["pendiente","confirmado","en_preparacion"]}],i=V(()=>s.pedido?o.filter(l=>l.estado===n.value?!0:l.disponibleDesde.includes(n.value)):[]),a=l=>{s.pedido&&l!==n.value&&r("cambiar-estado",s.pedido.id,l)};return(l,d)=>{var u;return b(),De(Kn,{to:"body"},[l.abierto?(b(),k("div",{key:0,class:"fixed inset-0 z-50",onClick:d[2]||(d[2]=f=>l.$emit("cerrar"))},[d[4]||(d[4]=c("div",{class:"absolute inset-0 bg-black bg-opacity-25"},null,-1)),c("div",{style:ps({left:`${l.posicion.x}px`,top:`${l.posicion.y}px`}),class:"absolute bg-white rounded-lg shadow-lg border border-gray-200 py-2 min-w-48 z-50",onClick:d[1]||(d[1]=Is(()=>{},["stop"]))},[c("div",ub,[d[3]||(d[3]=c("h3",{class:"text-sm font-medium text-gray-900"},"Cambiar estado",-1)),c("p",db,E(((u=l.pedido)==null?void 0:u.numero_pedido)||"Pedido sin número"),1)]),c("div",fb,[(b(!0),k(fe,null,Ce(i.value,f=>(b(),k("button",{key:f.estado,onClick:h=>a(f.estado),disabled:f.estado===n.value,class:ye(["w-full px-3 py-2 text-left text-sm hover:bg-gray-50 flex items-center disabled:opacity-50 disabled:cursor-not-allowed",f.estado===n.value&&"bg-gray-100"])},[(b(),De(Qs(f.icono),{class:ye(["w-4 h-4 mr-2",f.colorIcono])},null,8,["class"])),c("span",null,E(f.texto),1),f.estado===n.value?(b(),k("span",pb," (Actual) ")):F("",!0)],10,hb))),128))]),c("div",mb,[c("button",{onClick:d[0]||(d[0]=f=>l.$emit("cerrar")),class:"w-full px-3 py-2 text-left text-sm text-gray-500 hover:bg-gray-50"}," Cancelar ")])],4)])):F("",!0)])}}}),vb={class:"min-h-screen bg-gray-50"},yb={class:"bg-white shadow-sm border-b"},bb={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},_b={class:"flex justify-between items-center py-4"},wb={class:"text-sm text-gray-500 mt-1"},xb={class:"flex items-center space-x-4"},kb={class:"flex items-center space-x-6"},$b={class:"text-center"},Eb={class:"text-lg font-semibold text-orange-600"},Cb={class:"text-center"},Sb={class:"text-lg font-semibold text-blue-600"},Tb={class:"text-center"},Pb={class:"text-lg font-semibold text-green-600"},Ab={class:"flex items-center space-x-2"},Rb={class:"text-sm text-gray-600"},jb=["disabled"],Ob={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4"},Ib={class:"bg-white rounded-lg shadow p-4 mb-6"},Mb={class:"flex flex-wrap items-center justify-between gap-4"},Lb={class:"flex items-center space-x-2"},Db={class:"flex space-x-1"},Nb=["onClick"],Fb={class:"flex items-center space-x-4"},Ub={class:"flex items-center space-x-2"},Bb=["value"],zb={class:"flex items-center space-x-2"},Vb={class:"flex items-center space-x-2"},Hb={class:"flex border border-gray-300 rounded-lg overflow-hidden"},qb={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 pb-8"},Kb={key:0,class:"flex justify-center items-center py-12"},Wb={key:1,class:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6"},Gb={class:"flex"},Jb={class:"text-sm text-red-700 mt-1"},Qb={key:2,class:"space-y-4"},Yb={class:"px-6 py-4 border-b border-gray-200"},Xb={class:"flex items-center justify-between"},Zb={class:"flex items-center space-x-4"},e_={class:"text-lg font-semibold text-gray-900"},t_={class:"text-sm text-gray-500"},s_={class:"flex items-center space-x-2"},r_={class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800"},n_={class:"flex items-center space-x-6"},o_={class:"text-right"},i_={class:"text-sm text-gray-600"},a_={class:"text-lg font-bold text-gray-900"},l_={class:"flex items-center space-x-2"},c_=["onClick"],u_=["onClick"],d_={class:"mt-3"},f_={class:"flex items-center justify-between text-sm text-gray-600 mb-1"},h_={class:"w-full bg-gray-200 rounded-full h-2"},p_={class:"px-6 py-4"},m_={key:0,class:"mb-4 p-3 bg-yellow-50 border border-yellow-200 rounded-lg"},g_={class:"flex items-start"},v_={class:"text-sm text-yellow-700"},y_={class:"space-y-2"},b_={key:0,class:"flex justify-center py-4"},__={key:1,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3"},w_={class:"flex items-start justify-between"},x_={class:"flex-1"},k_={class:"flex items-center justify-between mb-1"},$_={class:"font-medium text-gray-900 text-sm"},E_={class:"text-xs text-gray-500"},C_={class:"flex items-center justify-between"},S_={class:"text-sm font-medium text-gray-700"},T_={key:0,class:"mt-2"},P_={class:"text-xs text-blue-600"},A_={key:0,class:"text-blue-500"},R_={key:1,class:"mt-2"},j_={class:"text-xs text-orange-600"},O_={key:2,class:"mt-2 flex gap-1"},I_=["onClick"],M_=["onClick"],L_=["onClick"],D_={key:2,class:"text-center py-6 text-gray-500"},N_=["onClick"],F_={class:"px-6 py-3 bg-gray-50 border-t border-gray-200 rounded-b-lg"},U_={class:"flex items-center justify-between"},B_={class:"flex space-x-2"},z_=["onClick"],V_=["onClick"],H_=["onClick"],q_={class:"flex items-center space-x-4 text-sm text-gray-500"},K_={key:0},W_={key:1,class:"text-red-600 font-medium"},G_={key:0,class:"text-center py-12"},J_={key:3,class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},Q_={class:"bg-white rounded-lg shadow"},Y_={class:"bg-red-500 px-4 py-3"},X_={class:"text-white font-medium"},Z_={class:"p-4 space-y-3 max-h-96 overflow-y-auto"},ew={key:0,class:"text-center py-8 text-gray-500 text-sm"},tw={class:"bg-white rounded-lg shadow"},sw={class:"bg-purple-500 px-4 py-3"},rw={class:"text-white font-medium"},nw={class:"p-4 space-y-3 max-h-96 overflow-y-auto"},ow={key:0,class:"text-center py-8 text-gray-500 text-sm"},iw=Ee({__name:"PedidosView",setup(e){const t=Qt(),s=zu(),r=y1(),n=U(!1),o=U(null),i=U("lista"),a=U({}),l=U({}),d=U(["pendiente","confirmado","en_preparacion","listo"]),u=U(""),f=U("todos"),h=U(null),p=U(!1),x=U(!1),w=U(null),S=U({x:0,y:0}),R=V(()=>r.orders.filter(m=>!["cancelado"].includes(m.estado))),y=V(()=>{const m=[];return R.value.forEach(v=>{G(v).forEach(C=>{["servido","cancelado"].includes(C.estado)||m.push({...C,numero_pedido:v.numero_pedido,numero_mesa:v.numero_mesa,tiempo_transcurrido:z(v)})})}),m}),g=V(()=>R.value.length),$=V(()=>{const m={pendientes:0,en_preparacion:0,listos:0,entregados:0};return R.value.forEach(v=>{switch(v.estado){case"pendiente":case"confirmado":m.pendientes++;break;case"en_preparacion":m.en_preparacion++;break;case"listo":m.listos++;break;case"entregado":m.entregados++;break}}),m}),D=[{value:"pendiente",label:"Pendiente",bgColor:"bg-orange-100",textColor:"text-orange-800"},{value:"confirmado",label:"Confirmado",bgColor:"bg-yellow-100",textColor:"text-yellow-800"},{value:"en_preparacion",label:"En preparación",bgColor:"bg-blue-100",textColor:"text-blue-800"},{value:"listo",label:"Listo",bgColor:"bg-green-100",textColor:"text-green-800"},{value:"entregado",label:"Entregado",bgColor:"bg-gray-100",textColor:"text-gray-800"}],se=V(()=>{let m=[...R.value];return d.value.length>0&&(m=m.filter(v=>d.value.includes(v.estado))),u.value&&(m=m.filter(v=>v.numero_mesa===u.value)),f.value!=="todos"&&(m=m.filter(v=>{const j=z(v);switch(f.value){case"recientes":return j<=30;case"atrasados":return j>30&&j<=60;case"muy_atrasados":return j>60;default:return!0}})),m.sort((v,j)=>new Date(v.hora_pedido).getTime()-new Date(j.hora_pedido).getTime())}),W=V(()=>y.value.filter(m=>!m.estacion_preparacion||m.estacion_preparacion==="cocina")),L=V(()=>y.value.filter(m=>m.estacion_preparacion==="barra")),A=V(()=>[...new Set(R.value.map(v=>v.numero_mesa))].sort((v,j)=>parseInt(v)-parseInt(j))),T=async()=>{try{n.value=!0,o.value=null,await r.loadOrders(),await I()}catch(m){o.value=m.message||"Error al actualizar datos"}finally{n.value=!1}},I=async()=>{for(const m of R.value)(!m.items||m.items.length===0)&&await N(m.id)},N=async m=>{if(!l.value[m])try{l.value[m]=!0;const{data:v,error:j}=await ge.from("items_pedido").select(`
        id,
        pedido_id,
        plato_id,
        nombre_plato,
        cantidad,
        precio,
        precio_unitario,
        estado,
        notas,
        modificaciones,
        estacion_preparacion,
        prioridad
      `).eq("pedido_id",m).order("creado_el",{ascending:!0});if(j){console.error("Error cargando items del pedido:",j);return}a.value[m]=v||[]}catch(v){console.error("Error inesperado cargando items:",v)}finally{l.value[m]=!1}},G=m=>m.items&&m.items.length>0?m.items:a.value[m.id]||[],re=m=>l.value[m]||!1,we=m=>{const v=d.value.indexOf(m);v>-1?d.value.splice(v,1):d.value.push(m)},he=m=>R.value.filter(v=>v.estado===m).length,M=async(m,v)=>{try{await r.updateOrder(m,{estado:v}),await T(),Oe()}catch(j){o.value=j.message||"Error al cambiar estado del pedido"}},H=async(m,v)=>{try{await r.updateOrderItem(m,{estado:v}),await T()}catch(j){o.value=j.message||"Error al cambiar estado del item"}},ne=async(m,v)=>{try{await r.updateOrderItem(m,{prioridad:v}),await T()}catch(j){o.value=j.message||"Error al cambiar prioridad del item"}},be=m=>{h.value=m,p.value=!0},ue=()=>{h.value=null,p.value=!1},de=(m,v)=>{w.value=m,v&&(S.value={x:v.clientX,y:v.clientY}),x.value=!0},Oe=()=>{x.value=!1,w.value=null},te=m=>{if(!m)return"--:--";try{return new Date(m).toLocaleTimeString("es-ES",{hour:"2-digit",minute:"2-digit"})}catch{return"--:--"}},z=m=>{try{const v=new Date,j=new Date(m.hora_pedido);return Math.floor((v.getTime()-j.getTime())/(1e3*60))}catch{return 0}},K=m=>m.cliente_nombre||m.nombre_cliente||"Cliente anónimo",P=m=>G(m).length,X=m=>G(m).filter(j=>["listo","servido"].includes(j.estado)).length,Z=m=>{const v=P(m),j=X(m);return v>0?Math.round(j/v*100):0},ie=m=>{const v=G(m);return v.length>0&&v.every(j=>["listo","servido"].includes(j.estado||"pendiente"))},Pe=m=>{const v=m.precio_unitario||m.precio||0,j=m.cantidad||1;return(v*j).toFixed(2)},_=m=>({pendiente:"border-yellow-300 bg-yellow-50",en_preparacion:"border-blue-300 bg-blue-50",listo:"border-green-300 bg-green-50",servido:"border-gray-300 bg-gray-50",cancelado:"border-red-300 bg-red-50"})[m]||"border-gray-300 bg-gray-50";return Be(async()=>{await T()}),it(()=>{}),ot(()=>{var m;return(m=t.currentRestaurant)==null?void 0:m.id},async m=>{m&&await T()}),(m,v)=>{var j;return b(),k("div",vb,[c("div",yb,[c("div",bb,[c("div",_b,[c("div",null,[v[4]||(v[4]=c("h1",{class:"text-2xl font-bold text-gray-900"},"Gestión de Pedidos",-1)),c("p",wb,E((j=B(t).currentRestaurant)==null?void 0:j.nombre)+" - "+E(g.value)+" pedidos activos ",1)]),c("div",xb,[c("div",kb,[c("div",$b,[c("div",Eb,E($.value.pendientes),1),v[5]||(v[5]=c("div",{class:"text-xs text-gray-500"},"Pendientes",-1))]),c("div",Cb,[c("div",Sb,E($.value.en_preparacion),1),v[6]||(v[6]=c("div",{class:"text-xs text-gray-500"},"En preparación",-1))]),c("div",Tb,[c("div",Pb,E($.value.listos),1),v[7]||(v[7]=c("div",{class:"text-xs text-gray-500"},"Listos",-1))])]),c("div",Ab,[c("div",{class:ye(["w-2 h-2 rounded-full",B(s).isRealTimeConnected?"bg-green-500 animate-pulse":"bg-red-500"])},null,2),c("span",Rb,E(B(s).isRealTimeConnected?"Tiempo real":"Desconectado"),1)]),c("button",{onClick:T,disabled:n.value,class:"inline-flex items-center px-3 py-2 border border-gray-300 shadow-sm text-sm leading-4 font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-orange-500 disabled:opacity-50"},[oe(B(b1),{class:ye(["h-4 w-4 mr-2",n.value&&"animate-spin"])},null,8,["class"]),v[8]||(v[8]=xe(" Actualizar "))],8,jb)])])])]),c("div",Ob,[c("div",Ib,[c("div",Mb,[c("div",Lb,[v[9]||(v[9]=c("span",{class:"text-sm font-medium text-gray-700"},"Filtrar por estado:",-1)),c("div",Db,[(b(),k(fe,null,Ce(D,C=>c("button",{key:C.value,onClick:O=>we(C.value),class:ye(["px-3 py-1 rounded-full text-xs font-medium transition-colors",d.value.includes(C.value)?`${C.bgColor} ${C.textColor}`:"bg-gray-100 text-gray-600 hover:bg-gray-200"])},E(C.label)+" ("+E(he(C.value))+") ",11,Nb)),64))])]),c("div",Fb,[c("div",Ub,[v[11]||(v[11]=c("label",{class:"text-sm font-medium text-gray-700"},"Mesa:",-1)),Ke(c("select",{"onUpdate:modelValue":v[0]||(v[0]=C=>u.value=C),class:"rounded-md border-gray-300 text-sm focus:border-orange-500 focus:ring-orange-500"},[v[10]||(v[10]=c("option",{value:""},"Todas",-1)),(b(!0),k(fe,null,Ce(A.value,C=>(b(),k("option",{key:C,value:C}," Mesa "+E(C),9,Bb))),128))],512),[[In,u.value]])]),c("div",zb,[v[13]||(v[13]=c("label",{class:"text-sm font-medium text-gray-700"},"Tiempo:",-1)),Ke(c("select",{"onUpdate:modelValue":v[1]||(v[1]=C=>f.value=C),class:"rounded-md border-gray-300 text-sm focus:border-orange-500 focus:ring-orange-500"},v[12]||(v[12]=[c("option",{value:"todos"},"Todos",-1),c("option",{value:"recientes"},"Últimos 30 min",-1),c("option",{value:"atrasados"},"Más de 30 min",-1),c("option",{value:"muy_atrasados"},"Más de 1 hora",-1)]),512),[[In,f.value]])]),c("div",Vb,[v[14]||(v[14]=c("span",{class:"text-sm font-medium text-gray-700"},"Vista:",-1)),c("div",Hb,[c("button",{onClick:v[2]||(v[2]=C=>i.value="lista"),class:ye(["px-3 py-1 text-sm font-medium",i.value==="lista"?"bg-orange-500 text-white":"bg-white text-gray-600 hover:bg-gray-50"])}," Lista ",2),c("button",{onClick:v[3]||(v[3]=C=>i.value="cocina"),class:ye(["px-3 py-1 text-sm font-medium border-l border-gray-300",i.value==="cocina"?"bg-orange-500 text-white":"bg-white text-gray-600 hover:bg-gray-50"])}," Cocina ",2)])])])])])]),c("div",qb,[n.value?(b(),k("div",Kb,v[15]||(v[15]=[c("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-orange-500"},null,-1)]))):o.value?(b(),k("div",Wb,[c("div",Gb,[oe(B(Dn),{class:"h-5 w-5 text-red-400 mr-2"}),c("div",null,[v[16]||(v[16]=c("h3",{class:"text-sm font-medium text-red-800"},"Error al cargar pedidos",-1)),c("p",Jb,E(o.value),1),c("button",{onClick:T,class:"mt-2 text-sm text-red-800 underline hover:text-red-900"}," Intentar de nuevo ")])])])):i.value==="lista"?(b(),k("div",Qb,[(b(!0),k(fe,null,Ce(se.value,C=>(b(),k("div",{key:C.id,class:ye(["bg-white rounded-lg shadow border transition-all duration-200 hover:shadow-md",z(C)>60&&"border-red-300 bg-red-50",z(C)>30&&z(C)<=60&&"border-yellow-300 bg-yellow-50"])},[c("div",Yb,[c("div",Xb,[c("div",Zb,[c("div",null,[c("h3",e_,E(C.numero_pedido),1),c("p",t_,E(te(C.hora_pedido)),1)]),c("div",s_,[c("span",r_," Mesa "+E(C.numero_mesa),1),oe(Hr,{estado:C.estado},null,8,["estado"])])]),c("div",n_,[c("div",o_,[c("p",i_,E(K(C)),1),c("p",a_,"€"+E(C.total.toFixed(2)),1)]),oe(Ki,{minutos:z(C)},null,8,["minutos"])]),c("div",l_,[c("button",{onClick:O=>be(C),class:"text-orange-600 hover:text-orange-900 p-2",title:"Ver detalles completos"},[oe(B(x1),{class:"h-5 w-5"})],8,c_),C.estado!=="entregado"?(b(),k("button",{key:0,onClick:O=>de(C,O),class:"text-blue-600 hover:text-blue-900 p-2",title:"Cambiar estado"},[oe(B(k1),{class:"h-5 w-5"})],8,u_)):F("",!0)])]),c("div",d_,[c("div",f_,[v[17]||(v[17]=c("span",null,"Progreso del pedido",-1)),c("span",null,E(X(C))+"/"+E(P(C))+" items",1)]),c("div",h_,[c("div",{class:"bg-green-600 h-2 rounded-full transition-all duration-300",style:ps({width:`${Z(C)}%`})},null,4)])])]),c("div",p_,[C.notas?(b(),k("div",m_,[c("div",g_,[v[19]||(v[19]=c("svg",{class:"w-4 h-4 text-yellow-600 mt-0.5 mr-2",fill:"currentColor",viewBox:"0 0 20 20"},[c("path",{"fill-rule":"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z","clip-rule":"evenodd"})],-1)),c("div",null,[v[18]||(v[18]=c("p",{class:"text-sm font-medium text-yellow-800"},"Nota del pedido:",-1)),c("p",v_,E(C.notas),1)])])])):F("",!0),c("div",y_,[v[24]||(v[24]=c("h4",{class:"text-sm font-medium text-gray-900 mb-3"},"Items del pedido:",-1)),re(C.id)?(b(),k("div",b_,v[20]||(v[20]=[c("div",{class:"animate-spin rounded-full h-5 w-5 border-b-2 border-orange-500"},null,-1)]))):(b(),k("div",__,[(b(!0),k(fe,null,Ce(G(C),O=>(b(),k("div",{key:O.id,class:ye(["p-3 rounded-lg border-2 transition-all duration-200",_(O.estado||"pendiente")])},[c("div",w_,[c("div",x_,[c("div",k_,[c("h5",$_,E(O.nombre_plato||"Plato sin nombre"),1),c("span",E_,"x"+E(O.cantidad||1),1)]),c("div",C_,[oe(Hr,{estado:O.estado||"pendiente",size:"sm"},null,8,["estado"]),c("span",S_," €"+E(Pe(O)),1)]),O.modificaciones&&Array.isArray(O.modificaciones)&&O.modificaciones.length>0?(b(),k("div",T_,[v[21]||(v[21]=c("p",{class:"text-xs text-blue-600 font-medium"},"Modificaciones:",-1)),c("ul",P_,[(b(!0),k(fe,null,Ce(O.modificaciones.slice(0,2),Q=>(b(),k("li",{key:Q},"• "+E(Q),1))),128)),O.modificaciones.length>2?(b(),k("li",A_,"+"+E(O.modificaciones.length-2)+" más...",1)):F("",!0)])])):F("",!0),O.notas?(b(),k("div",R_,[c("p",j_,[v[22]||(v[22]=c("span",{class:"font-medium"},"Nota:",-1)),xe(" "+E(O.notas.length>50?O.notas.substring(0,50)+"...":O.notas),1)])])):F("",!0),["servido","cancelado"].includes(O.estado||"pendiente")?F("",!0):(b(),k("div",O_,[O.estado==="pendiente"?(b(),k("button",{key:0,onClick:Q=>H(O.id,"en_preparacion"),class:"px-2 py-1 bg-blue-500 text-white rounded text-xs hover:bg-blue-600 transition-colors"}," Iniciar ",8,I_)):F("",!0),O.estado==="en_preparacion"?(b(),k("button",{key:1,onClick:Q=>H(O.id,"listo"),class:"px-2 py-1 bg-green-500 text-white rounded text-xs hover:bg-green-600 transition-colors"}," Listo ",8,M_)):F("",!0),O.estado==="listo"?(b(),k("button",{key:2,onClick:Q=>H(O.id,"servido"),class:"px-2 py-1 bg-gray-500 text-white rounded text-xs hover:bg-gray-600 transition-colors"}," Servir ",8,L_)):F("",!0)]))])])],2))),128))])),!re(C.id)&&G(C).length===0?(b(),k("div",D_,[v[23]||(v[23]=c("p",{class:"text-sm"},"No se encontraron items para este pedido",-1)),c("button",{onClick:O=>N(C.id),class:"mt-2 text-sm text-orange-600 hover:text-orange-800"}," Cargar items ",8,N_)])):F("",!0)])]),c("div",F_,[c("div",U_,[c("div",B_,[C.estado==="pendiente"?(b(),k("button",{key:0,onClick:O=>M(C.id,"en_preparacion"),class:"px-3 py-1 bg-blue-500 text-white rounded text-sm hover:bg-blue-600 transition-colors"}," Comenzar pedido ",8,z_)):F("",!0),C.estado==="en_preparacion"&&ie(C)?(b(),k("button",{key:1,onClick:O=>M(C.id,"listo"),class:"px-3 py-1 bg-green-500 text-white rounded text-sm hover:bg-green-600 transition-colors"}," Marcar listo ",8,V_)):F("",!0),C.estado==="listo"?(b(),k("button",{key:2,onClick:O=>M(C.id,"entregado"),class:"px-3 py-1 bg-gray-500 text-white rounded text-sm hover:bg-gray-600 transition-colors"}," Entregar ",8,H_)):F("",!0)]),c("div",q_,[C.tipo_servicio!=="mesa"?(b(),k("span",K_,E(C.tipo_servicio),1)):F("",!0),c("span",null,E(P(C))+" items",1),z(C)>30?(b(),k("span",W_," ⚠️ "+E(z(C)>60?"Muy atrasado":"Atrasado"),1)):F("",!0)])])])],2))),128)),se.value.length===0?(b(),k("div",G_,[oe(B(_1),{class:"mx-auto h-12 w-12 text-gray-400"}),v[25]||(v[25]=c("h3",{class:"mt-2 text-sm font-medium text-gray-900"},"No hay pedidos",-1)),v[26]||(v[26]=c("p",{class:"mt-1 text-sm text-gray-500"}," No se encontraron pedidos con los filtros seleccionados. ",-1))])):F("",!0)])):i.value==="cocina"?(b(),k("div",J_,[c("div",Q_,[c("div",Y_,[c("h3",X_,"Cocina ("+E(W.value.length)+")",1)]),c("div",Z_,[(b(!0),k(fe,null,Ce(W.value,C=>(b(),De(El,{key:C.id,item:C,onCambiarEstado:H,onCambiarPrioridad:ne},null,8,["item"]))),128)),W.value.length===0?(b(),k("div",ew," No hay items pendientes en cocina ")):F("",!0)])]),c("div",tw,[c("div",sw,[c("h3",rw,"Barra ("+E(L.value.length)+")",1)]),c("div",nw,[(b(!0),k(fe,null,Ce(L.value,C=>(b(),De(El,{key:C.id,item:C,onCambiarEstado:H,onCambiarPrioridad:ne},null,8,["item"]))),128)),L.value.length===0?(b(),k("div",ow," No hay items pendientes en barra ")):F("",!0)])])])):F("",!0)]),h.value?(b(),De(cb,{key:0,pedido:h.value,abierto:p.value,onCerrar:ue,onCambiarEstado:M,onCambiarEstadoItem:H},null,8,["pedido","abierto"])):F("",!0),x.value?(b(),De(gb,{key:1,pedido:w.value,abierto:x.value,posicion:S.value,onCambiarEstado:M,onCerrar:Oe},null,8,["pedido","abierto","posicion"])):F("",!0)])}}});function Ku(){const e=async(w,S)=>{try{const{data:R,error:y}=await ge.rpc(w,S);return{data:R,error:y}}catch(R){return console.error(`Error executing RPC ${w}:`,R),{data:null,error:R}}},t=async w=>{try{const S=await w;return{data:S.data,error:S.error}}catch(S){return console.error("Error executing query:",S),{data:null,error:S}}};return{supabase:ge,executeRPC:e,executeQuery:t,createRealtimeChannel:(w,S)=>ge.channel(w),subscribeToTable:(w,S,R)=>ge.channel(`${w}-changes`).on("postgres_changes",{event:(R==null?void 0:R.event)||"*",schema:(R==null?void 0:R.schema)||"public",table:w,...(R==null?void 0:R.filter)&&{filter:R.filter}},S).subscribe(),getMenuPublico:async w=>e("get_menu_publico",{restaurante_uuid:w}),getPedidosActivos:async w=>e("get_pedidos_activos",{p_restaurante_id:w}),crearPedidoMesa:async w=>e("crear_pedido_mesa",{p_restaurante_id:w.restaurante_id,p_numero_mesa:w.numero_mesa,p_items:w.items,p_cliente_id:w.cliente_id,p_notas:w.notas}),getRestaurantDashboard:async w=>e("get_restaurant_dashboard",{p_restaurante_id:w}),getAnalyticsRapidos:async w=>e("get_analytics_rapidos",{p_restaurante_id:w}),actualizarEstadoPedido:async(w,S)=>t(ge.from("pedidos").update({estado:S,[`hora_${S}`]:new Date().toISOString(),actualizado_el:new Date().toISOString()}).eq("id",w).select()),actualizarDisponibilidadPlato:async(w,S)=>t(ge.from("platos").update({esta_disponible:S,actualizado_el:new Date().toISOString()}).eq("id",w).select()),getUserProfile:async w=>t(ge.from("perfiles").select("*").eq("auth_user_id",w).maybeSingle()),getUserRestaurants:async w=>{try{const{data:S}=await ge.from("restaurantes").select("*, propietario:perfiles!propietario_id(*)").eq("propietario_id",w).eq("esta_activo",!0),{data:R}=await ge.from("empleados").select(`
          posicion,
          esta_activo,
          restaurante:restaurantes(*)
        `).eq("perfil_id",w).eq("esta_activo",!0);return{data:[...(S||[]).map(g=>({...g,userRole:"propietario"})),...(R||[]).filter(g=>g.restaurante).map(g=>({...g.restaurante,userRole:g.posicion}))],error:null}}catch(S){return console.error("Error getting user restaurants:",S),{data:[],error:S}}},checkRestaurantAccess:async(w,S)=>{try{const{data:R}=await ge.from("restaurantes").select("id").eq("id",w).eq("propietario_id",S).maybeSingle();if(R)return{data:{hasAccess:!0,role:"propietario"},error:null};const{data:y}=await ge.from("empleados").select("posicion").eq("restaurante_id",w).eq("perfil_id",S).eq("esta_activo",!0).maybeSingle();return y?{data:{hasAccess:!0,role:y.posicion},error:null}:{data:{hasAccess:!1,role:null},error:null}}catch(R){return console.error("Error checking restaurant access:",R),{data:{hasAccess:!1,role:null},error:R}}},getItemsPorEstacion:async(w,S)=>e("obtener_items_por_estacion",{p_restaurante_id:w,p_estacion:S})}}const pr=U([]);function Xr(){const e=(a,l="info",d={})=>{const u={id:`toast-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,message:a,type:l,duration:d.duration??(l==="error"?5e3:3e3),persistent:d.persistent??!1};return pr.value.push(u),!u.persistent&&u.duration&&setTimeout(()=>{t(u.id)},u.duration),u.id},t=a=>{const l=pr.value.findIndex(d=>d.id===a);l>-1&&pr.value.splice(l,1)},s=()=>{pr.value=[]},r=(a,l)=>e(a,"success",l),n=(a,l)=>e(a,"error",l),o=(a,l)=>e(a,"warning",l),i=(a,l)=>e(a,"info",l);return{toasts:pr.value,showToast:e,removeToast:t,clearAllToasts:s,success:r,error:n,warning:o,info:i}}const Wi=to("cart",()=>{const e=U(null),t=U(null),s=U([]),r=U(0),n=U(0),o=V(()=>s.value.reduce((I,N)=>I+N.cantidad,0)),i=V(()=>s.value.reduce((I,N)=>I+N.subtotal,0)),a=V(()=>i.value-r.value+n.value),l=V(()=>s.value.length===0),d=V(()=>{const I={};return s.value.forEach(N=>{const G=N.categoria||"Sin categoría";I[G]||(I[G]=[]),I[G].push(N)}),I}),u=(I,N)=>{e.value&&e.value!==I&&w(),e.value=I,t.value=N||null},f=(I,N=1)=>{const G=s.value.findIndex(re=>re.id===I.id&&JSON.stringify(re.personalizaciones)===JSON.stringify(I.personalizaciones));if(G>-1){const re=s.value[G];re.cantidad+=N,re.subtotal=re.cantidad*re.precio}else{const re={id:I.id,nombre:I.nombre,precio:I.precio,cantidad:N,imagen:I.imagen,categoria:I.categoria,personalizaciones:I.personalizaciones,subtotal:I.precio*N};s.value.push(re)}},h=(I,N)=>{if(!(I<0||I>=s.value.length))if(N<=0)p(I);else{const G=s.value[I];G.cantidad=N,G.subtotal=G.precio*N}},p=I=>{I>=0&&I<s.value.length&&s.value.splice(I,1)},x=(I,N)=>{const G=s.value.findIndex(re=>re.id===I&&JSON.stringify(re.personalizaciones)===JSON.stringify(N));G>-1&&p(G)},w=()=>{s.value=[],r.value=0,n.value=0},S=I=>{r.value=Math.max(0,I)},R=I=>{n.value=Math.max(0,I)};return{restauranteId:e,mesa:t,items:s,descuentos:r,propina:n,totalItems:o,subtotal:i,total:a,isEmpty:l,itemsByCategory:d,initializeCart:u,addItem:f,updateItemQuantity:h,removeItem:p,removeItemById:x,clearCart:w,updateDescuentos:S,updatePropina:R,calculatePropinaByPercentage:I=>{const N=i.value*I/100;return R(N),N},getOrderData:()=>({restaurante_id:e.value,numero_mesa:t.value,items:s.value.map(I=>({plato_id:I.id,nombre_plato:I.nombre,cantidad:I.cantidad,precio_unitario:I.precio,personalizaciones:I.personalizaciones,subtotal:I.subtotal})),subtotal:i.value,descuentos:r.value,propina:n.value,total:a.value}),validateCart:()=>{const I=[];return e.value||I.push("Restaurante no seleccionado"),t.value||I.push("Mesa no especificada"),s.value.length===0&&I.push("El carrito está vacío"),a.value<=0&&I.push("El total debe ser mayor a 0"),{isValid:I.length===0,errors:I}},getCartSummary:()=>({totalItems:o.value,subtotal:i.value,descuentos:r.value,propina:n.value,total:a.value,restauranteId:e.value,mesa:t.value,itemsCount:s.value.length}),duplicateItem:I=>{if(I>=0&&I<s.value.length){const N=s.value[I];f({id:N.id,nombre:N.nombre,precio:N.precio,imagen:N.imagen,categoria:N.categoria,personalizaciones:N.personalizaciones},N.cantidad)}},applyPromoCode:I=>{const G={BIENVENIDO10:{type:"percentage",value:10,description:"10% de descuento"},PRIMERA5:{type:"fixed",value:5,description:"5€ de descuento"},ESTUDIANTE:{type:"percentage",value:15,description:"15% descuento estudiantes"}}[I.toUpperCase()];if(G){if(G.type==="percentage"){const re=i.value*G.value/100;S(re)}else S(G.value);return{success:!0,description:G.description}}return{success:!1,description:"Código promocional no válido"}},saveToLocalStorage:()=>{try{const I={restauranteId:e.value,mesa:t.value,items:s.value,descuentos:r.value,propina:n.value,timestamp:Date.now()};localStorage.setItem("comandaplus_cart",JSON.stringify(I))}catch(I){console.error("Error saving cart to localStorage:",I)}},loadFromLocalStorage:()=>{try{const I=localStorage.getItem("comandaplus_cart");if(I){const N=JSON.parse(I),G=24*60*60*1e3;if(Date.now()-N.timestamp<G)return e.value=N.restauranteId,t.value=N.mesa,s.value=N.items||[],r.value=N.descuentos||0,n.value=N.propina||0,!0}}catch(I){console.error("Error loading cart from localStorage:",I)}return!1},clearLocalStorage:()=>{try{localStorage.removeItem("comandaplus_cart")}catch(I){console.error("Error clearing cart from localStorage:",I)}}}}),aw={class:"bg-white border-b border-gray-100 px-4 py-4 flex space-x-4"},lw={class:"flex-shrink-0"},cw={class:"relative"},uw=["src","alt"],dw={key:1,class:"w-20 h-20 bg-gray-200 rounded-lg flex items-center justify-center"},fw={class:"absolute -top-2 -left-2 flex flex-col space-y-1"},hw={key:0,class:"bg-green-500 text-white text-xs px-2 py-1 rounded-full font-medium"},pw={key:1,class:"bg-orange-500 text-white text-xs px-2 py-1 rounded-full font-medium"},mw={key:2,class:"absolute inset-0 bg-black bg-opacity-50 rounded-lg flex items-center justify-center"},gw={class:"flex-1 min-w-0"},vw={class:"flex justify-between items-start"},yw={class:"flex-1"},bw={class:"text-lg font-medium text-gray-900 truncate"},_w={key:0,class:"text-sm text-gray-600 mt-1 line-clamp-2"},ww={class:"flex items-center space-x-3 mt-2"},xw={key:0,class:"flex items-center text-xs text-gray-500"},kw={key:1,class:"flex items-center text-xs text-gray-500"},$w={class:"flex flex-wrap gap-1 mt-2"},Ew={key:0,class:"bg-green-100 text-green-800 text-xs px-2 py-1 rounded-full"},Cw={key:1,class:"bg-green-100 text-green-800 text-xs px-2 py-1 rounded-full"},Sw={key:2,class:"bg-blue-100 text-blue-800 text-xs px-2 py-1 rounded-full"},Tw={key:1,class:"mt-2"},Pw={key:0,class:"mt-1"},Aw={class:"flex flex-wrap gap-1"},Rw={class:"ml-4 flex flex-col items-end space-y-2"},jw={class:"text-right"},Ow={key:0,class:"text-lg font-bold text-orange-600"},Iw=["disabled"],Mw={key:1,disabled:"",class:"bg-gray-300 text-gray-500 px-4 py-2 rounded-lg text-sm font-medium cursor-not-allowed min-w-[80px]"},Lw=Ee({__name:"PlatoCard",props:{plato:{}},emits:["add-to-cart"],setup(e,{emit:t}){const s=e,r=t,n=U(!1),o=U(!1),i=async()=>{if(!(!s.plato.esta_disponible||n.value))try{n.value=!0,r("add-to-cart",s.plato,1),setTimeout(()=>{n.value=!1},300)}catch(l){console.error("Error adding to cart:",l),n.value=!1}},a=l=>{const d=l.target;d.style.display="none"};return(l,d)=>(b(),k("div",aw,[c("div",lw,[c("div",cw,[l.plato.url_imagen?(b(),k("img",{key:0,src:l.plato.url_imagen,alt:l.plato.nombre,class:"w-20 h-20 rounded-lg object-cover",onError:a},null,40,uw)):(b(),k("div",dw,d[1]||(d[1]=[c("svg",{class:"w-8 h-8 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1)]))),c("div",fw,[l.plato.es_nuevo?(b(),k("span",hw," Nuevo ")):F("",!0),l.plato.es_recomendado?(b(),k("span",pw," ⭐ ")):F("",!0)]),l.plato.esta_disponible?F("",!0):(b(),k("div",mw,d[2]||(d[2]=[c("span",{class:"text-white text-xs font-medium"},"No disponible",-1)])))])]),c("div",gw,[c("div",vw,[c("div",yw,[c("h3",bw,E(l.plato.nombre),1),l.plato.descripcion?(b(),k("p",_w,E(l.plato.descripcion),1)):F("",!0),c("div",ww,[l.plato.tiempo_preparacion?(b(),k("div",xw,[d[3]||(d[3]=c("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),xe(" "+E(l.plato.tiempo_preparacion)+" min ",1)])):F("",!0),l.plato.calorias?(b(),k("div",kw,[c("span",null,E(l.plato.calorias)+" cal",1)])):F("",!0)]),c("div",$w,[l.plato.es_vegano?(b(),k("span",Ew," 🌱 Vegano ")):F("",!0),l.plato.es_vegetariano&&!l.plato.es_vegano?(b(),k("span",Cw," 🥬 Vegetariano ")):F("",!0),l.plato.es_sin_gluten?(b(),k("span",Sw," Sin gluten ")):F("",!0)]),l.plato.alergenos&&l.plato.alergenos.length>0?(b(),k("div",Tw,[c("button",{onClick:d[0]||(d[0]=u=>o.value=!o.value),class:"text-xs text-orange-600 hover:text-orange-700 font-medium"},E(o.value?"Ocultar":"Ver")+" alérgenos ("+E(l.plato.alergenos.length)+") ",1),o.value?(b(),k("div",Pw,[c("div",Aw,[(b(!0),k(fe,null,Ce(l.plato.alergenos,u=>(b(),k("span",{key:u,class:"bg-red-100 text-red-800 text-xs px-2 py-1 rounded-full"},E(u),1))),128))])])):F("",!0)])):F("",!0)]),c("div",Rw,[c("div",jw,[l.plato.precio_oferta?(b(),k("span",Ow," €"+E(l.plato.precio_oferta.toFixed(2)),1)):F("",!0),c("span",{class:ye(["text-lg font-bold",l.plato.precio_oferta?"text-gray-400 line-through text-sm ml-1":"text-gray-900"])}," €"+E(l.plato.precio.toFixed(2)),3)]),l.plato.esta_disponible?(b(),k("button",{key:0,onClick:i,disabled:n.value,class:"bg-orange-500 text-white px-4 py-2 rounded-lg text-sm font-medium hover:bg-orange-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors min-w-[80px]"},E(n.value?"...":"Añadir"),9,Iw)):(b(),k("button",Mw," No disponible "))])])])]))}}),Dw=Yr(Lw,[["__scopeId","data-v-e1ae2e92"]]),Nw={class:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-end justify-center"},Fw={class:"bg-white rounded-t-xl max-w-md w-full max-h-[90vh] flex flex-col"},Uw={class:"flex items-center justify-between p-4 border-b"},Bw={class:"text-sm text-gray-600"},zw={class:"flex-1 overflow-y-auto"},Vw={key:0,class:"p-4 space-y-4"},Hw=["src","alt"],qw={key:1,class:"w-12 h-12 bg-gray-200 rounded-lg flex-shrink-0"},Kw={class:"flex-1 min-w-0"},Ww={class:"font-medium text-gray-900 truncate"},Gw={class:"text-sm text-gray-600"},Jw={key:0,class:"mt-1"},Qw={key:0,class:"text-xs text-gray-500"},Yw={key:1,class:"text-xs text-gray-500"},Xw={class:"flex items-center justify-between mt-2"},Zw={class:"flex items-center space-x-2"},ex=["onClick"],tx={class:"w-8 text-center font-medium"},sx=["onClick"],rx={class:"flex items-center space-x-2"},nx={class:"font-medium text-gray-900"},ox=["onClick"],ix={key:1,class:"p-8 text-center"},ax={key:2,class:"px-4 pb-4"},lx={class:"bg-gray-50 rounded-lg p-4"},cx={class:"grid grid-cols-4 gap-2 mb-3"},ux=["onClick"],dx={class:"flex items-center space-x-2"},fx={key:0,class:"border-t bg-white p-4 space-y-4"},hx={class:"space-y-2"},px={class:"flex justify-between text-sm"},mx={class:"font-medium"},gx={key:0,class:"flex justify-between text-sm"},vx={class:"font-medium text-green-600"},yx={key:1,class:"flex justify-between text-sm"},bx={class:"font-medium"},_x={class:"flex justify-between text-lg font-bold border-t pt-2"},wx={class:"space-y-2"},xx=["disabled"],kx=Ee({__name:"CarritoModal",props:{restaurant:{},mesa:{}},emits:["close"],setup(e,{emit:t}){const s=t,r=Wi(),{crearPedidoMesa:n}=Ku(),{showToast:o}=Xr(),i=U(!1),a=U(r.propina),l=async()=>{try{i.value=!0;const d=r.validateCart();if(!d.isValid){o(d.errors[0],"error");return}const u=r.getOrderData(),{data:f,error:h}=await n({restaurante_id:u.restaurante_id,numero_mesa:u.numero_mesa,items:u.items,notas:"Pedido desde mesa via QR"});if(h)throw new Error(h.message||"Error al crear el pedido");o("¡Pedido realizado con éxito!","success"),r.clearCart(),r.clearLocalStorage(),s("close")}catch(d){console.error("Error realizando pedido:",d),o(d instanceof Error?d.message:"Error al realizar el pedido","error")}finally{i.value=!1}};return(d,u)=>{var f;return b(),k("div",Nw,[c("div",Fw,[c("div",Uw,[c("div",null,[u[4]||(u[4]=c("h2",{class:"text-lg font-semibold text-gray-900"},"Tu pedido",-1)),c("p",Bw,E((f=d.restaurant)==null?void 0:f.nombre)+" - Mesa "+E(d.mesa),1)]),c("button",{onClick:u[0]||(u[0]=h=>d.$emit("close")),class:"p-2 hover:bg-gray-100 rounded-full"},u[5]||(u[5]=[c("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),c("div",zw,[B(r).isEmpty?(b(),k("div",ix,u[9]||(u[9]=[c("svg",{class:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 3h2l.4 2M7 13h10l4-8H5.4m0 0L7 13m0 0l-1.5 6M7 13l-1.5 6m0 0H17M13 13v6a2 2 0 01-2 2H9a2 2 0 01-2-2v-6"})],-1),c("h3",{class:"mt-2 text-sm font-medium text-gray-900"},"Carrito vacío",-1),c("p",{class:"mt-1 text-sm text-gray-500"},"Añade algunos platos para comenzar",-1)]))):(b(),k("div",Vw,[(b(!0),k(fe,null,Ce(B(r).items,(h,p)=>(b(),k("div",{key:`${h.id}-${p}`,class:"flex items-start space-x-3 bg-gray-50 rounded-lg p-3"},[h.imagen?(b(),k("img",{key:0,src:h.imagen,alt:h.nombre,class:"w-12 h-12 rounded-lg object-cover flex-shrink-0"},null,8,Hw)):(b(),k("div",qw)),c("div",Kw,[c("h4",Ww,E(h.nombre),1),c("p",Gw,"€"+E(h.precio.toFixed(2))+" c/u",1),h.personalizaciones?(b(),k("div",Jw,[h.personalizaciones.variante?(b(),k("p",Qw,E(h.personalizaciones.variante),1)):F("",!0),h.personalizaciones.notas?(b(),k("p",Yw," Nota: "+E(h.personalizaciones.notas),1)):F("",!0)])):F("",!0),c("div",Xw,[c("div",Zw,[c("button",{onClick:x=>B(r).updateItemQuantity(p,h.cantidad-1),class:"w-8 h-8 rounded-full bg-gray-200 flex items-center justify-center hover:bg-gray-300"},u[6]||(u[6]=[c("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M20 12H4"})],-1)]),8,ex),c("span",tx,E(h.cantidad),1),c("button",{onClick:x=>B(r).updateItemQuantity(p,h.cantidad+1),class:"w-8 h-8 rounded-full bg-gray-200 flex items-center justify-center hover:bg-gray-300"},u[7]||(u[7]=[c("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1)]),8,sx)]),c("div",rx,[c("span",nx,"€"+E(h.subtotal.toFixed(2)),1),c("button",{onClick:x=>B(r).removeItem(p),class:"text-red-500 hover:text-red-700 p-1"},u[8]||(u[8]=[c("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)]),8,ox)])])])]))),128))])),B(r).isEmpty?F("",!0):(b(),k("div",ax,[c("div",lx,[u[12]||(u[12]=c("h4",{class:"font-medium text-gray-900 mb-3"},"Propina (opcional)",-1)),c("div",cx,[(b(),k(fe,null,Ce([10,15,20,25],h=>c("button",{key:h,onClick:p=>B(r).calculatePropinaByPercentage(h),class:ye(["py-2 px-3 rounded-lg text-sm font-medium border transition-colors",Math.abs(B(r).propina-B(r).subtotal*h/100)<.01?"bg-orange-500 text-white border-orange-500":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"])},E(h)+"% ",11,ux)),64))]),c("div",dx,[u[10]||(u[10]=c("span",{class:"text-sm text-gray-600"},"Personalizada:",-1)),Ke(c("input",{"onUpdate:modelValue":u[1]||(u[1]=h=>a.value=h),onInput:u[2]||(u[2]=h=>B(r).updatePropina(a.value||0)),type:"number",step:"0.5",min:"0",placeholder:"0.00",class:"flex-1 px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-orange-500"},null,544),[[nt,a.value,void 0,{number:!0}]]),u[11]||(u[11]=c("span",{class:"text-sm text-gray-600"},"€",-1))])])]))]),B(r).isEmpty?F("",!0):(b(),k("div",fx,[c("div",hx,[c("div",px,[u[13]||(u[13]=c("span",{class:"text-gray-600"},"Subtotal",-1)),c("span",mx,"€"+E(B(r).subtotal.toFixed(2)),1)]),B(r).descuentos>0?(b(),k("div",gx,[u[14]||(u[14]=c("span",{class:"text-gray-600"},"Descuentos",-1)),c("span",vx,"-€"+E(B(r).descuentos.toFixed(2)),1)])):F("",!0),B(r).propina>0?(b(),k("div",yx,[u[15]||(u[15]=c("span",{class:"text-gray-600"},"Propina",-1)),c("span",bx,"€"+E(B(r).propina.toFixed(2)),1)])):F("",!0),c("div",_x,[u[16]||(u[16]=c("span",null,"Total",-1)),c("span",null,"€"+E(B(r).total.toFixed(2)),1)])]),c("div",wx,[c("button",{onClick:l,disabled:i.value,class:"w-full bg-orange-500 text-white py-3 px-4 rounded-lg font-medium hover:bg-orange-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors"},E(i.value?"Procesando...":`Pedir ahora • €${B(r).total.toFixed(2)}`),9,xx),c("button",{onClick:u[3]||(u[3]=(...h)=>B(r).clearCart&&B(r).clearCart(...h)),class:"w-full bg-gray-100 text-gray-700 py-2 px-4 rounded-lg font-medium hover:bg-gray-200 transition-colors"}," Vaciar carrito ")])]))])])}}}),$x={class:"min-h-screen bg-gray-50"},Ex={class:"bg-white shadow-sm sticky top-0 z-40"},Cx={class:"max-w-md mx-auto px-4 py-4"},Sx={class:"flex items-center justify-between"},Tx={class:"flex items-center space-x-3"},Px=["src","alt"],Ax={key:1,class:"w-10 h-10 bg-orange-500 rounded-full flex items-center justify-center"},Rx={class:"text-white font-bold text-lg"},jx={class:"text-lg font-semibold text-gray-900"},Ox={key:0,class:"text-sm text-gray-600"},Ix={key:0,class:"absolute -top-2 -right-2 bg-red-500 text-white text-xs rounded-full h-6 w-6 flex items-center justify-center font-bold"},Mx={key:0,class:"flex justify-center items-center py-12"},Lx={key:1,class:"text-center py-12 px-4"},Dx={class:"mt-1 text-sm text-gray-500"},Nx={key:2,class:"bg-white border-b sticky top-16 z-30"},Fx={class:"max-w-md mx-auto px-4 py-3"},Ux={class:"flex space-x-2 overflow-x-auto scrollbar-hide"},Bx=["onClick"],zx={key:0,class:"mr-2"},Vx={class:"max-w-md mx-auto pb-24"},Hx=["id"],qx={class:"px-4 py-4 bg-white"},Kx={class:"text-xl font-bold text-gray-900 flex items-center"},Wx={key:0,class:"mr-3 text-2xl"},Gx={key:0,class:"text-sm text-gray-600 mt-1"},Jx={class:"space-y-1"},Qx={key:0,class:"text-center py-12 px-4"},Yx={key:3,class:"fixed bottom-4 left-4 right-4 z-50 max-w-md mx-auto"},Xx={class:"flex items-center"},Zx={class:"bg-orange-600 text-white text-sm rounded-full h-6 w-6 flex items-center justify-center font-bold mr-3"},e2={class:"font-bold"},t2=Ee({__name:"MenuDigitalView",setup(e){const t=nr(),{getMenuPublico:s}=Ku(),{showToast:r}=Xr(),n=Wi(),o=V(()=>t.params.restaurante_id),i=V(()=>t.params.mesa),a=U(!1),l=U(""),d=U(null),u=U([]),f=U(!1),h=U("");let p=null;const x=async()=>{try{a.value=!0,l.value="";const{data:y,error:g}=await s(o.value);if(g)throw new Error(g.message||"Error al cargar el menú");y&&(d.value=y.restaurant,u.value=y.categorias||[],n.initializeCart(o.value,i.value))}catch(y){console.error("Error cargando menú:",y),l.value=y instanceof Error?y.message:"Error desconocido",r("Error al cargar el menú","error")}finally{a.value=!1}},w=(y,g=1,$)=>{try{n.addItem({id:y.id,nombre:y.nombre,precio:y.precio_oferta||y.precio,imagen:y.url_imagen,categoria:y.categoria_nombre,personalizaciones:$},g),r(`${y.nombre} añadido al carrito`,"success")}catch(D){console.error("Error añadiendo al carrito:",D),r("Error al añadir al carrito","error")}},S=y=>{const g=document.getElementById(`categoria-${y}`);if(g){const se=g.getBoundingClientRect().top+window.pageYOffset-120;window.scrollTo({top:se,behavior:"smooth"})}},R=()=>{p=new IntersectionObserver(y=>{y.forEach(g=>{if(g.isIntersecting){const $=g.target.id.replace("categoria-","");h.value=$}})},{root:null,rootMargin:"-120px 0px -50% 0px",threshold:.1}),u.value.forEach(y=>{const g=document.getElementById(`categoria-${y.id}`);g&&(p==null||p.observe(g))})};return Be(async()=>{await x(),setTimeout(()=>{R()},100)}),Oi(()=>{p&&p.disconnect()}),(y,g)=>{var $,D,se,W;return b(),k("div",$x,[c("div",Ex,[c("div",Cx,[c("div",Sx,[c("div",Tx,[($=d.value)!=null&&$.url_logo?(b(),k("img",{key:0,src:d.value.url_logo,alt:d.value.nombre,class:"w-10 h-10 rounded-full object-cover"},null,8,Px)):(b(),k("div",Ax,[c("span",Rx,E(((se=(D=d.value)==null?void 0:D.nombre)==null?void 0:se.charAt(0))||"R"),1)])),c("div",null,[c("h1",jx,E(((W=d.value)==null?void 0:W.nombre)||"Cargando..."),1),i.value?(b(),k("p",Ox,"Mesa "+E(i.value),1)):F("",!0)])]),c("button",{onClick:g[0]||(g[0]=L=>f.value=!0),class:"relative bg-orange-500 text-white p-3 rounded-full shadow-lg hover:bg-orange-600 transition-colors"},[g[3]||(g[3]=c("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 3h2l.4 2M7 13h10l4-8H5.4m0 0L7 13m0 0l-1.5 6M7 13l-1.5 6m0 0H17M13 13v6a2 2 0 01-2 2H9a2 2 0 01-2-2v-6"})],-1)),B(n).totalItems>0?(b(),k("span",Ix,E(B(n).totalItems),1)):F("",!0)])])])]),a.value?(b(),k("div",Mx,g[4]||(g[4]=[c("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-orange-500"},null,-1),c("span",{class:"ml-3 text-gray-600"},"Cargando menú...",-1)]))):l.value?(b(),k("div",Lx,[g[5]||(g[5]=c("svg",{class:"mx-auto h-12 w-12 text-red-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})],-1)),g[6]||(g[6]=c("h3",{class:"mt-2 text-sm font-medium text-gray-900"},"Error al cargar el menú",-1)),c("p",Dx,E(l.value),1),c("button",{onClick:x,class:"mt-4 bg-orange-500 text-white px-4 py-2 rounded-lg hover:bg-orange-600"}," Reintentar ")])):u.value.length>0?(b(),k("div",Nx,[c("div",Fx,[c("div",Ux,[(b(!0),k(fe,null,Ce(u.value,L=>(b(),k("button",{key:L.id,onClick:A=>S(L.id),class:ye(["flex-shrink-0 px-4 py-2 rounded-full text-sm font-medium transition-colors",h.value===L.id?"bg-orange-500 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"])},[L.icono?(b(),k("span",zx,E(L.icono),1)):F("",!0),xe(" "+E(L.nombre),1)],10,Bx))),128))])])])):F("",!0),c("div",Vx,[(b(!0),k(fe,null,Ce(u.value,L=>(b(),k("div",{key:L.id,id:`categoria-${L.id}`,class:"mb-6"},[c("div",qx,[c("h2",Kx,[L.icono?(b(),k("span",Wx,E(L.icono),1)):F("",!0),xe(" "+E(L.nombre),1)]),L.descripcion?(b(),k("p",Gx,E(L.descripcion),1)):F("",!0)]),c("div",Jx,[(b(!0),k(fe,null,Ce(L.platos,A=>(b(),De(Dw,{key:A.id,plato:A,onAddToCart:w},null,8,["plato"]))),128))])],8,Hx))),128)),u.value.length===0&&!a.value?(b(),k("div",Qx,g[7]||(g[7]=[c("svg",{class:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.746 0 3.332.477 4.5 1.253v13C19.832 18.477 18.246 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})],-1),c("h3",{class:"mt-2 text-sm font-medium text-gray-900"},"Menú no disponible",-1),c("p",{class:"mt-1 text-sm text-gray-500"}," No hay platos disponibles en este momento. ",-1)]))):F("",!0)]),B(n).totalItems>0?(b(),k("div",Yx,[c("button",{onClick:g[1]||(g[1]=L=>f.value=!0),class:"w-full bg-orange-500 text-white py-4 px-6 rounded-lg shadow-lg flex items-center justify-between hover:bg-orange-600 transition-colors"},[c("div",Xx,[c("span",Zx,E(B(n).totalItems),1),g[8]||(g[8]=c("span",{class:"font-medium"},"Ver carrito",-1))]),c("span",e2,"€"+E(B(n).total.toFixed(2)),1)])])):F("",!0),f.value?(b(),De(kx,{key:4,restaurant:d.value,mesa:i.value,onClose:g[2]||(g[2]=L=>f.value=!1)},null,8,["restaurant","mesa"])):F("",!0)])}}}),s2=Yr(t2,[["__scopeId","data-v-52682871"]]);/**
 * @license lucide-vue-next v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var hn={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":2,"stroke-linecap":"round","stroke-linejoin":"round"};/**
 * @license lucide-vue-next v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r2=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Zr=(e,t)=>({size:s,strokeWidth:r=2,absoluteStrokeWidth:n,color:o,class:i,...a},{attrs:l,slots:d})=>He("svg",{...hn,width:s||hn.width,height:s||hn.height,stroke:o||hn.stroke,"stroke-width":n?Number(r)*24/Number(s):r,...l,class:["lucide",`lucide-${r2(e)}`],...a},[...t.map(u=>He(...u)),...d.default?[d.default()]:[]]);/**
 * @license lucide-vue-next v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n2=Zr("ClockIcon",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-vue-next v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o2=Zr("ShoppingBagIcon",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]]);/**
 * @license lucide-vue-next v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i2=Zr("TrendingUpIcon",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-vue-next v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a2=Zr("UsersIcon",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-vue-next v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l2=Zr("XIcon",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),c2={class:"bg-white shadow-sm border-b fixed top-0 left-0 right-0 z-40"},u2={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},d2={class:"flex justify-between h-16"},f2={class:"flex items-center"},h2={class:"hidden md:ml-8 md:flex md:space-x-1"},p2={class:"flex items-center space-x-4"},m2={class:"relative p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-full transition-colors"},g2={class:"w-8 h-8 bg-gray-300 rounded-full flex items-center justify-center overflow-hidden"},v2=["src","alt"],y2={key:1,class:"text-gray-600 text-sm font-medium"},b2={class:"hidden sm:block text-left"},_2={class:"text-sm font-medium text-gray-900"},w2={class:"text-xs text-gray-500 capitalize"},x2={class:"px-4 py-3 border-b border-gray-100 sm:hidden"},k2={class:"text-sm font-medium text-gray-900"},$2={class:"text-xs text-gray-500"},E2={class:"border-t border-gray-100 mt-1"},C2={key:0,class:"md:hidden border-t border-gray-200 pb-3"},S2={class:"pt-2 space-y-1"},T2=Ee({__name:"AppNavigation",props:{user:{},currentRoute:{}},emits:["sign-out"],setup(e,{emit:t}){const s={template:'<svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6" /></svg>'},r={template:'<svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01" /></svg>'},n={template:'<svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 13h8V3H3v10zm0 8h8v-6H3v6zm10 0h8V11h-8v10zm0-18v6h8V3h-8z" /></svg>'},o={template:'<svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9" /></svg>'},i={template:'<svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" /></svg>'},a={template:'<svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z" /><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" /></svg>'},l={template:'<svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1" /></svg>'},d={template:'<svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19.5 8.25l-7.5 7.5-7.5-7.5" /></svg>'},u={template:'<svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5" /></svg>'},f={template:'<svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" /></svg>'},h=e,p=t,x=nr(),w=U(!1),S=U(!1),R=U(null),y=V(()=>{var L;const W=[{name:"Dashboard",to:"/dashboard",icon:s,roles:["admin","dueño","encargado","empleado"]},{name:"Pedidos",to:"/pedidos",icon:r,roles:["admin","dueño","encargado","empleado"]},{name:"Analytics",to:"/analytics",icon:n,roles:["admin","dueño","encargado"]}];return(L=h.user)!=null&&L.rol?W.filter(A=>A.roles.includes(h.user.rol)):W}),g=W=>x.path===W||x.name===W.slice(1),$=W=>W?W.split(" ").map(L=>L.charAt(0)).slice(0,2).join("").toUpperCase():"U",D=()=>{w.value=!1,p("sign-out")},se=W=>{R.value&&!R.value.contains(W.target)&&(w.value=!1)};return Be(()=>{document.addEventListener("click",se)}),it(()=>{document.removeEventListener("click",se)}),(W,L)=>{var T,I,N,G;const A=Jn("router-link");return b(),k("nav",c2,[c("div",u2,[c("div",d2,[c("div",f2,[oe(A,{to:"/dashboard",class:"flex items-center space-x-3 text-xl font-bold text-gray-900 hover:text-orange-600 transition-colors"},{default:ze(()=>L[6]||(L[6]=[c("div",{class:"w-8 h-8 bg-orange-500 rounded-lg flex items-center justify-center"},[c("span",{class:"text-white font-bold text-sm"},"C+")],-1),c("span",{class:"hidden sm:block"},"ComandaPlus",-1)])),_:1,__:[6]}),c("div",h2,[(b(!0),k(fe,null,Ce(y.value,re=>(b(),De(A,{key:re.name,to:re.to,class:ye(["px-3 py-2 rounded-md text-sm font-medium transition-colors",g(re.to)?"bg-orange-100 text-orange-700":"text-gray-600 hover:text-gray-900 hover:bg-gray-100"])},{default:ze(()=>[(b(),De(Qs(re.icon),{class:"w-4 h-4 mr-2 inline"})),xe(" "+E(re.name),1)]),_:2},1032,["to","class"]))),128))])]),c("div",p2,[c("button",m2,[oe(o,{class:"w-5 h-5"}),L[7]||(L[7]=c("span",{class:"absolute top-1 right-1 w-2 h-2 bg-red-500 rounded-full"},null,-1))]),c("div",{class:"relative",ref_key:"profileDropdown",ref:R},[c("button",{onClick:L[0]||(L[0]=re=>w.value=!w.value),class:"flex items-center space-x-3 p-2 rounded-lg hover:bg-gray-100 transition-colors"},[c("div",g2,[(T=W.user)!=null&&T.url_avatar?(b(),k("img",{key:0,src:W.user.url_avatar,alt:W.user.nombre_completo,class:"w-full h-full object-cover"},null,8,v2)):(b(),k("span",y2,E($((I=W.user)==null?void 0:I.nombre_completo)),1))]),c("div",b2,[c("p",_2,E(((N=W.user)==null?void 0:N.nombre_completo)||"Usuario"),1),c("p",w2,E(((G=W.user)==null?void 0:G.rol)||"cliente"),1)]),oe(d,{class:"w-4 h-4 text-gray-500"})]),oe(Ca,{name:"dropdown"},{default:ze(()=>{var re,we;return[w.value?(b(),k("div",{key:0,class:"absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-lg border border-gray-200 py-1 z-50",onClick:L[3]||(L[3]=Is(()=>{},["stop"]))},[c("div",x2,[c("p",k2,E(((re=W.user)==null?void 0:re.nombre_completo)||"Usuario"),1),c("p",$2,E((we=W.user)==null?void 0:we.email),1)]),oe(A,{to:"/profile",class:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 transition-colors",onClick:L[1]||(L[1]=he=>w.value=!1)},{default:ze(()=>[oe(i,{class:"w-4 h-4 mr-3 inline"}),L[8]||(L[8]=xe(" Mi perfil "))]),_:1,__:[8]}),oe(A,{to:"/settings",class:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 transition-colors",onClick:L[2]||(L[2]=he=>w.value=!1)},{default:ze(()=>[oe(a,{class:"w-4 h-4 mr-3 inline"}),L[9]||(L[9]=xe(" Configuración "))]),_:1,__:[9]}),c("div",E2,[c("button",{onClick:D,class:"block w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-red-50 transition-colors"},[oe(l,{class:"w-4 h-4 mr-3 inline"}),L[10]||(L[10]=xe(" Cerrar sesión "))])])])):F("",!0)]}),_:1})],512),c("button",{onClick:L[4]||(L[4]=re=>S.value=!S.value),class:"md:hidden p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-md transition-colors"},[S.value?(b(),De(f,{key:1,class:"w-5 h-5"})):(b(),De(u,{key:0,class:"w-5 h-5"}))])])]),oe(Ca,{name:"mobile-menu"},{default:ze(()=>[S.value?(b(),k("div",C2,[c("div",S2,[(b(!0),k(fe,null,Ce(y.value,re=>(b(),De(A,{key:re.name,to:re.to,class:ye(["block px-3 py-2 rounded-md text-base font-medium transition-colors",g(re.to)?"bg-orange-100 text-orange-700":"text-gray-600 hover:text-gray-900 hover:bg-gray-100"]),onClick:L[5]||(L[5]=we=>S.value=!1)},{default:ze(()=>[(b(),De(Qs(re.icon),{class:"w-5 h-5 mr-3 inline"})),xe(" "+E(re.name),1)]),_:2},1032,["to","class"]))),128))])])):F("",!0)]),_:1})])])}}}),P2=Yr(T2,[["__scopeId","data-v-8c305440"]]),A2={class:"fixed top-4 right-4 z-50 space-y-2 max-w-sm w-full"},R2={class:"flex-shrink-0"},j2={class:"flex-1 min-w-0"},O2=["onClick"],I2=Ee({__name:"ToastContainer",setup(e){const t={template:`
    <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
      <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd" />
    </svg>
  `},s={template:`
    <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
      <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z" clip-rule="evenodd" />
    </svg>
  `},r={template:`
    <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
      <path fill-rule="evenodd" d="M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z" clip-rule="evenodd" />
    </svg>
  `},n={template:`
    <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
      <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd" />
    </svg>
  `},o={template:`
    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
    </svg>
  `},{toasts:i,removeToast:a}=Xr(),l=p=>{const x={success:"bg-green-50 border border-green-200",error:"bg-red-50 border border-red-200",warning:"bg-yellow-50 border border-yellow-200",info:"bg-blue-50 border border-blue-200"};return x[p]||x.info},d=p=>{const x={success:"text-green-400",error:"text-red-400",warning:"text-yellow-400",info:"text-blue-400"};return x[p]||x.info},u=p=>{const x={success:"text-green-800",error:"text-red-800",warning:"text-yellow-800",info:"text-blue-800"};return`text-sm font-medium ${x[p]||x.info}`},f=p=>{const x={success:"text-green-500 hover:bg-green-100 focus:ring-green-600",error:"text-red-500 hover:bg-red-100 focus:ring-red-600",warning:"text-yellow-500 hover:bg-yellow-100 focus:ring-yellow-600",info:"text-blue-500 hover:bg-blue-100 focus:ring-blue-600"};return x[p]||x.info},h=p=>{const x={success:t,error:s,warning:r,info:n};return x[p]||x.info};return(p,x)=>(b(),De(Kn,{to:"body"},[c("div",A2,[oe(Oh,{name:"toast",tag:"div"},{default:ze(()=>[(b(!0),k(fe,null,Ce(B(i),w=>(b(),k("div",{key:w.id,class:ye(["rounded-lg shadow-lg p-4 flex items-start space-x-3 max-w-sm",l(w.type)])},[c("div",R2,[(b(),De(Qs(h(w.type)),{class:ye(d(w.type))},null,8,["class"]))]),c("div",j2,[c("p",{class:ye(u(w.type))},E(w.message),3)]),c("button",{onClick:S=>B(a)(w.id),class:ye(["flex-shrink-0 rounded-md p-1.5 inline-flex focus:outline-none focus:ring-2 focus:ring-offset-2",f(w.type)])},[x[0]||(x[0]=c("span",{class:"sr-only"},"Cerrar",-1)),oe(o,{class:"h-5 w-5"})],10,O2)],2))),128))]),_:1})])]))}}),M2=Yr(I2,[["__scopeId","data-v-1e89a0bf"]]),L2={class:"min-h-screen bg-gray-50 flex flex-col"},Wu=Ee({__name:"AppLayout",setup(e){const t=nr(),s=no(),r=Qt(),{showToast:n}=Xr(),o=V(()=>!["menu-digital","auth","create-profile"].includes(t.name)),i=V(()=>{const l="flex-1";return o.value?`${l} pt-16`:l}),a=async()=>{try{await r.signOut(),n("Sesión cerrada correctamente","success"),s.push("/")}catch(l){console.error("Error signing out:",l),n("Error al cerrar sesión","error")}};return(l,d)=>{const u=Jn("router-view");return b(),k("div",L2,[o.value?(b(),De(P2,{key:0,user:B(r).profile,"current-route":l.$route.name,onSignOut:a},null,8,["user","current-route"])):F("",!0),c("main",{class:ye(i.value)},[oe(u)],2),oe(M2)])}}});function Gi(e){typeof queueMicrotask=="function"?queueMicrotask(e):Promise.resolve().then(e).catch(t=>setTimeout(()=>{throw t}))}function en(){let e=[],t={addEventListener(s,r,n,o){return s.addEventListener(r,n,o),t.add(()=>s.removeEventListener(r,n,o))},requestAnimationFrame(...s){let r=requestAnimationFrame(...s);t.add(()=>cancelAnimationFrame(r))},nextFrame(...s){t.requestAnimationFrame(()=>{t.requestAnimationFrame(...s)})},setTimeout(...s){let r=setTimeout(...s);t.add(()=>clearTimeout(r))},microTask(...s){let r={current:!0};return Gi(()=>{r.current&&s[0]()}),t.add(()=>{r.current=!1})},style(s,r,n){let o=s.style.getPropertyValue(r);return Object.assign(s.style,{[r]:n}),this.add(()=>{Object.assign(s.style,{[r]:o})})},group(s){let r=en();return s(r),this.add(()=>r.dispose())},add(s){return e.push(s),()=>{let r=e.indexOf(s);if(r>=0)for(let n of e.splice(r,1))n()}},dispose(){for(let s of e.splice(0))s()}};return t}var Cl;let D2=Symbol("headlessui.useid"),N2=0;const ho=(Cl=df)!=null?Cl:function(){return Ne(D2,()=>`${++N2}`)()};function qe(e){var t;if(e==null||e.value==null)return null;let s=(t=e.value.$el)!=null?t:e.value;return s instanceof Node?s:null}function Dt(e,t,...s){if(e in t){let n=t[e];return typeof n=="function"?n(...s):n}let r=new Error(`Tried to handle "${e}" but there is no handler defined. Only defined handlers are: ${Object.keys(t).map(n=>`"${n}"`).join(", ")}.`);throw Error.captureStackTrace&&Error.captureStackTrace(r,Dt),r}var F2=Object.defineProperty,U2=(e,t,s)=>t in e?F2(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,Sl=(e,t,s)=>(U2(e,typeof t!="symbol"?t+"":t,s),s);let B2=class{constructor(){Sl(this,"current",this.detect()),Sl(this,"currentId",0)}set(t){this.current!==t&&(this.currentId=0,this.current=t)}reset(){this.set(this.detect())}nextId(){return++this.currentId}get isServer(){return this.current==="server"}get isClient(){return this.current==="client"}detect(){return typeof window>"u"||typeof document>"u"?"server":"client"}},tn=new B2;function ar(e){if(tn.isServer)return null;if(e instanceof Node)return e.ownerDocument;if(e!=null&&e.hasOwnProperty("value")){let t=qe(e);if(t)return t.ownerDocument}return document}let ui=["[contentEditable=true]","[tabindex]","a[href]","area[href]","button:not([disabled])","iframe","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].map(e=>`${e}:not([tabindex='-1'])`).join(",");var cs=(e=>(e[e.First=1]="First",e[e.Previous=2]="Previous",e[e.Next=4]="Next",e[e.Last=8]="Last",e[e.WrapAround=16]="WrapAround",e[e.NoScroll=32]="NoScroll",e))(cs||{}),Gu=(e=>(e[e.Error=0]="Error",e[e.Overflow=1]="Overflow",e[e.Success=2]="Success",e[e.Underflow=3]="Underflow",e))(Gu||{}),z2=(e=>(e[e.Previous=-1]="Previous",e[e.Next=1]="Next",e))(z2||{});function V2(e=document.body){return e==null?[]:Array.from(e.querySelectorAll(ui)).sort((t,s)=>Math.sign((t.tabIndex||Number.MAX_SAFE_INTEGER)-(s.tabIndex||Number.MAX_SAFE_INTEGER)))}var Ju=(e=>(e[e.Strict=0]="Strict",e[e.Loose=1]="Loose",e))(Ju||{});function H2(e,t=0){var s;return e===((s=ar(e))==null?void 0:s.body)?!1:Dt(t,{0(){return e.matches(ui)},1(){let r=e;for(;r!==null;){if(r.matches(ui))return!0;r=r.parentElement}return!1}})}var q2=(e=>(e[e.Keyboard=0]="Keyboard",e[e.Mouse=1]="Mouse",e))(q2||{});typeof window<"u"&&typeof document<"u"&&(document.addEventListener("keydown",e=>{e.metaKey||e.altKey||e.ctrlKey||(document.documentElement.dataset.headlessuiFocusVisible="")},!0),document.addEventListener("click",e=>{e.detail===1?delete document.documentElement.dataset.headlessuiFocusVisible:e.detail===0&&(document.documentElement.dataset.headlessuiFocusVisible="")},!0));function Rs(e){e==null||e.focus({preventScroll:!0})}let K2=["textarea","input"].join(",");function W2(e){var t,s;return(s=(t=e==null?void 0:e.matches)==null?void 0:t.call(e,K2))!=null?s:!1}function G2(e,t=s=>s){return e.slice().sort((s,r)=>{let n=t(s),o=t(r);if(n===null||o===null)return 0;let i=n.compareDocumentPosition(o);return i&Node.DOCUMENT_POSITION_FOLLOWING?-1:i&Node.DOCUMENT_POSITION_PRECEDING?1:0})}function kn(e,t,{sorted:s=!0,relativeTo:r=null,skipElements:n=[]}={}){var o;let i=(o=Array.isArray(e)?e.length>0?e[0].ownerDocument:document:e==null?void 0:e.ownerDocument)!=null?o:document,a=Array.isArray(e)?s?G2(e):e:V2(e);n.length>0&&a.length>1&&(a=a.filter(x=>!n.includes(x))),r=r??i.activeElement;let l=(()=>{if(t&5)return 1;if(t&10)return-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),d=(()=>{if(t&1)return 0;if(t&2)return Math.max(0,a.indexOf(r))-1;if(t&4)return Math.max(0,a.indexOf(r))+1;if(t&8)return a.length-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),u=t&32?{preventScroll:!0}:{},f=0,h=a.length,p;do{if(f>=h||f+h<=0)return 0;let x=d+f;if(t&16)x=(x+h)%h;else{if(x<0)return 3;if(x>=h)return 1}p=a[x],p==null||p.focus(u),f+=l}while(p!==i.activeElement);return t&6&&W2(p)&&p.select(),2}function Qu(){return/iPhone/gi.test(window.navigator.platform)||/Mac/gi.test(window.navigator.platform)&&window.navigator.maxTouchPoints>0}function J2(){return/Android/gi.test(window.navigator.userAgent)}function Q2(){return Qu()||J2()}function pn(e,t,s){tn.isServer||Ct(r=>{document.addEventListener(e,t,s),r(()=>document.removeEventListener(e,t,s))})}function Yu(e,t,s){tn.isServer||Ct(r=>{window.addEventListener(e,t,s),r(()=>window.removeEventListener(e,t,s))})}function Y2(e,t,s=V(()=>!0)){function r(o,i){if(!s.value||o.defaultPrevented)return;let a=i(o);if(a===null||!a.getRootNode().contains(a))return;let l=function d(u){return typeof u=="function"?d(u()):Array.isArray(u)||u instanceof Set?u:[u]}(e);for(let d of l){if(d===null)continue;let u=d instanceof HTMLElement?d:qe(d);if(u!=null&&u.contains(a)||o.composed&&o.composedPath().includes(u))return}return!H2(a,Ju.Loose)&&a.tabIndex!==-1&&o.preventDefault(),t(o,a)}let n=U(null);pn("pointerdown",o=>{var i,a;s.value&&(n.value=((a=(i=o.composedPath)==null?void 0:i.call(o))==null?void 0:a[0])||o.target)},!0),pn("mousedown",o=>{var i,a;s.value&&(n.value=((a=(i=o.composedPath)==null?void 0:i.call(o))==null?void 0:a[0])||o.target)},!0),pn("click",o=>{Q2()||n.value&&(r(o,()=>n.value),n.value=null)},!0),pn("touchend",o=>r(o,()=>o.target instanceof HTMLElement?o.target:null),!0),Yu("blur",o=>r(o,()=>window.document.activeElement instanceof HTMLIFrameElement?window.document.activeElement:null),!0)}var Nn=(e=>(e[e.None=0]="None",e[e.RenderStrategy=1]="RenderStrategy",e[e.Static=2]="Static",e))(Nn||{}),us=(e=>(e[e.Unmount=0]="Unmount",e[e.Hidden=1]="Hidden",e))(us||{});function Nt({visible:e=!0,features:t=0,ourProps:s,theirProps:r,...n}){var o;let i=Zu(r,s),a=Object.assign(n,{props:i});if(e||t&2&&i.static)return Lo(a);if(t&1){let l=(o=i.unmount)==null||o?0:1;return Dt(l,{0(){return null},1(){return Lo({...n,props:{...i,hidden:!0,style:{display:"none"}}})}})}return Lo(a)}function Lo({props:e,attrs:t,slots:s,slot:r,name:n}){var o,i;let{as:a,...l}=ed(e,["unmount","static"]),d=(o=s.default)==null?void 0:o.call(s,r),u={};if(r){let f=!1,h=[];for(let[p,x]of Object.entries(r))typeof x=="boolean"&&(f=!0),x===!0&&h.push(p);f&&(u["data-headlessui-state"]=h.join(" "))}if(a==="template"){if(d=Xu(d??[]),Object.keys(l).length>0||Object.keys(t).length>0){let[f,...h]=d??[];if(!X2(f)||h.length>0)throw new Error(['Passing props on "template"!',"",`The current component <${n} /> is rendering a "template".`,"However we need to passthrough the following props:",Object.keys(l).concat(Object.keys(t)).map(w=>w.trim()).filter((w,S,R)=>R.indexOf(w)===S).sort((w,S)=>w.localeCompare(S)).map(w=>`  - ${w}`).join(`
`),"","You can apply a few solutions:",['Add an `as="..."` prop, to ensure that we render an actual element instead of a "template".',"Render a single element as the child so that we can forward the props onto that element."].map(w=>`  - ${w}`).join(`
`)].join(`
`));let p=Zu((i=f.props)!=null?i:{},l,u),x=Gt(f,p,!0);for(let w in p)w.startsWith("on")&&(x.props||(x.props={}),x.props[w]=p[w]);return x}return Array.isArray(d)&&d.length===1?d[0]:d}return He(a,Object.assign({},l,u),{default:()=>d})}function Xu(e){return e.flatMap(t=>t.type===fe?Xu(t.children):[t])}function Zu(...e){if(e.length===0)return{};if(e.length===1)return e[0];let t={},s={};for(let r of e)for(let n in r)n.startsWith("on")&&typeof r[n]=="function"?(s[n]!=null||(s[n]=[]),s[n].push(r[n])):t[n]=r[n];if(t.disabled||t["aria-disabled"])return Object.assign(t,Object.fromEntries(Object.keys(s).map(r=>[r,void 0])));for(let r in s)Object.assign(t,{[r](n,...o){let i=s[r];for(let a of i){if(n instanceof Event&&n.defaultPrevented)return;a(n,...o)}}});return t}function ed(e,t=[]){let s=Object.assign({},e);for(let r of t)r in s&&delete s[r];return s}function X2(e){return e==null?!1:typeof e.type=="string"||typeof e.type=="object"||typeof e.type=="function"}var Fn=(e=>(e[e.None=1]="None",e[e.Focusable=2]="Focusable",e[e.Hidden=4]="Hidden",e))(Fn||{});let di=Ee({name:"Hidden",props:{as:{type:[Object,String],default:"div"},features:{type:Number,default:1}},setup(e,{slots:t,attrs:s}){return()=>{var r;let{features:n,...o}=e,i={"aria-hidden":(n&2)===2?!0:(r=o["aria-hidden"])!=null?r:void 0,hidden:(n&4)===4?!0:void 0,style:{position:"fixed",top:1,left:1,width:1,height:0,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0",...(n&4)===4&&(n&2)!==2&&{display:"none"}}};return Nt({ourProps:i,theirProps:o,slot:{},attrs:s,slots:t,name:"Hidden"})}}}),td=Symbol("Context");var mt=(e=>(e[e.Open=1]="Open",e[e.Closed=2]="Closed",e[e.Closing=4]="Closing",e[e.Opening=8]="Opening",e))(mt||{});function Z2(){return Ji()!==null}function Ji(){return Ne(td,null)}function ek(e){ut(td,e)}var sd=(e=>(e.Space=" ",e.Enter="Enter",e.Escape="Escape",e.Backspace="Backspace",e.Delete="Delete",e.ArrowLeft="ArrowLeft",e.ArrowUp="ArrowUp",e.ArrowRight="ArrowRight",e.ArrowDown="ArrowDown",e.Home="Home",e.End="End",e.PageUp="PageUp",e.PageDown="PageDown",e.Tab="Tab",e))(sd||{});function tk(e){function t(){document.readyState!=="loading"&&(e(),document.removeEventListener("DOMContentLoaded",t))}typeof window<"u"&&typeof document<"u"&&(document.addEventListener("DOMContentLoaded",t),t())}let Ss=[];tk(()=>{function e(t){t.target instanceof HTMLElement&&t.target!==document.body&&Ss[0]!==t.target&&(Ss.unshift(t.target),Ss=Ss.filter(s=>s!=null&&s.isConnected),Ss.splice(10))}window.addEventListener("click",e,{capture:!0}),window.addEventListener("mousedown",e,{capture:!0}),window.addEventListener("focus",e,{capture:!0}),document.body.addEventListener("click",e,{capture:!0}),document.body.addEventListener("mousedown",e,{capture:!0}),document.body.addEventListener("focus",e,{capture:!0})});function rd(e,t,s,r){tn.isServer||Ct(n=>{e=e??window,e.addEventListener(t,s,r),n(()=>e.removeEventListener(t,s,r))})}var br=(e=>(e[e.Forwards=0]="Forwards",e[e.Backwards=1]="Backwards",e))(br||{});function sk(){let e=U(0);return Yu("keydown",t=>{t.key==="Tab"&&(e.value=t.shiftKey?1:0)}),e}function nd(e){if(!e)return new Set;if(typeof e=="function")return new Set(e());let t=new Set;for(let s of e.value){let r=qe(s);r instanceof HTMLElement&&t.add(r)}return t}var od=(e=>(e[e.None=1]="None",e[e.InitialFocus=2]="InitialFocus",e[e.TabLock=4]="TabLock",e[e.FocusLock=8]="FocusLock",e[e.RestoreFocus=16]="RestoreFocus",e[e.All=30]="All",e))(od||{});let mr=Object.assign(Ee({name:"FocusTrap",props:{as:{type:[Object,String],default:"div"},initialFocus:{type:Object,default:null},features:{type:Number,default:30},containers:{type:[Object,Function],default:U(new Set)}},inheritAttrs:!1,setup(e,{attrs:t,slots:s,expose:r}){let n=U(null);r({el:n,$el:n});let o=V(()=>ar(n)),i=U(!1);Be(()=>i.value=!0),it(()=>i.value=!1),nk({ownerDocument:o},V(()=>i.value&&!!(e.features&16)));let a=ok({ownerDocument:o,container:n,initialFocus:V(()=>e.initialFocus)},V(()=>i.value&&!!(e.features&2)));ik({ownerDocument:o,container:n,containers:e.containers,previousActiveElement:a},V(()=>i.value&&!!(e.features&8)));let l=sk();function d(p){let x=qe(n);x&&(w=>w())(()=>{Dt(l.value,{[br.Forwards]:()=>{kn(x,cs.First,{skipElements:[p.relatedTarget]})},[br.Backwards]:()=>{kn(x,cs.Last,{skipElements:[p.relatedTarget]})}})})}let u=U(!1);function f(p){p.key==="Tab"&&(u.value=!0,requestAnimationFrame(()=>{u.value=!1}))}function h(p){if(!i.value)return;let x=nd(e.containers);qe(n)instanceof HTMLElement&&x.add(qe(n));let w=p.relatedTarget;w instanceof HTMLElement&&w.dataset.headlessuiFocusGuard!=="true"&&(id(x,w)||(u.value?kn(qe(n),Dt(l.value,{[br.Forwards]:()=>cs.Next,[br.Backwards]:()=>cs.Previous})|cs.WrapAround,{relativeTo:p.target}):p.target instanceof HTMLElement&&Rs(p.target)))}return()=>{let p={},x={ref:n,onKeydown:f,onFocusout:h},{features:w,initialFocus:S,containers:R,...y}=e;return He(fe,[!!(w&4)&&He(di,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:d,features:Fn.Focusable}),Nt({ourProps:x,theirProps:{...t,...y},slot:p,attrs:t,slots:s,name:"FocusTrap"}),!!(w&4)&&He(di,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:d,features:Fn.Focusable})])}}}),{features:od});function rk(e){let t=U(Ss.slice());return ot([e],([s],[r])=>{r===!0&&s===!1?Gi(()=>{t.value.splice(0)}):r===!1&&s===!0&&(t.value=Ss.slice())},{flush:"post"}),()=>{var s;return(s=t.value.find(r=>r!=null&&r.isConnected))!=null?s:null}}function nk({ownerDocument:e},t){let s=rk(t);Be(()=>{Ct(()=>{var r,n;t.value||((r=e.value)==null?void 0:r.activeElement)===((n=e.value)==null?void 0:n.body)&&Rs(s())},{flush:"post"})}),it(()=>{t.value&&Rs(s())})}function ok({ownerDocument:e,container:t,initialFocus:s},r){let n=U(null),o=U(!1);return Be(()=>o.value=!0),it(()=>o.value=!1),Be(()=>{ot([t,s,r],(i,a)=>{if(i.every((d,u)=>(a==null?void 0:a[u])===d)||!r.value)return;let l=qe(t);l&&Gi(()=>{var d,u;if(!o.value)return;let f=qe(s),h=(d=e.value)==null?void 0:d.activeElement;if(f){if(f===h){n.value=h;return}}else if(l.contains(h)){n.value=h;return}f?Rs(f):kn(l,cs.First|cs.NoScroll)===Gu.Error&&console.warn("There are no focusable elements inside the <FocusTrap />"),n.value=(u=e.value)==null?void 0:u.activeElement})},{immediate:!0,flush:"post"})}),n}function ik({ownerDocument:e,container:t,containers:s,previousActiveElement:r},n){var o;rd((o=e.value)==null?void 0:o.defaultView,"focus",i=>{if(!n.value)return;let a=nd(s);qe(t)instanceof HTMLElement&&a.add(qe(t));let l=r.value;if(!l)return;let d=i.target;d&&d instanceof HTMLElement?id(a,d)?(r.value=d,Rs(d)):(i.preventDefault(),i.stopPropagation(),Rs(l)):Rs(r.value)},!0)}function id(e,t){for(let s of e)if(s.contains(t))return!0;return!1}function ak(e){let t=nc(e.getSnapshot());return it(e.subscribe(()=>{t.value=e.getSnapshot()})),t}function lk(e,t){let s=e(),r=new Set;return{getSnapshot(){return s},subscribe(n){return r.add(n),()=>r.delete(n)},dispatch(n,...o){let i=t[n].call(s,...o);i&&(s=i,r.forEach(a=>a()))}}}function ck(){let e;return{before({doc:t}){var s;let r=t.documentElement;e=((s=t.defaultView)!=null?s:window).innerWidth-r.clientWidth},after({doc:t,d:s}){let r=t.documentElement,n=r.clientWidth-r.offsetWidth,o=e-n;s.style(r,"paddingRight",`${o}px`)}}}function uk(){return Qu()?{before({doc:e,d:t,meta:s}){function r(n){return s.containers.flatMap(o=>o()).some(o=>o.contains(n))}t.microTask(()=>{var n;if(window.getComputedStyle(e.documentElement).scrollBehavior!=="auto"){let a=en();a.style(e.documentElement,"scrollBehavior","auto"),t.add(()=>t.microTask(()=>a.dispose()))}let o=(n=window.scrollY)!=null?n:window.pageYOffset,i=null;t.addEventListener(e,"click",a=>{if(a.target instanceof HTMLElement)try{let l=a.target.closest("a");if(!l)return;let{hash:d}=new URL(l.href),u=e.querySelector(d);u&&!r(u)&&(i=u)}catch{}},!0),t.addEventListener(e,"touchstart",a=>{if(a.target instanceof HTMLElement)if(r(a.target)){let l=a.target;for(;l.parentElement&&r(l.parentElement);)l=l.parentElement;t.style(l,"overscrollBehavior","contain")}else t.style(a.target,"touchAction","none")}),t.addEventListener(e,"touchmove",a=>{if(a.target instanceof HTMLElement){if(a.target.tagName==="INPUT")return;if(r(a.target)){let l=a.target;for(;l.parentElement&&l.dataset.headlessuiPortal!==""&&!(l.scrollHeight>l.clientHeight||l.scrollWidth>l.clientWidth);)l=l.parentElement;l.dataset.headlessuiPortal===""&&a.preventDefault()}else a.preventDefault()}},{passive:!1}),t.add(()=>{var a;let l=(a=window.scrollY)!=null?a:window.pageYOffset;o!==l&&window.scrollTo(0,o),i&&i.isConnected&&(i.scrollIntoView({block:"nearest"}),i=null)})})}}:{}}function dk(){return{before({doc:e,d:t}){t.style(e.documentElement,"overflow","hidden")}}}function fk(e){let t={};for(let s of e)Object.assign(t,s(t));return t}let Ts=lk(()=>new Map,{PUSH(e,t){var s;let r=(s=this.get(e))!=null?s:{doc:e,count:0,d:en(),meta:new Set};return r.count++,r.meta.add(t),this.set(e,r),this},POP(e,t){let s=this.get(e);return s&&(s.count--,s.meta.delete(t)),this},SCROLL_PREVENT({doc:e,d:t,meta:s}){let r={doc:e,d:t,meta:fk(s)},n=[uk(),ck(),dk()];n.forEach(({before:o})=>o==null?void 0:o(r)),n.forEach(({after:o})=>o==null?void 0:o(r))},SCROLL_ALLOW({d:e}){e.dispose()},TEARDOWN({doc:e}){this.delete(e)}});Ts.subscribe(()=>{let e=Ts.getSnapshot(),t=new Map;for(let[s]of e)t.set(s,s.documentElement.style.overflow);for(let s of e.values()){let r=t.get(s.doc)==="hidden",n=s.count!==0;(n&&!r||!n&&r)&&Ts.dispatch(s.count>0?"SCROLL_PREVENT":"SCROLL_ALLOW",s),s.count===0&&Ts.dispatch("TEARDOWN",s)}});function hk(e,t,s){let r=ak(Ts),n=V(()=>{let o=e.value?r.value.get(e.value):void 0;return o?o.count>0:!1});return ot([e,t],([o,i],[a],l)=>{if(!o||!i)return;Ts.dispatch("PUSH",o,s);let d=!1;l(()=>{d||(Ts.dispatch("POP",a??o,s),d=!0)})},{immediate:!0}),n}let Do=new Map,gr=new Map;function Tl(e,t=U(!0)){Ct(s=>{var r;if(!t.value)return;let n=qe(e);if(!n)return;s(function(){var i;if(!n)return;let a=(i=gr.get(n))!=null?i:1;if(a===1?gr.delete(n):gr.set(n,a-1),a!==1)return;let l=Do.get(n);l&&(l["aria-hidden"]===null?n.removeAttribute("aria-hidden"):n.setAttribute("aria-hidden",l["aria-hidden"]),n.inert=l.inert,Do.delete(n))});let o=(r=gr.get(n))!=null?r:0;gr.set(n,o+1),o===0&&(Do.set(n,{"aria-hidden":n.getAttribute("aria-hidden"),inert:n.inert}),n.setAttribute("aria-hidden","true"),n.inert=!0)})}function pk({defaultContainers:e=[],portals:t,mainTreeNodeRef:s}={}){let r=U(null),n=ar(r);function o(){var i,a,l;let d=[];for(let u of e)u!==null&&(u instanceof HTMLElement?d.push(u):"value"in u&&u.value instanceof HTMLElement&&d.push(u.value));if(t!=null&&t.value)for(let u of t.value)d.push(u);for(let u of(i=n==null?void 0:n.querySelectorAll("html > *, body > *"))!=null?i:[])u!==document.body&&u!==document.head&&u instanceof HTMLElement&&u.id!=="headlessui-portal-root"&&(u.contains(qe(r))||u.contains((l=(a=qe(r))==null?void 0:a.getRootNode())==null?void 0:l.host)||d.some(f=>u.contains(f))||d.push(u));return d}return{resolveContainers:o,contains(i){return o().some(a=>a.contains(i))},mainTreeNodeRef:r,MainTreeNode(){return s!=null?null:He(di,{features:Fn.Hidden,ref:r})}}}let ad=Symbol("ForcePortalRootContext");function mk(){return Ne(ad,!1)}let Pl=Ee({name:"ForcePortalRoot",props:{as:{type:[Object,String],default:"template"},force:{type:Boolean,default:!1}},setup(e,{slots:t,attrs:s}){return ut(ad,e.force),()=>{let{force:r,...n}=e;return Nt({theirProps:n,ourProps:{},slot:{},slots:t,attrs:s,name:"ForcePortalRoot"})}}}),ld=Symbol("StackContext");var fi=(e=>(e[e.Add=0]="Add",e[e.Remove=1]="Remove",e))(fi||{});function gk(){return Ne(ld,()=>{})}function vk({type:e,enabled:t,element:s,onUpdate:r}){let n=gk();function o(...i){r==null||r(...i),n(...i)}Be(()=>{ot(t,(i,a)=>{i?o(0,e,s):a===!0&&o(1,e,s)},{immediate:!0,flush:"sync"})}),it(()=>{t.value&&o(1,e,s)}),ut(ld,o)}let yk=Symbol("DescriptionContext");function bk({slot:e=U({}),name:t="Description",props:s={}}={}){let r=U([]);function n(o){return r.value.push(o),()=>{let i=r.value.indexOf(o);i!==-1&&r.value.splice(i,1)}}return ut(yk,{register:n,slot:e,name:t,props:s}),V(()=>r.value.length>0?r.value.join(" "):void 0)}function _k(e){let t=ar(e);if(!t){if(e===null)return null;throw new Error(`[Headless UI]: Cannot find ownerDocument for contextElement: ${e}`)}let s=t.getElementById("headlessui-portal-root");if(s)return s;let r=t.createElement("div");return r.setAttribute("id","headlessui-portal-root"),t.body.appendChild(r)}const hi=new WeakMap;function wk(e){var t;return(t=hi.get(e))!=null?t:0}function Al(e,t){let s=t(wk(e));return s<=0?hi.delete(e):hi.set(e,s),s}let xk=Ee({name:"Portal",props:{as:{type:[Object,String],default:"div"}},setup(e,{slots:t,attrs:s}){let r=U(null),n=V(()=>ar(r)),o=mk(),i=Ne(cd,null),a=U(o===!0||i==null?_k(r.value):i.resolveTarget());a.value&&Al(a.value,h=>h+1);let l=U(!1);Be(()=>{l.value=!0}),Ct(()=>{o||i!=null&&(a.value=i.resolveTarget())});let d=Ne(pi,null),u=!1,f=Xn();return ot(r,()=>{if(u||!d)return;let h=qe(r);h&&(it(d.register(h),f),u=!0)}),it(()=>{var h,p;let x=(h=n.value)==null?void 0:h.getElementById("headlessui-portal-root");!x||a.value!==x||Al(a.value,w=>w-1)||a.value.children.length>0||(p=a.value.parentElement)==null||p.removeChild(a.value)}),()=>{if(!l.value||a.value===null)return null;let h={ref:r,"data-headlessui-portal":""};return He(Kn,{to:a.value},Nt({ourProps:h,theirProps:e,slot:{},attrs:s,slots:t,name:"Portal"}))}}}),pi=Symbol("PortalParentContext");function kk(){let e=Ne(pi,null),t=U([]);function s(o){return t.value.push(o),e&&e.register(o),()=>r(o)}function r(o){let i=t.value.indexOf(o);i!==-1&&t.value.splice(i,1),e&&e.unregister(o)}let n={register:s,unregister:r,portals:t};return[t,Ee({name:"PortalWrapper",setup(o,{slots:i}){return ut(pi,n),()=>{var a;return(a=i.default)==null?void 0:a.call(i)}}})]}let cd=Symbol("PortalGroupContext"),$k=Ee({name:"PortalGroup",props:{as:{type:[Object,String],default:"template"},target:{type:Object,default:null}},setup(e,{attrs:t,slots:s}){let r=rr({resolveTarget(){return e.target}});return ut(cd,r),()=>{let{target:n,...o}=e;return Nt({theirProps:o,ourProps:{},slot:{},attrs:t,slots:s,name:"PortalGroup"})}}});var Ek=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(Ek||{});let mi=Symbol("DialogContext");function Qi(e){let t=Ne(mi,null);if(t===null){let s=new Error(`<${e} /> is missing a parent <Dialog /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(s,Qi),s}return t}let mn="DC8F892D-2EBD-447C-A4C8-A03058436FF4",Ck=Ee({name:"Dialog",inheritAttrs:!1,props:{as:{type:[Object,String],default:"div"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},open:{type:[Boolean,String],default:mn},initialFocus:{type:Object,default:null},id:{type:String,default:null},role:{type:String,default:"dialog"}},emits:{close:e=>!0},setup(e,{emit:t,attrs:s,slots:r,expose:n}){var o,i;let a=(o=e.id)!=null?o:`headlessui-dialog-${ho()}`,l=U(!1);Be(()=>{l.value=!0});let d=!1,u=V(()=>e.role==="dialog"||e.role==="alertdialog"?e.role:(d||(d=!0,console.warn(`Invalid role [${u}] passed to <Dialog />. Only \`dialog\` and and \`alertdialog\` are supported. Using \`dialog\` instead.`)),"dialog")),f=U(0),h=Ji(),p=V(()=>e.open===mn&&h!==null?(h.value&mt.Open)===mt.Open:e.open),x=U(null),w=V(()=>ar(x));if(n({el:x,$el:x}),!(e.open!==mn||h!==null))throw new Error("You forgot to provide an `open` prop to the `Dialog`.");if(typeof p.value!="boolean")throw new Error(`You provided an \`open\` prop to the \`Dialog\`, but the value is not a boolean. Received: ${p.value===mn?void 0:e.open}`);let S=V(()=>l.value&&p.value?0:1),R=V(()=>S.value===0),y=V(()=>f.value>1),g=Ne(mi,null)!==null,[$,D]=kk(),{resolveContainers:se,mainTreeNodeRef:W,MainTreeNode:L}=pk({portals:$,defaultContainers:[V(()=>{var ue;return(ue=M.panelRef.value)!=null?ue:x.value})]}),A=V(()=>y.value?"parent":"leaf"),T=V(()=>h!==null?(h.value&mt.Closing)===mt.Closing:!1),I=V(()=>g||T.value?!1:R.value),N=V(()=>{var ue,de,Oe;return(Oe=Array.from((de=(ue=w.value)==null?void 0:ue.querySelectorAll("body > *"))!=null?de:[]).find(te=>te.id==="headlessui-portal-root"?!1:te.contains(qe(W))&&te instanceof HTMLElement))!=null?Oe:null});Tl(N,I);let G=V(()=>y.value?!0:R.value),re=V(()=>{var ue,de,Oe;return(Oe=Array.from((de=(ue=w.value)==null?void 0:ue.querySelectorAll("[data-headlessui-portal]"))!=null?de:[]).find(te=>te.contains(qe(W))&&te instanceof HTMLElement))!=null?Oe:null});Tl(re,G),vk({type:"Dialog",enabled:V(()=>S.value===0),element:x,onUpdate:(ue,de)=>{if(de==="Dialog")return Dt(ue,{[fi.Add]:()=>f.value+=1,[fi.Remove]:()=>f.value-=1})}});let we=bk({name:"DialogDescription",slot:V(()=>({open:p.value}))}),he=U(null),M={titleId:he,panelRef:U(null),dialogState:S,setTitleId(ue){he.value!==ue&&(he.value=ue)},close(){t("close",!1)}};ut(mi,M);let H=V(()=>!(!R.value||y.value));Y2(se,(ue,de)=>{ue.preventDefault(),M.close(),Wr(()=>de==null?void 0:de.focus())},H);let ne=V(()=>!(y.value||S.value!==0));rd((i=w.value)==null?void 0:i.defaultView,"keydown",ue=>{ne.value&&(ue.defaultPrevented||ue.key===sd.Escape&&(ue.preventDefault(),ue.stopPropagation(),M.close()))});let be=V(()=>!(T.value||S.value!==0||g));return hk(w,be,ue=>{var de;return{containers:[...(de=ue.containers)!=null?de:[],se]}}),Ct(ue=>{if(S.value!==0)return;let de=qe(x);if(!de)return;let Oe=new ResizeObserver(te=>{for(let z of te){let K=z.target.getBoundingClientRect();K.x===0&&K.y===0&&K.width===0&&K.height===0&&M.close()}});Oe.observe(de),ue(()=>Oe.disconnect())}),()=>{let{open:ue,initialFocus:de,...Oe}=e,te={...s,ref:x,id:a,role:u.value,"aria-modal":S.value===0?!0:void 0,"aria-labelledby":he.value,"aria-describedby":we.value},z={open:S.value===0};return He(Pl,{force:!0},()=>[He(xk,()=>He($k,{target:x.value},()=>He(Pl,{force:!1},()=>He(mr,{initialFocus:de,containers:se,features:R.value?Dt(A.value,{parent:mr.features.RestoreFocus,leaf:mr.features.All&~mr.features.FocusLock}):mr.features.None},()=>He(D,{},()=>Nt({ourProps:te,theirProps:{...Oe,...s},slot:z,attrs:s,slots:r,visible:S.value===0,features:Nn.RenderStrategy|Nn.Static,name:"Dialog"})))))),He(L)])}}}),Sk=Ee({name:"DialogPanel",props:{as:{type:[Object,String],default:"div"},id:{type:String,default:null}},setup(e,{attrs:t,slots:s,expose:r}){var n;let o=(n=e.id)!=null?n:`headlessui-dialog-panel-${ho()}`,i=Qi("DialogPanel");r({el:i.panelRef,$el:i.panelRef});function a(l){l.stopPropagation()}return()=>{let{...l}=e,d={id:o,ref:i.panelRef,onClick:a};return Nt({ourProps:d,theirProps:l,slot:{open:i.dialogState.value===0},attrs:t,slots:s,name:"DialogPanel"})}}}),Tk=Ee({name:"DialogTitle",props:{as:{type:[Object,String],default:"h2"},id:{type:String,default:null}},setup(e,{attrs:t,slots:s}){var r;let n=(r=e.id)!=null?r:`headlessui-dialog-title-${ho()}`,o=Qi("DialogTitle");return Be(()=>{o.setTitleId(n),it(()=>o.setTitleId(null))}),()=>{let{...i}=e;return Nt({ourProps:{id:n},theirProps:i,slot:{open:o.dialogState.value===0},attrs:t,slots:s,name:"DialogTitle"})}}});function Pk(e){let t={called:!1};return(...s)=>{if(!t.called)return t.called=!0,e(...s)}}function No(e,...t){e&&t.length>0&&e.classList.add(...t)}function gn(e,...t){e&&t.length>0&&e.classList.remove(...t)}var gi=(e=>(e.Finished="finished",e.Cancelled="cancelled",e))(gi||{});function Ak(e,t){let s=en();if(!e)return s.dispose;let{transitionDuration:r,transitionDelay:n}=getComputedStyle(e),[o,i]=[r,n].map(a=>{let[l=0]=a.split(",").filter(Boolean).map(d=>d.includes("ms")?parseFloat(d):parseFloat(d)*1e3).sort((d,u)=>u-d);return l});return o!==0?s.setTimeout(()=>t("finished"),o+i):t("finished"),s.add(()=>t("cancelled")),s.dispose}function Rl(e,t,s,r,n,o){let i=en(),a=o!==void 0?Pk(o):()=>{};return gn(e,...n),No(e,...t,...s),i.nextFrame(()=>{gn(e,...s),No(e,...r),i.add(Ak(e,l=>(gn(e,...r,...t),No(e,...n),a(l))))}),i.add(()=>gn(e,...t,...s,...r,...n)),i.add(()=>a("cancelled")),i.dispose}function xs(e=""){return e.split(/\s+/).filter(t=>t.length>1)}let Yi=Symbol("TransitionContext");var Rk=(e=>(e.Visible="visible",e.Hidden="hidden",e))(Rk||{});function jk(){return Ne(Yi,null)!==null}function Ok(){let e=Ne(Yi,null);if(e===null)throw new Error("A <TransitionChild /> is used but it is missing a parent <TransitionRoot />.");return e}function Ik(){let e=Ne(Xi,null);if(e===null)throw new Error("A <TransitionChild /> is used but it is missing a parent <TransitionRoot />.");return e}let Xi=Symbol("NestingContext");function po(e){return"children"in e?po(e.children):e.value.filter(({state:t})=>t==="visible").length>0}function ud(e){let t=U([]),s=U(!1);Be(()=>s.value=!0),it(()=>s.value=!1);function r(o,i=us.Hidden){let a=t.value.findIndex(({id:l})=>l===o);a!==-1&&(Dt(i,{[us.Unmount](){t.value.splice(a,1)},[us.Hidden](){t.value[a].state="hidden"}}),!po(t)&&s.value&&(e==null||e()))}function n(o){let i=t.value.find(({id:a})=>a===o);return i?i.state!=="visible"&&(i.state="visible"):t.value.push({id:o,state:"visible"}),()=>r(o,us.Unmount)}return{children:t,register:n,unregister:r}}let dd=Nn.RenderStrategy,vi=Ee({props:{as:{type:[Object,String],default:"div"},show:{type:[Boolean],default:null},unmount:{type:[Boolean],default:!0},appear:{type:[Boolean],default:!1},enter:{type:[String],default:""},enterFrom:{type:[String],default:""},enterTo:{type:[String],default:""},entered:{type:[String],default:""},leave:{type:[String],default:""},leaveFrom:{type:[String],default:""},leaveTo:{type:[String],default:""}},emits:{beforeEnter:()=>!0,afterEnter:()=>!0,beforeLeave:()=>!0,afterLeave:()=>!0},setup(e,{emit:t,attrs:s,slots:r,expose:n}){let o=U(0);function i(){o.value|=mt.Opening,t("beforeEnter")}function a(){o.value&=~mt.Opening,t("afterEnter")}function l(){o.value|=mt.Closing,t("beforeLeave")}function d(){o.value&=~mt.Closing,t("afterLeave")}if(!jk()&&Z2())return()=>He(fd,{...e,onBeforeEnter:i,onAfterEnter:a,onBeforeLeave:l,onAfterLeave:d},r);let u=U(null),f=V(()=>e.unmount?us.Unmount:us.Hidden);n({el:u,$el:u});let{show:h,appear:p}=Ok(),{register:x,unregister:w}=Ik(),S=U(h.value?"visible":"hidden"),R={value:!0},y=ho(),g={value:!1},$=ud(()=>{!g.value&&S.value!=="hidden"&&(S.value="hidden",w(y),d())});Be(()=>{let G=x(y);it(G)}),Ct(()=>{if(f.value===us.Hidden&&y){if(h.value&&S.value!=="visible"){S.value="visible";return}Dt(S.value,{hidden:()=>w(y),visible:()=>x(y)})}});let D=xs(e.enter),se=xs(e.enterFrom),W=xs(e.enterTo),L=xs(e.entered),A=xs(e.leave),T=xs(e.leaveFrom),I=xs(e.leaveTo);Be(()=>{Ct(()=>{if(S.value==="visible"){let G=qe(u);if(G instanceof Comment&&G.data==="")throw new Error("Did you forget to passthrough the `ref` to the actual DOM node?")}})});function N(G){let re=R.value&&!p.value,we=qe(u);!we||!(we instanceof HTMLElement)||re||(g.value=!0,h.value&&i(),h.value||l(),G(h.value?Rl(we,D,se,W,L,he=>{g.value=!1,he===gi.Finished&&a()}):Rl(we,A,T,I,L,he=>{g.value=!1,he===gi.Finished&&(po($)||(S.value="hidden",w(y),d()))})))}return Be(()=>{ot([h],(G,re,we)=>{N(we),R.value=!1},{immediate:!0})}),ut(Xi,$),ek(V(()=>Dt(S.value,{visible:mt.Open,hidden:mt.Closed})|o.value)),()=>{let{appear:G,show:re,enter:we,enterFrom:he,enterTo:M,entered:H,leave:ne,leaveFrom:be,leaveTo:ue,...de}=e,Oe={ref:u},te={...de,...p.value&&h.value&&tn.isServer?{class:ye([s.class,de.class,...D,...se])}:{}};return Nt({theirProps:te,ourProps:Oe,slot:{},slots:r,attrs:s,features:dd,visible:S.value==="visible",name:"TransitionChild"})}}}),Mk=vi,fd=Ee({inheritAttrs:!1,props:{as:{type:[Object,String],default:"div"},show:{type:[Boolean],default:null},unmount:{type:[Boolean],default:!0},appear:{type:[Boolean],default:!1},enter:{type:[String],default:""},enterFrom:{type:[String],default:""},enterTo:{type:[String],default:""},entered:{type:[String],default:""},leave:{type:[String],default:""},leaveFrom:{type:[String],default:""},leaveTo:{type:[String],default:""}},emits:{beforeEnter:()=>!0,afterEnter:()=>!0,beforeLeave:()=>!0,afterLeave:()=>!0},setup(e,{emit:t,attrs:s,slots:r}){let n=Ji(),o=V(()=>e.show===null&&n!==null?(n.value&mt.Open)===mt.Open:e.show);Ct(()=>{if(![!0,!1].includes(o.value))throw new Error('A <Transition /> is used but it is missing a `:show="true | false"` prop.')});let i=U(o.value?"visible":"hidden"),a=ud(()=>{i.value="hidden"}),l=U(!0),d={show:o,appear:V(()=>e.appear||!l.value)};return Be(()=>{Ct(()=>{l.value=!1,o.value?i.value="visible":po(a)||(i.value="hidden")})}),ut(Xi,a),ut(Yi,d),()=>{let u=ed(e,["show","appear","unmount","onBeforeEnter","onBeforeLeave","onAfterEnter","onAfterLeave"]),f={unmount:e.unmount};return Nt({ourProps:{...f,as:"template"},theirProps:{},slot:{},slots:{...r,default:()=>[He(Mk,{onBeforeEnter:()=>t("beforeEnter"),onAfterEnter:()=>t("afterEnter"),onBeforeLeave:()=>t("beforeLeave"),onAfterLeave:()=>t("afterLeave"),...s,...f,...u},r.default)]},attrs:{},features:dd,visible:i.value==="visible",name:"Transition"})}}});const Lk={class:"fixed inset-0 overflow-y-auto"},Dk={class:"flex min-h-full items-center justify-center p-4 text-center"},Nk={class:"mt-4"},Fk={key:0,class:"mt-6 flex justify-end space-x-3"},jl=Ee({__name:"AppModal",props:{isOpen:{type:Boolean},title:{},size:{}},emits:["close"],setup(e,{emit:t}){const s=t,r=()=>{s("close")};return(n,o)=>(b(),De(B(fd),{appear:"",show:n.isOpen,as:"template"},{default:ze(()=>[oe(B(Ck),{as:"div",onClose:r,class:"relative z-50"},{default:ze(()=>[oe(B(vi),{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0","enter-to":"opacity-100",leave:"duration-200 ease-in","leave-from":"opacity-100","leave-to":"opacity-0"},{default:ze(()=>o[0]||(o[0]=[c("div",{class:"fixed inset-0 bg-black bg-opacity-25"},null,-1)])),_:1,__:[0]}),c("div",Lk,[c("div",Dk,[oe(B(vi),{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0 scale-95","enter-to":"opacity-100 scale-100",leave:"duration-200 ease-in","leave-from":"opacity-100 scale-100","leave-to":"opacity-0 scale-95"},{default:ze(()=>[oe(B(Sk),{class:ye(["w-full max-w-md transform overflow-hidden rounded-2xl bg-white p-6 text-left align-middle shadow-xl transition-all",n.size==="lg"?"sm:max-w-lg":n.size==="xl"?"sm:max-w-xl":""])},{default:ze(()=>[oe(B(Tk),{as:"h3",class:"text-lg font-medium leading-6 text-gray-900 flex items-center justify-between"},{default:ze(()=>[xe(E(n.title)+" ",1),c("button",{type:"button",class:"text-gray-400 hover:text-gray-500",onClick:r},[o[1]||(o[1]=c("span",{class:"sr-only"},"Cerrar",-1)),oe(B(l2),{class:"h-6 w-6"})])]),_:1}),c("div",Nk,[fa(n.$slots,"default")]),n.$slots.footer?(b(),k("div",Fk,[fa(n.$slots,"footer")])):F("",!0)]),_:3},8,["class"])]),_:3})])])]),_:3})]),_:3},8,["show"]))}}),Uk={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},Bk={class:"flex justify-between items-center mb-8"},zk={class:"flex space-x-4"},Vk=["onClick"],Hk={class:"space-y-8"},qk={key:0,class:"space-y-6"},Kk={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6"},Wk={class:"flex items-center justify-between"},Gk={class:"mt-4 text-2xl font-semibold text-gray-900"},Jk={class:"text-sm text-gray-500"},Qk={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},Yk={class:"bg-white rounded-lg shadow p-6"},Xk={class:"space-y-4"},Zk={class:"flex items-center"},e4={class:"ml-4"},t4={class:"text-sm font-medium text-gray-900"},s4={class:"text-sm text-gray-500"},r4={class:"text-right"},n4={class:"text-sm font-medium text-gray-900"},o4={key:1,class:"space-y-6"},i4={class:"bg-white shadow rounded-lg overflow-hidden"},a4={class:"min-w-full divide-y divide-gray-200"},l4={class:"bg-white divide-y divide-gray-200"},c4={class:"px-6 py-4 whitespace-nowrap"},u4={class:"flex items-center"},d4={class:"ml-4"},f4={class:"text-sm font-medium text-gray-900"},h4={class:"text-sm text-gray-500"},p4={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},m4={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},g4={class:"px-6 py-4 whitespace-nowrap"},v4={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"},y4=["onClick"],b4=["onClick"],_4={key:2,class:"space-y-6"},w4={class:"bg-white shadow rounded-lg overflow-hidden"},x4={class:"min-w-full divide-y divide-gray-200"},k4={class:"bg-white divide-y divide-gray-200"},$4={class:"px-6 py-4 whitespace-nowrap"},E4={class:"flex items-center"},C4={class:"ml-4"},S4={class:"text-sm font-medium text-gray-900"},T4={class:"text-sm text-gray-500"},P4={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},A4={class:"px-6 py-4 whitespace-nowrap"},R4={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},j4={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"},O4=["onClick"],I4=["onClick"],M4={key:3,class:"space-y-6"},L4={class:"bg-white shadow rounded-lg divide-y divide-gray-200"},D4={class:"p-6"},N4={class:"grid grid-cols-1 gap-6 sm:grid-cols-2"},F4={class:"sm:col-span-2"},U4={class:"p-6"},B4={class:"mt-6 space-y-4"},z4={class:"text-sm font-medium text-gray-700"},V4={class:"flex items-center space-x-4"},H4=["onUpdate:modelValue"],q4=["onUpdate:modelValue"],K4=Ee({__name:"AnalyticsView",setup(e){const t=U("metrics"),s=U(!1),r=U(!1),n=U(null),o=U(null),i=[{id:"metrics",name:"Métricas"},{id:"menu",name:"Menú"},{id:"employees",name:"Empleados"},{id:"settings",name:"Configuración"}],a=[{name:"Ventas Hoy",value:"1,234€",trend:12.5,icon:i2},{name:"Pedidos",value:"48",trend:8.2,icon:o2},{name:"Clientes",value:"156",trend:-2.4,icon:a2},{name:"Tiempo Medio",value:"24m",trend:5.1,icon:n2}],l=[{id:1,name:"Hamburguesa Especial",category:"Hamburguesas",sales:124},{id:2,name:"Pizza Margherita",category:"Pizzas",sales:98},{id:3,name:"Ensalada César",category:"Ensaladas",sales:76}],d=[{id:1,name:"Hamburguesa Especial",description:"Con queso cheddar y bacon",category:"Hamburguesas",price:12.99,available:!0}],u=[{id:1,name:"Ana García",email:"ana@example.com",position:"Camarera",active:!0,startDate:"2024-01-15"}],f=[{id:"monday",name:"Lunes"},{id:"tuesday",name:"Martes"},{id:"wednesday",name:"Miércoles"},{id:"thursday",name:"Jueves"},{id:"friday",name:"Viernes"},{id:"saturday",name:"Sábado"},{id:"sunday",name:"Domingo"}],h=U({restaurantName:"",phone:"",address:"",hours:f.reduce((L,A)=>({...L,[A.id]:{open:"09:00",close:"22:00"}}),{})}),p=L=>L.toFixed(2),x=L=>new Date(L).toLocaleDateString(),w=()=>{n.value=null,s.value=!0},S=()=>{o.value=null,r.value=!0},R=()=>{s.value=!1,n.value=null},y=()=>{r.value=!1,o.value=null},g=L=>{n.value=L,s.value=!0},$=async L=>{},D=L=>{o.value=L,r.value=!0},se=async L=>{},W=async()=>{};return Be(async()=>{}),(L,A)=>(b(),De(Wu,null,{default:ze(()=>[c("div",Uk,[c("div",Bk,[A[3]||(A[3]=c("h1",{class:"text-2xl font-bold text-gray-900"},"Analytics & Gestión",-1)),c("div",zk,[(b(),k(fe,null,Ce(i,T=>c("button",{key:T.id,onClick:I=>t.value=T.id,class:ye(["px-4 py-2 rounded-md text-sm font-medium",t.value===T.id?"bg-orange-500 text-white":"bg-white text-gray-700 hover:bg-gray-50"])},E(T.name),11,Vk)),64))])]),c("div",Hk,[t.value==="metrics"?(b(),k("section",qk,[c("div",Kk,[(b(),k(fe,null,Ce(a,T=>c("div",{key:T.name,class:"bg-white rounded-lg shadow p-6"},[c("div",Wk,[(b(),De(Qs(T.icon),{class:"h-8 w-8 text-orange-500"})),c("span",{class:ye([T.trend>0?"text-green-500":"text-red-500","text-sm font-medium"])},E(T.trend>0?"+":"")+E(T.trend)+"% ",3)]),c("p",Gk,E(T.value),1),c("p",Jk,E(T.name),1)])),64))]),c("div",Qk,[A[7]||(A[7]=c("div",{class:"bg-white rounded-lg shadow p-6"},[c("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Ventas por Hora"),c("div",{class:"h-64"})],-1)),c("div",Yk,[A[6]||(A[6]=c("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Platos Más Vendidos",-1)),c("div",Xk,[(b(),k(fe,null,Ce(l,T=>c("div",{key:T.id,class:"flex items-center justify-between"},[c("div",Zk,[A[4]||(A[4]=c("div",{class:"w-12 h-12 rounded-lg bg-gray-100"},null,-1)),c("div",e4,[c("p",t4,E(T.name),1),c("p",s4,E(T.category),1)])]),c("div",r4,[c("p",n4,E(T.sales),1),A[5]||(A[5]=c("p",{class:"text-sm text-gray-500"},"ventas",-1))])])),64))])])])])):F("",!0),t.value==="menu"?(b(),k("section",o4,[c("div",{class:"flex justify-between items-center"},[A[8]||(A[8]=c("h2",{class:"text-lg font-medium text-gray-900"},"Gestión del Menú",-1)),c("button",{onClick:w,class:"px-4 py-2 bg-orange-500 text-white rounded-md hover:bg-orange-600"}," Nuevo Plato ")]),c("div",i4,[c("table",a4,[A[10]||(A[10]=c("thead",{class:"bg-gray-50"},[c("tr",null,[c("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Plato "),c("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Categoría "),c("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Precio "),c("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Estado "),c("th",{class:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"}," Acciones ")])],-1)),c("tbody",l4,[(b(),k(fe,null,Ce(d,T=>c("tr",{key:T.id},[c("td",c4,[c("div",u4,[A[9]||(A[9]=c("div",{class:"h-10 w-10 rounded-lg bg-gray-100"},null,-1)),c("div",d4,[c("p",f4,E(T.name),1),c("p",h4,E(T.description),1)])])]),c("td",p4,E(T.category),1),c("td",m4,E(p(T.price))+"€ ",1),c("td",g4,[c("span",{class:ye(["px-2 py-1 text-xs rounded-full",T.available?"bg-green-100 text-green-800":"bg-red-100 text-red-800"])},E(T.available?"Disponible":"No disponible"),3)]),c("td",v4,[c("button",{onClick:I=>g(T),class:"text-orange-600 hover:text-orange-900 mr-4"}," Editar ",8,y4),c("button",{onClick:I=>$(T),class:"text-red-600 hover:text-red-900"}," Eliminar ",8,b4)])])),64))])])])])):F("",!0),t.value==="employees"?(b(),k("section",_4,[c("div",{class:"flex justify-between items-center"},[A[11]||(A[11]=c("h2",{class:"text-lg font-medium text-gray-900"},"Gestión de Empleados",-1)),c("button",{onClick:S,class:"px-4 py-2 bg-orange-500 text-white rounded-md hover:bg-orange-600"}," Nuevo Empleado ")]),c("div",w4,[c("table",x4,[A[13]||(A[13]=c("thead",{class:"bg-gray-50"},[c("tr",null,[c("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Empleado "),c("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Posición "),c("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Estado "),c("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Fecha Inicio "),c("th",{class:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"}," Acciones ")])],-1)),c("tbody",k4,[(b(),k(fe,null,Ce(u,T=>c("tr",{key:T.id},[c("td",$4,[c("div",E4,[A[12]||(A[12]=c("div",{class:"h-10 w-10 rounded-full bg-gray-100"},null,-1)),c("div",C4,[c("p",S4,E(T.name),1),c("p",T4,E(T.email),1)])])]),c("td",P4,E(T.position),1),c("td",A4,[c("span",{class:ye(["px-2 py-1 text-xs rounded-full",T.active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"])},E(T.active?"Activo":"Inactivo"),3)]),c("td",R4,E(x(T.startDate)),1),c("td",j4,[c("button",{onClick:I=>D(T),class:"text-orange-600 hover:text-orange-900 mr-4"}," Editar ",8,O4),c("button",{onClick:I=>se(T),class:"text-gray-600 hover:text-gray-900"},E(T.active?"Desactivar":"Activar"),9,I4)])])),64))])])])])):F("",!0),t.value==="settings"?(b(),k("section",M4,[c("div",L4,[c("div",D4,[A[18]||(A[18]=c("h3",{class:"text-lg font-medium text-gray-900"},"Información del Restaurante",-1)),c("form",{onSubmit:Is(W,["prevent"]),class:"mt-6 space-y-6"},[c("div",N4,[c("div",null,[A[14]||(A[14]=c("label",{class:"block text-sm font-medium text-gray-700"}," Nombre del Restaurante ",-1)),Ke(c("input",{"onUpdate:modelValue":A[0]||(A[0]=T=>h.value.restaurantName=T),type:"text",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-orange-500 focus:ring-orange-500"},null,512),[[nt,h.value.restaurantName]])]),c("div",null,[A[15]||(A[15]=c("label",{class:"block text-sm font-medium text-gray-700"}," Teléfono ",-1)),Ke(c("input",{"onUpdate:modelValue":A[1]||(A[1]=T=>h.value.phone=T),type:"tel",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-orange-500 focus:ring-orange-500"},null,512),[[nt,h.value.phone]])]),c("div",F4,[A[16]||(A[16]=c("label",{class:"block text-sm font-medium text-gray-700"}," Dirección ",-1)),Ke(c("input",{"onUpdate:modelValue":A[2]||(A[2]=T=>h.value.address=T),type:"text",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-orange-500 focus:ring-orange-500"},null,512),[[nt,h.value.address]])])]),A[17]||(A[17]=c("div",{class:"flex justify-end"},[c("button",{type:"submit",class:"px-4 py-2 bg-orange-500 text-white rounded-md hover:bg-orange-600"}," Guardar Cambios ")],-1))],32)]),c("div",U4,[A[20]||(A[20]=c("h3",{class:"text-lg font-medium text-gray-900"},"Horario de Apertura",-1)),c("div",B4,[(b(),k(fe,null,Ce(f,T=>c("div",{key:T.id,class:"flex items-center justify-between"},[c("span",z4,E(T.name),1),c("div",V4,[Ke(c("input",{"onUpdate:modelValue":I=>h.value.hours[T.id].open=I,type:"time",class:"rounded-md border-gray-300 shadow-sm focus:border-orange-500 focus:ring-orange-500"},null,8,H4),[[nt,h.value.hours[T.id].open]]),A[19]||(A[19]=c("span",{class:"text-gray-500"},"-",-1)),Ke(c("input",{"onUpdate:modelValue":I=>h.value.hours[T.id].close=I,type:"time",class:"rounded-md border-gray-300 shadow-sm focus:border-orange-500 focus:ring-orange-500"},null,8,q4),[[nt,h.value.hours[T.id].close]])])])),64))])])])])):F("",!0)])]),oe(jl,{"is-open":s.value,title:n.value?"Editar Plato":"Nuevo Plato",onClose:R},null,8,["is-open","title"]),oe(jl,{"is-open":r.value,title:o.value?"Editar Empleado":"Nuevo Empleado",onClose:y},null,8,["is-open","title"])]),_:1}))}}),W4={class:"min-h-screen bg-gray-50 flex flex-col justify-center py-12 sm:px-6 lg:px-8"},G4={class:"sm:mx-auto sm:w-full sm:max-w-md"},J4={class:"text-center"},Q4={class:"mt-6 text-2xl font-semibold text-gray-900"},Y4={class:"mt-2 text-sm text-gray-600"},X4={class:"mt-8 sm:mx-auto sm:w-full sm:max-w-md"},Z4={class:"bg-white py-8 px-4 shadow sm:rounded-lg sm:px-10"},e5={key:0},t5={class:"mt-1"},s5={key:0,class:"mt-1 text-sm text-red-600"},r5={class:"mt-1"},n5={key:0,class:"mt-1 text-sm text-red-600"},o5={class:"mt-1 relative"},i5=["type"],a5={key:0,class:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},l5={key:1,class:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},c5={key:0,class:"mt-1 text-sm text-red-600"},u5={key:1},d5={class:"mt-1"},f5={key:0,class:"mt-1 text-sm text-red-600"},h5={class:"flex items-center justify-between"},p5={key:0,class:"flex items-center"},m5={key:1,class:"flex items-center"},g5={key:2,class:"text-sm"},v5={key:2,class:"p-4 bg-red-50 rounded-lg"},y5={class:"flex"},b5={class:"ml-3"},_5={class:"text-sm text-red-800"},w5=["disabled"],x5={key:0,class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",fill:"none",viewBox:"0 0 24 24"},k5={key:0,class:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4"},$5={class:"bg-white rounded-lg max-w-md w-full p-6"},E5={class:"flex justify-between items-center mb-4"},C5={class:"mb-4"},S5={class:"flex space-x-3"},T5=["disabled"],P5=Ee({__name:"AuthView",setup(e){const t=no(),s=nr(),r=Qt(),{showToast:n}=Xr(),o=U(!0),i=U(!1),a=U(!1),l=U(!1),d=U(!1),u=U(""),f=U(""),h=U({email:"",password:"",fullName:"",confirmPassword:"",rememberMe:!1,acceptTerms:!1}),p=U({}),x=V(()=>o.value?h.value.email&&h.value.password:h.value.email&&h.value.password&&h.value.fullName&&h.value.confirmPassword&&h.value.acceptTerms),w=()=>{o.value=!o.value,p.value={},u.value=""},S=()=>(p.value={},/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(h.value.email)||(p.value.email="Email no válido"),h.value.password.length<6&&(p.value.password="La contraseña debe tener al menos 6 caracteres"),o.value||(h.value.fullName.trim().length<2&&(p.value.fullName="El nombre debe tener al menos 2 caracteres"),h.value.password!==h.value.confirmPassword&&(p.value.confirmPassword="Las contraseñas no coinciden")),Object.keys(p.value).length===0),R=async()=>{if(S())try{l.value=!0,u.value="",o.value?(await r.signIn(h.value.email,h.value.password),n("Sesión iniciada correctamente","success")):(await r.signUp(h.value.email,h.value.password,{full_name:h.value.fullName}),n("Cuenta creada correctamente","success"));const g=s.query.redirect||"/dashboard";t.push(g)}catch(g){console.error("Auth error:",g),u.value=g instanceof Error?g.message:"Error de autenticación"}finally{l.value=!1}},y=async()=>{if(f.value)try{d.value=!0,await r.resetPassword(f.value),n("Email de recuperación enviado","success"),a.value=!1,f.value=""}catch(g){console.error("Reset password error:",g),n("Error al enviar el email de recuperación","error")}finally{d.value=!1}};return(g,$)=>(b(),k("div",W4,[c("div",G4,[c("div",J4,[$[11]||($[11]=c("h1",{class:"text-3xl font-bold text-gray-900"},"ComandaPlus",-1)),c("h2",Q4,E(o.value?"Iniciar sesión":"Crear cuenta"),1),c("p",Y4,[xe(E(o.value?"¿No tienes cuenta?":"¿Ya tienes cuenta?")+" ",1),c("button",{onClick:w,class:"font-medium text-orange-600 hover:text-orange-500"},E(o.value?"Regístrate":"Inicia sesión"),1)])])]),c("div",X4,[c("div",Z4,[c("form",{onSubmit:Is(R,["prevent"]),class:"space-y-6"},[o.value?F("",!0):(b(),k("div",e5,[$[12]||($[12]=c("label",{for:"fullName",class:"block text-sm font-medium text-gray-700"}," Nombre completo ",-1)),c("div",t5,[Ke(c("input",{id:"fullName","onUpdate:modelValue":$[0]||($[0]=D=>h.value.fullName=D),type:"text",required:"",class:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md placeholder-gray-400 focus:outline-none focus:ring-orange-500 focus:border-orange-500 sm:text-sm",placeholder:"Tu nombre completo"},null,512),[[nt,h.value.fullName]])]),p.value.fullName?(b(),k("p",s5,E(p.value.fullName),1)):F("",!0)])),c("div",null,[$[13]||($[13]=c("label",{for:"email",class:"block text-sm font-medium text-gray-700"}," Correo electrónico ",-1)),c("div",r5,[Ke(c("input",{id:"email","onUpdate:modelValue":$[1]||($[1]=D=>h.value.email=D),type:"email",required:"",class:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md placeholder-gray-400 focus:outline-none focus:ring-orange-500 focus:border-orange-500 sm:text-sm",placeholder:"tu@email.com"},null,512),[[nt,h.value.email]])]),p.value.email?(b(),k("p",n5,E(p.value.email),1)):F("",!0)]),c("div",null,[$[16]||($[16]=c("label",{for:"password",class:"block text-sm font-medium text-gray-700"}," Contraseña ",-1)),c("div",o5,[Ke(c("input",{id:"password","onUpdate:modelValue":$[2]||($[2]=D=>h.value.password=D),type:i.value?"text":"password",required:"",class:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md placeholder-gray-400 focus:outline-none focus:ring-orange-500 focus:border-orange-500 sm:text-sm pr-10",placeholder:"••••••••"},null,8,i5),[[Uh,h.value.password]]),c("button",{type:"button",onClick:$[3]||($[3]=D=>i.value=!i.value),class:"absolute inset-y-0 right-0 pr-3 flex items-center"},[i.value?(b(),k("svg",a5,$[14]||($[14]=[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"},null,-1),c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"},null,-1)]))):(b(),k("svg",l5,$[15]||($[15]=[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.878 9.878L8.464 8.464M9.878 9.878a3 3 0 00.007 4.243m4.242 4.242L16.535 16.535M14.12 14.12l-.007-.007M9.878 9.878L7.757 7.757M16.535 16.535L18.95 18.95M14.12 14.12l2.415 2.415"},null,-1)])))])]),p.value.password?(b(),k("p",c5,E(p.value.password),1)):F("",!0)]),o.value?F("",!0):(b(),k("div",u5,[$[17]||($[17]=c("label",{for:"confirmPassword",class:"block text-sm font-medium text-gray-700"}," Confirmar contraseña ",-1)),c("div",d5,[Ke(c("input",{id:"confirmPassword","onUpdate:modelValue":$[4]||($[4]=D=>h.value.confirmPassword=D),type:"password",required:"",class:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md placeholder-gray-400 focus:outline-none focus:ring-orange-500 focus:border-orange-500 sm:text-sm",placeholder:"••••••••"},null,512),[[nt,h.value.confirmPassword]])]),p.value.confirmPassword?(b(),k("p",f5,E(p.value.confirmPassword),1)):F("",!0)])),c("div",h5,[o.value?(b(),k("div",p5,[Ke(c("input",{id:"remember-me","onUpdate:modelValue":$[5]||($[5]=D=>h.value.rememberMe=D),type:"checkbox",class:"h-4 w-4 text-orange-600 focus:ring-orange-500 border-gray-300 rounded"},null,512),[[Qo,h.value.rememberMe]]),$[18]||($[18]=c("label",{for:"remember-me",class:"ml-2 block text-sm text-gray-900"}," Recordar sesión ",-1))])):(b(),k("div",m5,[Ke(c("input",{id:"accept-terms","onUpdate:modelValue":$[6]||($[6]=D=>h.value.acceptTerms=D),type:"checkbox",required:"",class:"h-4 w-4 text-orange-600 focus:ring-orange-500 border-gray-300 rounded"},null,512),[[Qo,h.value.acceptTerms]]),$[19]||($[19]=c("label",{for:"accept-terms",class:"ml-2 block text-sm text-gray-900"},[xe(" Acepto los "),c("a",{href:"#",class:"text-orange-600 hover:text-orange-500"},"términos y condiciones")],-1))])),o.value?(b(),k("div",g5,[c("button",{type:"button",onClick:$[7]||($[7]=D=>a.value=!0),class:"font-medium text-orange-600 hover:text-orange-500"}," ¿Olvidaste tu contraseña? ")])):F("",!0)]),u.value?(b(),k("div",v5,[c("div",y5,[$[20]||($[20]=c("div",{class:"flex-shrink-0"},[c("svg",{class:"h-5 w-5 text-red-400",fill:"currentColor",viewBox:"0 0 20 20"},[c("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})])],-1)),c("div",b5,[c("p",_5,E(u.value),1)])])])):F("",!0),c("div",null,[c("button",{type:"submit",disabled:l.value||!x.value,class:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-orange-600 hover:bg-orange-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-orange-500 disabled:opacity-50 disabled:cursor-not-allowed"},[l.value?(b(),k("svg",x5,$[21]||($[21]=[c("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),c("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):F("",!0),xe(" "+E(l.value?o.value?"Iniciando sesión...":"Creando cuenta...":o.value?"Iniciar sesión":"Crear cuenta"),1)],8,w5)])],32),a.value?(b(),k("div",k5,[c("div",$5,[c("div",E5,[$[23]||($[23]=c("h3",{class:"text-lg font-medium text-gray-900"},"Recuperar contraseña",-1)),c("button",{onClick:$[8]||($[8]=D=>a.value=!1),class:"text-gray-400 hover:text-gray-600"},$[22]||($[22]=[c("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),c("form",{onSubmit:Is(y,["prevent"])},[c("div",C5,[$[24]||($[24]=c("label",{for:"resetEmail",class:"block text-sm font-medium text-gray-700 mb-2"}," Correo electrónico ",-1)),Ke(c("input",{id:"resetEmail","onUpdate:modelValue":$[9]||($[9]=D=>f.value=D),type:"email",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-orange-500 focus:border-orange-500",placeholder:"tu@email.com"},null,512),[[nt,f.value]])]),c("div",S5,[c("button",{type:"button",onClick:$[10]||($[10]=D=>a.value=!1),class:"flex-1 py-2 px-4 border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50"}," Cancelar "),c("button",{type:"submit",disabled:!f.value||d.value,class:"flex-1 py-2 px-4 bg-orange-600 text-white rounded-md text-sm font-medium hover:bg-orange-700 disabled:opacity-50"},E(d.value?"Enviando...":"Enviar"),9,T5)])],32)])])):F("",!0)])])]))}}),A5={class:"min-h-screen bg-gray-50 flex flex-col justify-center py-12 sm:px-6 lg:px-8"},R5={class:"mt-8 sm:mx-auto sm:w-full sm:max-w-md"},j5={class:"bg-white py-8 px-4 shadow sm:rounded-lg sm:px-10"},O5={class:"mb-6 p-4 bg-blue-50 rounded-lg"},I5={class:"flex items-center"},M5={class:"ml-3"},L5={class:"text-sm font-medium text-blue-800"},D5={class:"text-sm text-blue-600"},N5={class:"mt-1"},F5={key:0,class:"mt-1 text-sm text-red-600"},U5={class:"mt-1"},B5={key:0,class:"mt-1 text-sm text-red-600"},z5={class:"mt-1"},V5={key:0,class:"mt-1 text-sm text-red-600"},H5={key:0,class:"p-4 bg-gray-50 rounded-lg"},q5={class:"flex"},K5={class:"ml-3"},W5={class:"text-sm text-gray-600"},G5={key:1,class:"p-4 bg-red-50 rounded-lg"},J5={class:"flex"},Q5={class:"ml-3"},Y5={class:"text-sm text-red-800"},X5={class:"flex flex-col space-y-4"},Z5=["disabled"],e3={key:0,class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",fill:"none",viewBox:"0 0 24 24"},t3=Ee({__name:"CreateProfileView",setup(e){var p,x,w,S;const t=no(),s=nr(),r=Qt(),n=U({nombre_completo:"",telefono:"",rol:""}),o=U({}),i=U(!1),a=U(""),l=V(()=>n.value.nombre_completo.trim().length>0&&n.value.rol!==""),d=R=>({cliente:"Podrás hacer pedidos escaneando códigos QR en restaurantes.",empleado:"Podrás gestionar pedidos y trabajar en restaurantes registrados.",dueño:"Podrás crear y gestionar tus propios restaurantes, menús y empleados."})[R]||"",u=()=>(o.value={},n.value.nombre_completo.trim()?n.value.nombre_completo.trim().length<2&&(o.value.nombre_completo="El nombre debe tener al menos 2 caracteres"):o.value.nombre_completo="El nombre es obligatorio",n.value.telefono&&!/^[+]?[\d\s\-()]+$/.test(n.value.telefono)&&(o.value.telefono="Formato de teléfono inválido"),n.value.rol||(o.value.rol="Debes seleccionar un rol"),Object.keys(o.value).length===0),f=async()=>{if(u())try{i.value=!0,a.value="",await r.createProfile({nombre_completo:n.value.nombre_completo.trim(),telefono:n.value.telefono.trim()||void 0,rol:n.value.rol});const R=s.query.redirect||"/dashboard";t.push(R)}catch(R){console.error("Error creating profile:",R),a.value=R instanceof Error?R.message:"Error al crear el perfil"}finally{i.value=!1}},h=async()=>{try{await r.signOut(),t.push("/")}catch(R){console.error("Error signing out:",R)}};return(x=(p=r.user)==null?void 0:p.user_metadata)!=null&&x.full_name&&(n.value.nombre_completo=r.user.user_metadata.full_name),(S=(w=r.user)==null?void 0:w.user_metadata)!=null&&S.phone&&(n.value.telefono=r.user.user_metadata.phone),(R,y)=>{var g,$;return b(),k("div",A5,[y[12]||(y[12]=Fr('<div class="sm:mx-auto sm:w-full sm:max-w-md"><div class="text-center"><h1 class="text-3xl font-bold text-gray-900">ComandaPlus</h1><h2 class="mt-6 text-2xl font-semibold text-gray-900"> Completa tu perfil </h2><p class="mt-2 text-sm text-gray-600"> Para continuar, necesitamos algunos datos adicionales </p></div></div>',1)),c("div",R5,[c("div",j5,[c("div",O5,[c("div",I5,[y[3]||(y[3]=c("div",{class:"flex-shrink-0"},[c("svg",{class:"h-5 w-5 text-blue-400",fill:"currentColor",viewBox:"0 0 20 20"},[c("path",{"fill-rule":"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-6-3a2 2 0 11-4 0 2 2 0 014 0zm-2 4a5 5 0 00-4.546 2.916A5.986 5.986 0 0010 16a5.986 5.986 0 004.546-2.084A5 5 0 0010 11z","clip-rule":"evenodd"})])],-1)),c("div",M5,[c("p",L5," Usuario: "+E((g=B(r).user)==null?void 0:g.email),1),c("p",D5," ID: "+E(($=B(r).user)==null?void 0:$.id),1)])])]),c("form",{onSubmit:Is(f,["prevent"]),class:"space-y-6"},[c("div",null,[y[4]||(y[4]=c("label",{for:"nombre",class:"block text-sm font-medium text-gray-700"}," Nombre completo * ",-1)),c("div",N5,[Ke(c("input",{id:"nombre","onUpdate:modelValue":y[0]||(y[0]=D=>n.value.nombre_completo=D),type:"text",required:"",class:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md placeholder-gray-400 focus:outline-none focus:ring-orange-500 focus:border-orange-500 sm:text-sm",placeholder:"Tu nombre completo"},null,512),[[nt,n.value.nombre_completo]])]),o.value.nombre_completo?(b(),k("p",F5,E(o.value.nombre_completo),1)):F("",!0)]),c("div",null,[y[5]||(y[5]=c("label",{for:"telefono",class:"block text-sm font-medium text-gray-700"}," Teléfono ",-1)),c("div",U5,[Ke(c("input",{id:"telefono","onUpdate:modelValue":y[1]||(y[1]=D=>n.value.telefono=D),type:"tel",class:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md placeholder-gray-400 focus:outline-none focus:ring-orange-500 focus:border-orange-500 sm:text-sm",placeholder:"+34 612 345 678"},null,512),[[nt,n.value.telefono]])]),o.value.telefono?(b(),k("p",B5,E(o.value.telefono),1)):F("",!0)]),c("div",null,[y[7]||(y[7]=c("label",{for:"rol",class:"block text-sm font-medium text-gray-700"}," ¿Cuál es tu rol? * ",-1)),c("div",z5,[Ke(c("select",{id:"rol","onUpdate:modelValue":y[2]||(y[2]=D=>n.value.rol=D),required:"",class:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-orange-500 focus:border-orange-500 sm:text-sm"},y[6]||(y[6]=[c("option",{value:""},"Selecciona tu rol",-1),c("option",{value:"cliente"},"Cliente - Solo quiero hacer pedidos",-1),c("option",{value:"empleado"},"Empleado - Trabajo en un restaurante",-1),c("option",{value:"dueño"},"Propietario - Tengo mi propio restaurante",-1)]),512),[[In,n.value.rol]])]),o.value.rol?(b(),k("p",V5,E(o.value.rol),1)):F("",!0)]),n.value.rol?(b(),k("div",H5,[c("div",q5,[y[8]||(y[8]=c("div",{class:"flex-shrink-0"},[c("svg",{class:"h-5 w-5 text-gray-400",fill:"currentColor",viewBox:"0 0 20 20"},[c("path",{"fill-rule":"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z","clip-rule":"evenodd"})])],-1)),c("div",K5,[c("p",W5,E(d(n.value.rol)),1)])])])):F("",!0),a.value?(b(),k("div",G5,[c("div",J5,[y[9]||(y[9]=c("div",{class:"flex-shrink-0"},[c("svg",{class:"h-5 w-5 text-red-400",fill:"currentColor",viewBox:"0 0 20 20"},[c("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})])],-1)),c("div",Q5,[c("p",Y5,E(a.value),1)])])])):F("",!0),c("div",X5,[c("button",{type:"submit",disabled:i.value||!l.value,class:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-orange-600 hover:bg-orange-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-orange-500 disabled:opacity-50 disabled:cursor-not-allowed"},[i.value?(b(),k("svg",e3,y[10]||(y[10]=[c("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),c("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):F("",!0),xe(" "+E(i.value?"Creando perfil...":"Crear perfil"),1)],8,Z5),c("button",{type:"button",onClick:h,class:"w-full flex justify-center py-2 px-4 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-orange-500"}," Cerrar sesión ")])],32),y[11]||(y[11]=Fr('<div class="mt-6"><div class="relative"><div class="absolute inset-0 flex items-center"><div class="w-full border-t border-gray-300"></div></div><div class="relative flex justify-center text-sm"><span class="px-2 bg-white text-gray-500">Información</span></div></div><div class="mt-6 text-center"><p class="text-xs text-gray-500"> Esta información se utilizará para personalizar tu experiencia en ComandaPlus. Podrás modificarla más tarde desde tu perfil. </p></div></div>',1))])])])}}}),hd=s0({history:Rp("/"),routes:[{path:"/",name:"home",component:Ag,meta:{requiresAuth:!1}},{path:"/auth",name:"auth",component:P5,meta:{requiresAuth:!1}},{path:"/create-profile",name:"create-profile",component:t3,meta:{requiresAuth:!0,requiresProfile:!1}},{path:"/menu/:restaurante_id/:mesa?",name:"menu-digital",component:s2,meta:{requiresAuth:!1}},{path:"/dashboard/:restaurante_id?",name:"dashboard",component:v1,meta:{requiresAuth:!0,requiresProfile:!0,roles:["dueño","encargado","admin"],requiresDashboardAccess:!0}},{path:"/pedidos/:restaurante_id?",name:"pedidos",component:iw,meta:{requiresAuth:!0,requiresProfile:!0,roles:["empleado","encargado","dueño","admin"],requiresRestaurantAccess:!0}},{path:"/analytics/:restaurante_id?",name:"analytics",component:K4,meta:{requiresAuth:!0,requiresProfile:!0,roles:["encargado","dueño","admin"],requiresDashboardAccess:!0}},{path:"/:pathMatch(.*)*",name:"not-found",redirect:"/"}]});async function s3(e,t=10){let s=0;for(;!e.isInitialized&&s<t;)await new Promise(r=>setTimeout(r,100)),s++;s>=t&&console.warn("Auth store initialization timeout")}hd.beforeEach(async(e,t,s)=>{try{const r=Qt();if(await s3(r),r.loading){let d=0;for(;r.loading&&d<20;)await new Promise(u=>setTimeout(u,100)),d++}const n=e.meta.requiresAuth,o=e.meta.requiresProfile,i=e.meta.roles,a=e.meta.requiresDashboardAccess,l=e.meta.requiresRestaurantAccess;if(console.log("Navigation guard:",{to:e.name,requiresAuth:n,isAuthenticated:r.isAuthenticated,hasProfile:r.hasProfile,userRole:r.userRole,allowedRoles:i}),n&&!r.isAuthenticated){console.log("Redirecting to auth - not authenticated"),s({name:"auth",query:{redirect:e.fullPath}});return}if(r.isAuthenticated&&e.name==="auth"){console.log("Redirecting from auth - already authenticated"),r.hasProfile?r.canAccessDashboard?s({name:"dashboard"}):s({name:"home"}):s({name:"create-profile"});return}if(n&&o!==!1&&r.isAuthenticated&&!r.hasProfile){if(e.name==="create-profile"){s();return}console.log("Redirecting to create-profile - no profile"),s({name:"create-profile",query:{redirect:e.fullPath}});return}if(r.hasProfile&&e.name==="create-profile"){console.log("Redirecting from create-profile - already has profile"),r.canAccessDashboard?s({name:"dashboard"}):s({name:"home"});return}if(i&&r.isAuthenticated&&r.hasProfile){const d=r.userRole;if(!i.includes(d)){console.log("Access denied - insufficient role:",{userRole:d,allowedRoles:i}),r.canAccessDashboard?s({name:"dashboard"}):s({name:"home"});return}}if(a&&r.hasProfile&&!r.canAccessDashboard){console.log("Access denied - no dashboard access"),s({name:"home"});return}if(l&&r.hasProfile){const d=e.params.restaurante_id;if(d){if(!await r.checkRestaurantAccess(d)){console.log("Access denied - no restaurant access:",d),s({name:"dashboard"});return}r.setCurrentRestaurant(d)}else{if(!r.currentRestaurant){if(r.userRestaurants.length===0){console.log("No restaurants available"),s({name:"home"});return}r.setCurrentRestaurant(r.userRestaurants[0].id)}if(r.currentRestaurant&&!e.params.restaurante_id){s({name:e.name,params:{...e.params,restaurante_id:r.currentRestaurant.id},query:e.query});return}}}if((e.name==="dashboard"||e.name==="analytics")&&r.hasProfile){const d=e.params.restaurante_id;if(d){if(!await r.checkRestaurantAccess(d)){console.log("Access denied to specific restaurant:",d),s({name:"dashboard"});return}r.setCurrentRestaurant(d)}else if(!r.currentRestaurant&&r.userRestaurants.length>0&&r.setCurrentRestaurant(r.userRestaurants[0].id),r.currentRestaurant){s({name:e.name,params:{...e.params,restaurante_id:r.currentRestaurant.id},query:e.query});return}else{console.log("No restaurants available for dashboard"),s({name:"home"});return}}console.log("Navigation allowed to:",e.name),s()}catch(r){console.error("Error in navigation guard:",r),e.name!=="home"?s({name:"home"}):s()}});const r3=Ee({__name:"App",setup(e){const t=Qt(),s=Wi();return Be(async()=>{await t.loadUser(),s.loadFromLocalStorage(),window.addEventListener("beforeunload",()=>{s.saveToLocalStorage()})}),(r,n)=>(b(),De(Wu))}});function n3(e,t,s){var r;console.group("🚨 Error Global Capturado"),console.error("Error:",e),console.error("Info del componente:",s),e instanceof Error&&(console.error("Nombre del error:",e.name),console.error("Mensaje:",e.message),console.error("Stack trace:",e.stack),e.message.includes("readonly")&&console.error("🔍 Error de readonly detectado - probablemente falta importar readonly de Vue"),e.message.includes("Supabase")&&console.error("🔍 Error de Supabase detectado"),e.message.includes("router")&&console.error("🔍 Error de router detectado")),t&&(console.error("Componente Vue:",t),console.error("Nombre del componente:",t.$options.name||"Anónimo"),console.error("Props del componente:",t.$props),console.error("Ruta actual:",(r=t.$route)==null?void 0:r.path)),console.error("Entorno:","production"),console.error("URL actual:",window.location.href),console.error("User Agent:",navigator.userAgent),console.error("Timestamp:",new Date().toISOString()),console.groupEnd()}const lr=Kh(r3),o3=Jh();lr.use(o3);lr.use(hd);lr.config.globalProperties.$appName="ComandaPlus";lr.config.globalProperties.$version="1.0.0";lr.config.errorHandler=n3;window.addEventListener("error",e=>{console.group("🚨 Error JavaScript No Capturado"),console.error("Error:",e.error),console.error("Mensaje:",e.message),console.error("Archivo:",e.filename),console.error("Línea:",e.lineno),console.error("Columna:",e.colno),console.groupEnd()});window.addEventListener("unhandledrejection",e=>{console.group("🚨 Promise Rechazada No Manejada"),console.error("Razón:",e.reason),console.error("Promise:",e.promise),console.groupEnd(),e.preventDefault()});async function i3(){try{console.log("🚀 Inicializando ComandaPlus...");const{useAuthStore:e}=await hs(async()=>{const{useAuthStore:o}=await Promise.resolve().then(()=>wg);return{useAuthStore:o}},void 0),t=e();console.log("✅ Store de autenticación inicializado");const{supabase:s}=await hs(async()=>{const{supabase:o}=await Promise.resolve().then(()=>_g);return{supabase:o}},void 0),{data:r,error:n}=await s.auth.getSession();n?console.warn("⚠️ Error al obtener sesión de Supabase:",n.message):console.log("✅ Conexión con Supabase establecida"),lr.mount("#app"),console.log("✅ Aplicación montada correctamente")}catch(e){console.error("💥 Error fatal al inicializar la aplicación:",e),document.body.innerHTML=`
      <div style="
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        height: 100vh;
        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        text-align: center;
        padding: 20px;
      ">
        <h1 style="font-size: 3rem; margin-bottom: 1rem; font-weight: 300;">
          ⚠️ Error de Inicialización
        </h1>
        <p style="font-size: 1.2rem; margin-bottom: 2rem; opacity: 0.9;">
          ComandaPlus no pudo iniciarse correctamente
        </p>
        <div style="
          background: rgba(255,255,255,0.1);
          padding: 1rem;
          border-radius: 8px;
          font-family: monospace;
          font-size: 0.9rem;
          max-width: 600px;
          margin-bottom: 2rem;
        ">
          ${e instanceof Error?e.message:String(e)}
        </div>
        <button onclick="window.location.reload()" style="
          background: rgba(255,255,255,0.2);
          border: 2px solid rgba(255,255,255,0.3);
          color: white;
          padding: 12px 24px;
          border-radius: 6px;
          font-size: 1rem;
          cursor: pointer;
          transition: all 0.3s ease;
        " onmouseover="this.style.background='rgba(255,255,255,0.3)'"
           onmouseout="this.style.background='rgba(255,255,255,0.2)'">
          🔄 Reintentar
        </button>
      </div>
    `}}"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/sw.js").then(e=>{console.log("✅ Service Worker registrado:",e)}).catch(e=>{console.error("❌ Error al registrar Service Worker:",e)})});i3();export{a3 as g};
